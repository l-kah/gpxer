function X2JS(t){"use strict";function e(){void 0===t.escapeMode&&(t.escapeMode=!0),t.attributePrefix=t.attributePrefix||"_",t.arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0),t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0),void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0),t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[]}function n(){function t(t){var e=String(t);return 1===e.length&&(e="0"+e),e}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}function i(t){var e=t.localName;return null==e&&(e=t.baseName),(null==e||""==e)&&(e=t.nodeName),e}function o(t){return t.prefix}function r(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):t}function s(t){return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function a(e,n,i){switch(t.arrayAccessForm){case"property":e[n+"_asArray"]=e[n]instanceof Array?e[n]:[e[n]]}if(!(e[n]instanceof Array)&&t.arrayAccessFormPaths.length>0){for(var o=0;o<t.arrayAccessFormPaths.length;o++){var r=t.arrayAccessFormPaths[o];if("string"==typeof r){if(r==i)break}else if(r instanceof RegExp){if(r.test(i))break}else if("function"==typeof r&&r(e,n,i))break}o!=t.arrayAccessFormPaths.length&&(e[n]=[e[n]])}}function l(t){var e=t.split(/[-T:+Z]/g),n=new Date(e[0],e[1]-1,e[2]),i=e[5].split(".");if(n.setHours(e[3],e[4],i[0]),i.length>1&&n.setMilliseconds(i[1]),e[6]&&e[7]){var o=60*e[6]+Number(e[7]),r=/\d\d-\d\d:\d\d$/.test(t)?"-":"+";o=0+("-"==r?-1*o:o),n.setMinutes(n.getMinutes()-o-n.getTimezoneOffset())}else-1!==t.indexOf("Z",t.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function u(e,n,i){if(t.datetimeAccessFormPaths.length>0){for(var o=i.split(".#")[0],r=0;r<t.datetimeAccessFormPaths.length;r++){var s=t.datetimeAccessFormPaths[r];if("string"==typeof s){if(s==o)break}else if(s instanceof RegExp){if(s.test(o))break}else if("function"==typeof s&&s(obj,n,o))break}return r!=t.datetimeAccessFormPaths.length?l(e):e}return e}function p(e,n){if(e.nodeType==M.DOCUMENT_NODE){for(var r=new Object,l=e.childNodes,c=0;c<l.length;c++){var h=l.item(c);if(h.nodeType==M.ELEMENT_NODE){var d=i(h);r[d]=p(h,d)}}return r}if(e.nodeType==M.ELEMENT_NODE){var r=new Object;r.__cnt=0;for(var l=e.childNodes,c=0;c<l.length;c++){var h=l.item(c),d=i(h);h.nodeType!=M.COMMENT_NODE&&(r.__cnt++,null==r[d]?(r[d]=p(h,n+"."+d),a(r,d,n+"."+d)):(null!=r[d]&&(r[d]instanceof Array||(r[d]=[r[d]],a(r,d,n+"."+d))),r[d][r[d].length]=p(h,n+"."+d)))}for(var f=0;f<e.attributes.length;f++){var g=e.attributes.item(f);r.__cnt++,r[t.attributePrefix+g.name]=g.value}var m=o(e);return null!=m&&""!=m&&(r.__cnt++,r.__prefix=m),null!=r["#text"]&&(r.__text=r["#text"],r.__text instanceof Array&&(r.__text=r.__text.join("\n")),t.escapeMode&&(r.__text=s(r.__text)),t.stripWhitespaces&&(r.__text=r.__text.trim()),delete r["#text"],"property"==t.arrayAccessForm&&delete r["#text_asArray"],r.__text=u(r.__text,d,n+"."+d)),null!=r["#cdata-section"]&&(r.__cdata=r["#cdata-section"],delete r["#cdata-section"],"property"==t.arrayAccessForm&&delete r["#cdata-section_asArray"]),1==r.__cnt&&null!=r.__text?r=r.__text:0==r.__cnt&&"text"==t.emptyNodeForm?r="":r.__cnt>1&&null!=r.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""==r.__text||""==r.__text.trim())&&delete r.__text,delete r.__cnt,!t.enableToStringFunc||null==r.__text&&null==r.__cdata||(r.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),r}return e.nodeType==M.TEXT_NODE||e.nodeType==M.CDATA_SECTION_NODE?e.nodeValue:void 0}function c(e,n,i,o){var s="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+n;if(null!=i)for(var a=0;a<i.length;a++){var l=i[a],u=e[l];t.escapeMode&&(u=r(u)),s+=" "+l.substr(t.attributePrefix.length)+"='"+u+"'"}return s+=o?"/>":">"}function h(t,e){return"</"+(null!=t.__prefix?t.__prefix+":":"")+e+">"}function d(t,e){return-1!==t.indexOf(e,t.length-e.length)}function f(e,n){return"property"==t.arrayAccessForm&&d(n.toString(),"_asArray")||0==n.toString().indexOf(t.attributePrefix)||0==n.toString().indexOf("__")||e[n]instanceof Function?!0:!1}function g(t){var e=0;if(t instanceof Object)for(var n in t)f(t,n)||e++;return e}function m(e){var n=[];if(e instanceof Object)for(var i in e)-1==i.toString().indexOf("__")&&0==i.toString().indexOf(t.attributePrefix)&&n.push(i);return n}function v(e){var n="";return null!=e.__cdata&&(n+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(n+=t.escapeMode?r(e.__text):e.__text),n}function y(e){var n="";return e instanceof Object?n+=v(e):null!=e&&(n+=t.escapeMode?r(e):e),n}function _(t,e,n){var i="";if(0==t.length)i+=c(t,e,n,!0);else for(var o=0;o<t.length;o++)i+=c(t[o],e,m(t[o]),!1),i+=w(t[o]),i+=h(t[o],e);return i}function w(t){var e="",n=g(t);if(n>0)for(var i in t)if(!f(t,i)){var o=t[i],r=m(o);if(null==o||void 0==o)e+=c(o,i,r,!0);else if(o instanceof Object)if(o instanceof Array)e+=_(o,i,r);else if(o instanceof Date)e+=c(o,i,r,!1),e+=o.toISOString(),e+=h(o,i);else{var s=g(o);s>0||null!=o.__text||null!=o.__cdata?(e+=c(o,i,r,!1),e+=w(o),e+=h(o,i)):e+=c(o,i,r,!0)}else e+=c(o,i,r,!1),e+=y(o),e+=h(o,i)}return e+=y(t)}var b="1.1.5";t=t||{},e(),n();var M={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(t){var e=window.ActiveXObject||"ActiveXObject"in window;if(void 0===t)return null;var n;if(window.DOMParser){var i=new window.DOMParser,o=null;if(!e)try{o=i.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(r){o=null}try{n=i.parseFromString(t,"text/xml"),null!=o&&n.getElementsByTagNameNS(o,"parsererror").length>0&&(n=null)}catch(r){n=null}}else 0==t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t);return n},this.asArray=function(t){return t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():"number"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return"string"==typeof t?l(t):t},this.xml2json=function(t){return p(t)},this.xml_str2json=function(t){var e=this.parseXmlString(t);return null!=e?this.xml2json(e):null},this.json2xml_str=function(t){return w(t)},this.json2xml=function(t){var e=this.json2xml_str(t);return this.parseXmlString(e)},this.getVersion=function(){return b}}(function(){function t(t,e,n){for(var i=(n||0)-1,o=t?t.length:0;++i<o;)if(t[i]===e)return i;return-1}function e(e,n){var i=typeof n;if(e=e.cache,"boolean"==i||null==n)return e[n]?0:-1;"number"!=i&&"string"!=i&&(i="object");var o="number"==i?n:v+n;return e=(e=e[i])&&e[o],"object"==i?e&&t(e,n)>-1?0:-1:e?0:-1}function n(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?t:v+t,o=e[n]||(e[n]={});"object"==n?(o[i]||(o[i]=[])).push(t):o[i]=!0}}function i(t){return t.charCodeAt(0)}function o(t,e){for(var n=t.criteria,i=e.criteria,o=-1,r=n.length;++o<r;){var s=n[o],a=i[o];if(s!==a){if(s>a||"undefined"==typeof s)return 1;if(a>s||"undefined"==typeof a)return-1}}return t.index-e.index}function r(t){var e=-1,i=t.length,o=t[0],r=t[i/2|0],s=t[i-1];if(o&&"object"==typeof o&&r&&"object"==typeof r&&s&&"object"==typeof s)return!1;var a=l();a["false"]=a["null"]=a["true"]=a.undefined=!1;var u=l();for(u.array=t,u.cache=a,u.push=n;++e<i;)u.push(t[e]);return u}function s(t){return"\\"+H[t]}function a(){return f.pop()||[]}function l(){return g.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function u(t){t.length=0,f.length<_&&f.push(t)}function p(t){var e=t.cache;e&&p(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,g.length<_&&g.push(t)}function c(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var i=-1,o=n-e||0,r=Array(0>o?0:o);++i<o;)r[i]=t[e+i];return r}function h(n){function f(t){return t&&"object"==typeof t&&!Ji(t)&&Ti.call(t,"__wrapped__")?t:new g(t)}function g(t,e){this.__chain__=!!e,this.__wrapped__=t}function _(t){function e(){if(i){var t=c(i);$i.apply(t,arguments)}if(this instanceof e){var r=Z(n.prototype),s=n.apply(r,t||arguments);return Le(s)?s:r}return n.apply(o,t||arguments)}var n=t[0],i=t[2],o=t[4];return Qi(e,t),e}function H(t,e,n,i,o){if(n){var r=n(t);if("undefined"!=typeof r)return r}var s=Le(t);if(!s)return t;var l=Pi.call(t);if(!F[l])return t;var p=Zi[l];switch(l){case A:case W:return new p(+t);case z:case j:return new p(t);case K:return r=p(t.source,C.exec(t)),r.lastIndex=t.lastIndex,r}var h=Ji(t);if(e){var d=!i;i||(i=a()),o||(o=a());for(var f=i.length;f--;)if(i[f]==t)return o[f];r=h?p(t.length):{}}else r=h?c(t):ro({},t);return h&&(Ti.call(t,"index")&&(r.index=t.index),Ti.call(t,"input")&&(r.input=t.input)),e?(i.push(t),o.push(r),(h?Xe:lo)(t,function(t,s){r[s]=H(t,e,n,i,o)}),d&&(u(i),u(o)),r):r}function Z(t){return Le(t)?Ni(t):{}}function X(t,e,n){if("function"!=typeof t)return Jn;if("undefined"==typeof e||!("prototype"in t))return t;var i=t.__bindData__;if("undefined"==typeof i&&(Xi.funcNames&&(i=!t.name),i=i||!Xi.funcDecomp,!i)){var o=Ei.call(t);Xi.funcNames||(i=!G.test(o)),i||(i=L.test(o),Qi(t,i))}if(i===!1||i!==!0&&1&i[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,r){return t.call(e,n,i,o,r)}}return $n(t,e)}function Q(t){function e(){var t=l?s:this;if(o){var f=c(o);$i.apply(f,arguments)}if((r||p)&&(f||(f=c(arguments)),r&&$i.apply(f,r),p&&f.length<a))return i|=16,Q([n,h?i:-4&i,f,null,s,a]);if(f||(f=arguments),u&&(n=t[d]),this instanceof e){t=Z(n.prototype);var g=n.apply(t,f);return Le(g)?g:t}return n.apply(t,f)}var n=t[0],i=t[1],o=t[2],r=t[3],s=t[4],a=t[5],l=1&i,u=2&i,p=4&i,h=8&i,d=n;return Qi(e,t),e}function J(n,i){var o=-1,s=le(),a=n?n.length:0,l=a>=y&&s===t,u=[];if(l){var c=r(i);c?(s=e,i=c):l=!1}for(;++o<a;){var h=n[o];s(i,h)<0&&u.push(h)}return l&&p(i),u}function te(t,e,n,i){for(var o=(i||0)-1,r=t?t.length:0,s=[];++o<r;){var a=t[o];if(a&&"object"==typeof a&&"number"==typeof a.length&&(Ji(a)||he(a))){e||(a=te(a,e,n));var l=-1,u=a.length,p=s.length;for(s.length+=u;++l<u;)s[p++]=a[l]}else n||s.push(a)}return s}function ee(t,e,n,i,o,r){if(n){var s=n(t,e);if("undefined"!=typeof s)return!!s}if(t===e)return 0!==t||1/t==1/e;var l=typeof t,p=typeof e;if(!(t!==t||t&&V[l]||e&&V[p]))return!1;if(null==t||null==e)return t===e;var c=Pi.call(t),h=Pi.call(e);if(c==T&&(c=N),h==T&&(h=N),c!=h)return!1;switch(c){case A:case W:return+t==+e;case z:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case K:case j:return t==Mi(e)}var d=c==$;if(!d){var f=Ti.call(t,"__wrapped__"),g=Ti.call(e,"__wrapped__");if(f||g)return ee(f?t.__wrapped__:t,g?e.__wrapped__:e,n,i,o,r);if(c!=N)return!1;var m=t.constructor,v=e.constructor;if(m!=v&&!(Se(m)&&m instanceof m&&Se(v)&&v instanceof v)&&"constructor"in t&&"constructor"in e)return!1}var y=!o;o||(o=a()),r||(r=a());for(var _=o.length;_--;)if(o[_]==t)return r[_]==e;var w=0;if(s=!0,o.push(t),r.push(e),d){if(_=t.length,w=e.length,s=w==_,s||i)for(;w--;){var b=_,M=e[w];if(i)for(;b--&&!(s=ee(t[b],M,n,i,o,r)););else if(!(s=ee(t[w],M,n,i,o,r)))break}}else ao(e,function(e,a,l){return Ti.call(l,a)?(w++,s=Ti.call(t,a)&&ee(t[a],e,n,i,o,r)):void 0}),s&&!i&&ao(t,function(t,e,n){return Ti.call(n,e)?s=--w>-1:void 0});return o.pop(),r.pop(),y&&(u(o),u(r)),s}function ne(t,e,n,i,o){(Ji(e)?Xe:lo)(e,function(e,r){var s,a,l=e,u=t[r];if(e&&((a=Ji(e))||uo(e))){for(var p=i.length;p--;)if(s=i[p]==e){u=o[p];break}if(!s){var c;n&&(l=n(u,e),(c="undefined"!=typeof l)&&(u=l)),c||(u=a?Ji(u)?u:[]:uo(u)?u:{}),i.push(e),o.push(u),c||ne(u,e,n,i,o)}}else n&&(l=n(u,e),"undefined"==typeof l&&(l=e)),"undefined"!=typeof l&&(u=l);t[r]=u})}function ie(t,e){return t+Oi(qi()*(e-t+1))}function oe(n,i,o){var s=-1,l=le(),c=n?n.length:0,h=[],d=!i&&c>=y&&l===t,f=o||d?a():h;if(d){var g=r(f);l=e,f=g}for(;++s<c;){var m=n[s],v=o?o(m,s,n):m;(i?!s||f[f.length-1]!==v:l(f,v)<0)&&((o||d)&&f.push(v),h.push(m))}return d?(u(f.array),p(f)):o&&u(f),h}function re(t){return function(e,n,i){var o={};n=f.createCallback(n,i,3);var r=-1,s=e?e.length:0;if("number"==typeof s)for(;++r<s;){var a=e[r];t(o,a,n(a,r,e),e)}else lo(e,function(e,i,r){t(o,e,n(e,i,r),r)});return o}}function se(t,e,n,i,o,r){var s=1&e,a=2&e,l=4&e,u=16&e,p=32&e;if(!a&&!Se(t))throw new ki;u&&!n.length&&(e&=-17,u=n=!1),p&&!i.length&&(e&=-33,p=i=!1);var h=t&&t.__bindData__;if(h&&h!==!0)return h=c(h),h[2]&&(h[2]=c(h[2])),h[3]&&(h[3]=c(h[3])),!s||1&h[1]||(h[4]=o),!s&&1&h[1]&&(e|=8),!l||4&h[1]||(h[5]=r),u&&$i.apply(h[2]||(h[2]=[]),n),p&&Bi.apply(h[3]||(h[3]=[]),i),h[1]|=e,se.apply(null,h);var d=1==e||17===e?_:Q;return d([t,e,n,i,o,r])}function ae(t){return eo[t]}function le(){var e=(e=f.indexOf)===yn?t:e;return e}function ue(t){return"function"==typeof t&&Di.test(t)}function pe(t){var e,n;return t&&Pi.call(t)==N&&(e=t.constructor,!Se(e)||e instanceof e)?(ao(t,function(t,e){n=e}),"undefined"==typeof n||Ti.call(t,n)):!1}function ce(t){return no[t]}function he(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Pi.call(t)==T||!1}function de(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n=e,e=!1),H(t,e,"function"==typeof n&&X(n,i,1))}function fe(t,e,n){return H(t,!0,"function"==typeof e&&X(e,n,1))}function ge(t,e){var n=Z(t);return e?ro(n,e):n}function me(t,e,n){var i;return e=f.createCallback(e,n,3),lo(t,function(t,n,o){return e(t,n,o)?(i=n,!1):void 0}),i}function ve(t,e,n){var i;return e=f.createCallback(e,n,3),_e(t,function(t,n,o){return e(t,n,o)?(i=n,!1):void 0}),i}function ye(t,e,n){var i=[];ao(t,function(t,e){i.push(e,t)});var o=i.length;for(e=X(e,n,3);o--&&e(i[o--],i[o],t)!==!1;);return t}function _e(t,e,n){var i=to(t),o=i.length;for(e=X(e,n,3);o--;){var r=i[o];if(e(t[r],r,t)===!1)break}return t}function we(t){var e=[];return ao(t,function(t,n){Se(t)&&e.push(n)}),e.sort()}function be(t,e){return t?Ti.call(t,e):!1}function Me(t){for(var e=-1,n=to(t),i=n.length,o={};++e<i;){var r=n[e];o[t[r]]=r}return o}function ke(t){return t===!0||t===!1||t&&"object"==typeof t&&Pi.call(t)==A||!1}function xe(t){return t&&"object"==typeof t&&Pi.call(t)==W||!1}function Ce(t){return t&&1===t.nodeType||!1}function Ge(t){var e=!0;if(!t)return e;var n=Pi.call(t),i=t.length;return n==$||n==j||n==T||n==N&&"number"==typeof i&&Se(t.splice)?!i:(lo(t,function(){return e=!1}),e)}function Pe(t,e,n,i){return ee(t,e,"function"==typeof n&&X(n,i,2))}function De(t){return ji(t)&&!Fi(parseFloat(t))}function Se(t){return"function"==typeof t}function Le(t){return!(!t||!V[typeof t])}function Oe(t){return Ie(t)&&t!=+t}function Ee(t){return null===t}function Ie(t){return"number"==typeof t||t&&"object"==typeof t&&Pi.call(t)==z||!1}function Te(t){return t&&"object"==typeof t&&Pi.call(t)==K||!1}function $e(t){return"string"==typeof t||t&&"object"==typeof t&&Pi.call(t)==j||!1}function Ae(t){return"undefined"==typeof t}function We(t,e,n){var i={};return e=f.createCallback(e,n,3),lo(t,function(t,n,o){i[n]=e(t,n,o)}),i}function Be(t){var e=arguments,n=2;if(!Le(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var i=X(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(i=e[--n]);for(var o=c(arguments,1,n),r=-1,s=a(),l=a();++r<n;)ne(t,o[r],i,s,l);return u(s),u(l),t}function ze(t,e,n){var i={};if("function"!=typeof e){var o=[];ao(t,function(t,e){o.push(e)}),o=J(o,te(arguments,!0,!1,1));for(var r=-1,s=o.length;++r<s;){var a=o[r];i[a]=t[a]}}else e=f.createCallback(e,n,3),ao(t,function(t,n,o){e(t,n,o)||(i[n]=t)});return i}function Ne(t){for(var e=-1,n=to(t),i=n.length,o=fi(i);++e<i;){var r=n[e];o[e]=[r,t[r]]}return o}function Ke(t,e,n){var i={};if("function"!=typeof e)for(var o=-1,r=te(arguments,!0,!1,1),s=Le(t)?r.length:0;++o<s;){var a=r[o];a in t&&(i[a]=t[a])}else e=f.createCallback(e,n,3),ao(t,function(t,n,o){e(t,n,o)&&(i[n]=t)});return i}function je(t,e,n,i){var o=Ji(t);if(null==n)if(o)n=[];else{var r=t&&t.constructor,s=r&&r.prototype;n=Z(s)}return e&&(e=f.createCallback(e,i,4),(o?Xe:lo)(t,function(t,i,o){return e(n,t,i,o)})),n}function Fe(t){for(var e=-1,n=to(t),i=n.length,o=fi(i);++e<i;)o[e]=t[n[e]];return o}function Re(t){for(var e=arguments,n=-1,i=te(e,!0,!1,1),o=e[2]&&e[2][e[1]]===t?1:i.length,r=fi(o);++n<o;)r[n]=t[i[n]];return r}function Ue(t,e,n){var i=-1,o=le(),r=t?t.length:0,s=!1;return n=(0>n?Ui(0,r+n):n)||0,Ji(t)?s=o(t,e,n)>-1:"number"==typeof r?s=($e(t)?t.indexOf(e,n):o(t,e,n))>-1:lo(t,function(t){return++i>=n?!(s=t===e):void 0}),s}function Ve(t,e,n){var i=!0;e=f.createCallback(e,n,3);var o=-1,r=t?t.length:0;if("number"==typeof r)for(;++o<r&&(i=!!e(t[o],o,t)););else lo(t,function(t,n,o){return i=!!e(t,n,o)});return i}function He(t,e,n){var i=[];e=f.createCallback(e,n,3);var o=-1,r=t?t.length:0;if("number"==typeof r)for(;++o<r;){var s=t[o];e(s,o,t)&&i.push(s)}else lo(t,function(t,n,o){e(t,n,o)&&i.push(t)});return i}function qe(t,e,n){e=f.createCallback(e,n,3);var i=-1,o=t?t.length:0;if("number"!=typeof o){var r;return lo(t,function(t,n,i){return e(t,n,i)?(r=t,!1):void 0}),r}for(;++i<o;){var s=t[i];if(e(s,i,t))return s}}function Ze(t,e,n){var i;return e=f.createCallback(e,n,3),Qe(t,function(t,n,o){return e(t,n,o)?(i=t,!1):void 0}),i}function Xe(t,e,n){var i=-1,o=t?t.length:0;if(e=e&&"undefined"==typeof n?e:X(e,n,3),"number"==typeof o)for(;++i<o&&e(t[i],i,t)!==!1;);else lo(t,e);return t}function Qe(t,e,n){var i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:X(e,n,3),"number"==typeof i)for(;i--&&e(t[i],i,t)!==!1;);else{var o=to(t);i=o.length,lo(t,function(t,n,r){return n=o?o[--i]:--i,e(r[n],n,r)})}return t}function Je(t,e){var n=c(arguments,2),i=-1,o="function"==typeof e,r=t?t.length:0,s=fi("number"==typeof r?r:0);return Xe(t,function(t){s[++i]=(o?e:t[e]).apply(t,n)}),s}function Ye(t,e,n){var i=-1,o=t?t.length:0;if(e=f.createCallback(e,n,3),"number"==typeof o)for(var r=fi(o);++i<o;)r[i]=e(t[i],i,t);else r=[],lo(t,function(t,n,o){r[++i]=e(t,n,o)});return r}function tn(t,e,n){var o=-1/0,r=o;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Ji(t))for(var s=-1,a=t.length;++s<a;){var l=t[s];l>r&&(r=l)}else e=null==e&&$e(t)?i:f.createCallback(e,n,3),Xe(t,function(t,n,i){var s=e(t,n,i);s>o&&(o=s,r=t)});return r}function en(t,e,n){var o=1/0,r=o;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Ji(t))for(var s=-1,a=t.length;++s<a;){var l=t[s];r>l&&(r=l)}else e=null==e&&$e(t)?i:f.createCallback(e,n,3),Xe(t,function(t,n,i){var s=e(t,n,i);o>s&&(o=s,r=t)});return r}function nn(t,e,n,i){if(!t)return n;var o=arguments.length<3;e=f.createCallback(e,i,4);var r=-1,s=t.length;if("number"==typeof s)for(o&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);else lo(t,function(t,i,r){n=o?(o=!1,t):e(n,t,i,r)});return n}function on(t,e,n,i){var o=arguments.length<3;return e=f.createCallback(e,i,4),Qe(t,function(t,i,r){n=o?(o=!1,t):e(n,t,i,r)}),n}function rn(t,e,n){return e=f.createCallback(e,n,3),He(t,function(t,n,i){return!e(t,n,i)})}function sn(t,e,n){if(t&&"number"!=typeof t.length&&(t=Fe(t)),null==e||n)return t?t[ie(0,t.length-1)]:d;var i=an(t);return i.length=Vi(Ui(0,e),i.length),i}function an(t){var e=-1,n=t?t.length:0,i=fi("number"==typeof n?n:0);return Xe(t,function(t){var n=ie(0,++e);i[e]=i[n],i[n]=t}),i}function ln(t){var e=t?t.length:0;return"number"==typeof e?e:to(t).length}function un(t,e,n){var i;e=f.createCallback(e,n,3);var o=-1,r=t?t.length:0;if("number"==typeof r)for(;++o<r&&!(i=e(t[o],o,t)););else lo(t,function(t,n,o){return!(i=e(t,n,o))});return!!i}function pn(t,e,n){var i=-1,r=Ji(e),s=t?t.length:0,c=fi("number"==typeof s?s:0);for(r||(e=f.createCallback(e,n,3)),Xe(t,function(t,n,o){var s=c[++i]=l();r?s.criteria=Ye(e,function(e){return t[e]}):(s.criteria=a())[0]=e(t,n,o),s.index=i,s.value=t}),s=c.length,c.sort(o);s--;){var h=c[s];c[s]=h.value,r||u(h.criteria),p(h)}return c}function cn(t){return t&&"number"==typeof t.length?c(t):Fe(t)}function hn(t){for(var e=-1,n=t?t.length:0,i=[];++e<n;){var o=t[e];o&&i.push(o)}return i}function dn(t){return J(t,te(arguments,!0,!0,1))}function fn(t,e,n){var i=-1,o=t?t.length:0;for(e=f.createCallback(e,n,3);++i<o;)if(e(t[i],i,t))return i;return-1}function gn(t,e,n){var i=t?t.length:0;for(e=f.createCallback(e,n,3);i--;)if(e(t[i],i,t))return i;return-1}function mn(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=-1;for(e=f.createCallback(e,n,3);++r<o&&e(t[r],r,t);)i++}else if(i=e,null==i||n)return t?t[0]:d;return c(t,0,Vi(Ui(0,i),o))}function vn(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n="function"!=typeof e&&i&&i[e]===t?null:e,e=!1),null!=n&&(t=Ye(t,n,i)),te(t,e)}function yn(e,n,i){if("number"==typeof i){var o=e?e.length:0;i=0>i?Ui(0,o+i):i||0}else if(i){var r=Pn(e,n);return e[r]===n?r:-1}return t(e,n,i)}function _n(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=o;for(e=f.createCallback(e,n,3);r--&&e(t[r],r,t);)i++}else i=null==e||n?1:e||i;return c(t,0,Vi(Ui(0,o-i),o))}function wn(){for(var n=[],i=-1,o=arguments.length,s=a(),l=le(),c=l===t,h=a();++i<o;){var d=arguments[i];(Ji(d)||he(d))&&(n.push(d),s.push(c&&d.length>=y&&r(i?n[i]:h)))}var f=n[0],g=-1,m=f?f.length:0,v=[];t:for(;++g<m;){var _=s[0];if(d=f[g],(_?e(_,d):l(h,d))<0){for(i=o,(_||h).push(d);--i;)if(_=s[i],(_?e(_,d):l(n[i],d))<0)continue t;v.push(d)}}for(;o--;)_=s[o],_&&p(_);return u(s),u(h),v}function bn(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var r=o;for(e=f.createCallback(e,n,3);r--&&e(t[r],r,t);)i++}else if(i=e,null==i||n)return t?t[o-1]:d;return c(t,Ui(0,o-i))}function Mn(t,e,n){var i=t?t.length:0;for("number"==typeof n&&(i=(0>n?Ui(0,i+n):Vi(n,i-1))+1);i--;)if(t[i]===e)return i;return-1}function kn(t){for(var e=arguments,n=0,i=e.length,o=t?t.length:0;++n<i;)for(var r=-1,s=e[n];++r<o;)t[r]===s&&(Wi.call(t,r--,1),o--);return t}function xn(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var i=-1,o=Ui(0,Si((e-t)/(n||1))),r=fi(o);++i<o;)r[i]=t,t+=n;return r}function Cn(t,e,n){var i=-1,o=t?t.length:0,r=[];for(e=f.createCallback(e,n,3);++i<o;){var s=t[i];e(s,i,t)&&(r.push(s),Wi.call(t,i--,1),o--)}return r}function Gn(t,e,n){if("number"!=typeof e&&null!=e){var i=0,o=-1,r=t?t.length:0;for(e=f.createCallback(e,n,3);++o<r&&e(t[o],o,t);)i++}else i=null==e||n?1:Ui(0,e);return c(t,i)}function Pn(t,e,n,i){var o=0,r=t?t.length:o;for(n=n?f.createCallback(n,i,1):Jn,e=n(e);r>o;){var s=o+r>>>1;n(t[s])<e?o=s+1:r=s}return o}function Dn(){return oe(te(arguments,!0,!0))}function Sn(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n="function"!=typeof e&&i&&i[e]===t?null:e,e=!1),null!=n&&(n=f.createCallback(n,i,3)),oe(t,e,n)}function Ln(t){return J(t,c(arguments,1))}function On(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Ji(n)||he(n))var i=i?oe(J(i,n).concat(J(n,i))):n}return i||[]}function En(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?tn(fo(t,"length")):0,i=fi(0>n?0:n);++e<n;)i[e]=fo(t,e);return i}function In(t,e){var n=-1,i=t?t.length:0,o={};for(e||!i||Ji(t[0])||(e=[]);++n<i;){var r=t[n];e?o[r]=e[n]:r&&(o[r[0]]=r[1])}return o}function Tn(t,e){if(!Se(e))throw new ki;return function(){return--t<1?e.apply(this,arguments):void 0}}function $n(t,e){return arguments.length>2?se(t,17,c(arguments,2),null,e):se(t,1,null,null,e)}function An(t){for(var e=arguments.length>1?te(arguments,!0,!1,1):we(t),n=-1,i=e.length;++n<i;){var o=e[n];t[o]=se(t[o],1,null,null,t)}return t}function Wn(t,e){return arguments.length>2?se(e,19,c(arguments,2),null,t):se(e,3,null,null,t)}function Bn(){for(var t=arguments,e=t.length;e--;)if(!Se(t[e]))throw new ki;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function zn(t,e){return e="number"==typeof e?e:+e||t.length,se(t,4,null,null,null,e)}function Nn(t,e,n){var i,o,r,s,a,l,u,p=0,c=!1,h=!0;if(!Se(t))throw new ki;if(e=Ui(0,e)||0,n===!0){var f=!0;h=!1}else Le(n)&&(f=n.leading,c="maxWait"in n&&(Ui(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var g=function(){var n=e-(mo()-s);if(0>=n){o&&Li(o);var c=u;o=l=u=d,c&&(p=mo(),r=t.apply(a,i),l||o||(i=a=null))}else l=Ai(g,n)},m=function(){l&&Li(l),o=l=u=d,(h||c!==e)&&(p=mo(),r=t.apply(a,i),l||o||(i=a=null))};return function(){if(i=arguments,s=mo(),a=this,u=h&&(l||!f),c===!1)var n=f&&!l;else{o||f||(p=s);var d=c-(s-p),v=0>=d;v?(o&&(o=Li(o)),p=s,r=t.apply(a,i)):o||(o=Ai(m,d))}return v&&l?l=Li(l):l||e===c||(l=Ai(g,e)),n&&(v=!0,r=t.apply(a,i)),!v||l||o||(i=a=null),r}}function Kn(t){if(!Se(t))throw new ki;var e=c(arguments,1);return Ai(function(){t.apply(d,e)},1)}function jn(t,e){if(!Se(t))throw new ki;var n=c(arguments,2);return Ai(function(){t.apply(d,n)},e)}function Fn(t,e){if(!Se(t))throw new ki;var n=function(){var i=n.cache,o=e?e.apply(this,arguments):v+arguments[0];return Ti.call(i,o)?i[o]:i[o]=t.apply(this,arguments)};return n.cache={},n}function Rn(t){var e,n;if(!Se(t))throw new ki;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Un(t){return se(t,16,c(arguments,1))}function Vn(t){return se(t,32,null,c(arguments,1))}function Hn(t,e,n){var i=!0,o=!0;if(!Se(t))throw new ki;return n===!1?i=!1:Le(n)&&(i="leading"in n?n.leading:i,o="trailing"in n?n.trailing:o),R.leading=i,R.maxWait=e,R.trailing=o,Nn(t,e,R)}function qn(t,e){return se(e,16,[t])}function Zn(t){return function(){return t}}function Xn(t,e,n){var i=typeof t;if(null==t||"function"==i)return X(t,e,n);if("object"!=i)return ni(t);var o=to(t),r=o[0],s=t[r];return 1!=o.length||s!==s||Le(s)?function(e){for(var n=o.length,i=!1;n--&&(i=ee(e[o[n]],t[o[n]],null,!0)););return i}:function(t){var e=t[r];return s===e&&(0!==s||1/s==1/e)}}function Qn(t){return null==t?"":Mi(t).replace(oo,ae)}function Jn(t){return t}function Yn(t,e,n){var i=!0,o=e&&we(e);e&&(n||o.length)||(null==n&&(n=e),r=g,e=t,t=f,o=we(e)),n===!1?i=!1:Le(n)&&"chain"in n&&(i=n.chain);var r=t,s=Se(r);Xe(o,function(n){var o=t[n]=e[n];s&&(r.prototype[n]=function(){var e=this.__chain__,n=this.__wrapped__,s=[n];$i.apply(s,arguments);var a=o.apply(t,s);if(i||e){if(n===a&&Le(a))return this;a=new r(a),a.__chain__=e}return a})})}function ti(){return n._=Gi,this}function ei(){}function ni(t){return function(e){return e[t]}}function ii(t,e,n){var i=null==t,o=null==e;if(null==n&&("boolean"==typeof t&&o?(n=t,t=1):o||"boolean"!=typeof e||(n=e,o=!0)),i&&o&&(e=1),t=+t||0,o?(e=t,t=0):e=+e||0,n||t%1||e%1){var r=qi();return Vi(t+r*(e-t+parseFloat("1e-"+((r+"").length-1))),e)}return ie(t,e)}function oi(t,e){if(t){var n=t[e];return Se(n)?t[e]():n}}function ri(t,e,n){var i=f.templateSettings;t=Mi(t||""),n=so({},n,i);var o,r=so({},n.imports,i.imports),a=to(r),l=Fe(r),u=0,p=n.interpolate||S,c="__p += '",h=bi((n.escape||S).source+"|"+p.source+"|"+(p===P?x:S).source+"|"+(n.evaluate||S).source+"|$","g");t.replace(h,function(e,n,i,r,a,l){return i||(i=r),c+=t.slice(u,l).replace(O,s),n&&(c+="' +\n__e("+n+") +\n'"),a&&(o=!0,c+="';\n"+a+";\n__p += '"),i&&(c+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),c+="';\n";var g=n.variable,m=g;m||(g="obj",c="with ("+g+") {\n"+c+"\n}\n"),c=(o?c.replace(b,""):c).replace(M,"$1").replace(k,"$1;"),c="function("+g+") {\n"+(m?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+I++ +"]")+"\n*/";try{var y=vi(a,"return "+c+v).apply(d,l)}catch(_){throw _.source=c,_}return e?y(e):(y.source=c,y)}function si(t,e,n){t=(t=+t)>-1?t:0;var i=-1,o=fi(t);for(e=X(e,n,1);++i<t;)o[i]=e(i);return o}function ai(t){return null==t?"":Mi(t).replace(io,ce)}function li(t){var e=++m;return Mi(null==t?"":t)+e}function ui(t){return t=new g(t),t.__chain__=!0,t}function pi(t,e){return e(t),t}function ci(){return this.__chain__=!0,this}function hi(){return Mi(this.__wrapped__)}function di(){return this.__wrapped__}n=n?Y.defaults(q.Object(),n,Y.pick(q,E)):q;var fi=n.Array,gi=n.Boolean,mi=n.Date,vi=n.Function,yi=n.Math,_i=n.Number,wi=n.Object,bi=n.RegExp,Mi=n.String,ki=n.TypeError,xi=[],Ci=wi.prototype,Gi=n._,Pi=Ci.toString,Di=bi("^"+Mi(Pi).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Si=yi.ceil,Li=n.clearTimeout,Oi=yi.floor,Ei=vi.prototype.toString,Ii=ue(Ii=wi.getPrototypeOf)&&Ii,Ti=Ci.hasOwnProperty,$i=xi.push,Ai=n.setTimeout,Wi=xi.splice,Bi=xi.unshift,zi=function(){try{var t={},e=ue(e=wi.defineProperty)&&e,n=e(t,t,t)&&e}catch(i){}return n}(),Ni=ue(Ni=wi.create)&&Ni,Ki=ue(Ki=fi.isArray)&&Ki,ji=n.isFinite,Fi=n.isNaN,Ri=ue(Ri=wi.keys)&&Ri,Ui=yi.max,Vi=yi.min,Hi=n.parseInt,qi=yi.random,Zi={};Zi[$]=fi,Zi[A]=gi,Zi[W]=mi,Zi[B]=vi,Zi[N]=wi,Zi[z]=_i,Zi[K]=bi,Zi[j]=Mi,g.prototype=f.prototype;var Xi=f.support={};Xi.funcDecomp=!ue(n.WinRTError)&&L.test(h),Xi.funcNames="string"==typeof vi.name,f.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:P,variable:"",imports:{_:f}},Ni||(Z=function(){function t(){}return function(e){if(Le(e)){t.prototype=e;var i=new t;t.prototype=null}return i||n.Object()}}());var Qi=zi?function(t,e){U.value=e,zi(t,"__bindData__",U)}:ei,Ji=Ki||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Pi.call(t)==$||!1},Yi=function(t){var e,n=t,i=[];if(!n)return i;if(!V[typeof t])return i;for(e in n)Ti.call(n,e)&&i.push(e);return i},to=Ri?function(t){return Le(t)?Ri(t):[]}:Yi,eo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},no=Me(eo),io=bi("("+to(no).join("|")+")","g"),oo=bi("["+to(eo).join("")+"]","g"),ro=function(t,e,n){var i,o=t,r=o;if(!o)return r;var s=arguments,a=0,l="number"==typeof n?2:s.length;if(l>3&&"function"==typeof s[l-2])var u=X(s[--l-1],s[l--],2);else l>2&&"function"==typeof s[l-1]&&(u=s[--l]);for(;++a<l;)if(o=s[a],o&&V[typeof o])for(var p=-1,c=V[typeof o]&&to(o),h=c?c.length:0;++p<h;)i=c[p],r[i]=u?u(r[i],o[i]):o[i];return r},so=function(t,e,n){var i,o=t,r=o;if(!o)return r;for(var s=arguments,a=0,l="number"==typeof n?2:s.length;++a<l;)if(o=s[a],o&&V[typeof o])for(var u=-1,p=V[typeof o]&&to(o),c=p?p.length:0;++u<c;)i=p[u],"undefined"==typeof r[i]&&(r[i]=o[i]);return r},ao=function(t,e,n){var i,o=t,r=o;if(!o)return r;if(!V[typeof o])return r;e=e&&"undefined"==typeof n?e:X(e,n,3);for(i in o)if(e(o[i],i,t)===!1)return r;return r},lo=function(t,e,n){var i,o=t,r=o;if(!o)return r;if(!V[typeof o])return r;e=e&&"undefined"==typeof n?e:X(e,n,3);for(var s=-1,a=V[typeof o]&&to(o),l=a?a.length:0;++s<l;)if(i=a[s],e(o[i],i,t)===!1)return r;return r},uo=Ii?function(t){if(!t||Pi.call(t)!=N)return!1;var e=t.valueOf,n=ue(e)&&(n=Ii(e))&&Ii(n);return n?t==n||Ii(t)==n:pe(t)}:pe,po=re(function(t,e,n){Ti.call(t,n)?t[n]++:t[n]=1}),co=re(function(t,e,n){(Ti.call(t,n)?t[n]:t[n]=[]).push(e)}),ho=re(function(t,e,n){t[n]=e}),fo=Ye,go=He,mo=ue(mo=mi.now)&&mo||function(){return(new mi).getTime()},vo=8==Hi(w+"08")?Hi:function(t,e){return Hi($e(t)?t.replace(D,""):t,e||0)};return f.after=Tn,f.assign=ro,f.at=Re,f.bind=$n,f.bindAll=An,f.bindKey=Wn,f.chain=ui,f.compact=hn,f.compose=Bn,f.constant=Zn,f.countBy=po,f.create=ge,f.createCallback=Xn,f.curry=zn,f.debounce=Nn,f.defaults=so,f.defer=Kn,f.delay=jn,f.difference=dn,f.filter=He,f.flatten=vn,f.forEach=Xe,f.forEachRight=Qe,f.forIn=ao,f.forInRight=ye,f.forOwn=lo,f.forOwnRight=_e,f.functions=we,f.groupBy=co,f.indexBy=ho,f.initial=_n,f.intersection=wn,f.invert=Me,f.invoke=Je,f.keys=to,f.map=Ye,f.mapValues=We,f.max=tn,f.memoize=Fn,f.merge=Be,f.min=en,f.omit=ze,f.once=Rn,f.pairs=Ne,f.partial=Un,f.partialRight=Vn,f.pick=Ke,f.pluck=fo,f.property=ni,f.pull=kn,f.range=xn,f.reject=rn,f.remove=Cn,f.rest=Gn,f.shuffle=an,f.sortBy=pn,f.tap=pi,f.throttle=Hn,f.times=si,f.toArray=cn,f.transform=je,f.union=Dn,f.uniq=Sn,f.values=Fe,f.where=go,f.without=Ln,f.wrap=qn,f.xor=On,f.zip=En,f.zipObject=In,f.collect=Ye,f.drop=Gn,f.each=Xe,f.eachRight=Qe,f.extend=ro,f.methods=we,f.object=In,f.select=He,f.tail=Gn,f.unique=Sn,f.unzip=En,Yn(f),f.clone=de,f.cloneDeep=fe,f.contains=Ue,f.escape=Qn,f.every=Ve,f.find=qe,f.findIndex=fn,f.findKey=me,f.findLast=Ze,f.findLastIndex=gn,f.findLastKey=ve,f.has=be,f.identity=Jn,f.indexOf=yn,f.isArguments=he,f.isArray=Ji,f.isBoolean=ke,f.isDate=xe,f.isElement=Ce,f.isEmpty=Ge,f.isEqual=Pe,f.isFinite=De,f.isFunction=Se,f.isNaN=Oe,f.isNull=Ee,f.isNumber=Ie,f.isObject=Le,f.isPlainObject=uo,f.isRegExp=Te,f.isString=$e,f.isUndefined=Ae,f.lastIndexOf=Mn,f.mixin=Yn,f.noConflict=ti,f.noop=ei,f.now=mo,f.parseInt=vo,f.random=ii,f.reduce=nn,f.reduceRight=on,f.result=oi,f.runInContext=h,f.size=ln,f.some=un,f.sortedIndex=Pn,f.template=ri,f.unescape=ai,f.uniqueId=li,f.all=Ve,f.any=un,f.detect=qe,f.findWhere=qe,f.foldl=nn,f.foldr=on,f.include=Ue,f.inject=nn,Yn(function(){var t={};
return lo(f,function(e,n){f.prototype[n]||(t[n]=e)}),t}(),!1),f.first=mn,f.last=bn,f.sample=sn,f.take=mn,f.head=mn,lo(f,function(t,e){var n="sample"!==e;f.prototype[e]||(f.prototype[e]=function(e,i){var o=this.__chain__,r=t(this.__wrapped__,e,i);return o||null!=e&&(!i||n&&"function"==typeof e)?new g(r,o):r})}),f.VERSION="2.4.1",f.prototype.chain=ci,f.prototype.toString=hi,f.prototype.value=di,f.prototype.valueOf=di,Xe(["join","pop","shift"],function(t){var e=xi[t];f.prototype[t]=function(){var t=this.__chain__,n=e.apply(this.__wrapped__,arguments);return t?new g(n,t):n}}),Xe(["push","reverse","sort","unshift"],function(t){var e=xi[t];f.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),Xe(["concat","slice","splice"],function(t){var e=xi[t];f.prototype[t]=function(){return new g(e.apply(this.__wrapped__,arguments),this.__chain__)}}),f}var d,f=[],g=[],m=0,v=+new Date+"",y=75,_=40,w=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",b=/\b__p \+= '';/g,M=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,x=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,G=/^\s*function[ \n\r\t]+\w/,P=/<%=([\s\S]+?)%>/g,D=RegExp("^["+w+"]*0+(?=.$)"),S=/($^)/,L=/\bthis\b/,O=/['\n\r\t\u2028\u2029\\]/g,E=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],I=0,T="[object Arguments]",$="[object Array]",A="[object Boolean]",W="[object Date]",B="[object Function]",z="[object Number]",N="[object Object]",K="[object RegExp]",j="[object String]",F={};F[B]=!1,F[T]=F[$]=F[A]=F[W]=F[z]=F[N]=F[K]=F[j]=!0;var R={leading:!1,maxWait:0,trailing:!1},U={configurable:!1,enumerable:!1,value:null,writable:!1},V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},H={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},q=V[typeof window]&&window||this,Z=V[typeof exports]&&exports&&!exports.nodeType&&exports,X=V[typeof module]&&module&&!module.nodeType&&module,Q=X&&X.exports===Z&&Z,J=V[typeof global]&&global;!J||J.global!==J&&J.window!==J||(q=J);var Y=h();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(q._=Y,define(function(){return Y})):Z&&X?Q?(X.exports=Y)._=Y:Z._=Y:q._=Y}).call(this),function(t,e,n){"use strict";(function(){e.module("uiGmapgoogle-maps.providers",[]),e.module("uiGmapgoogle-maps.wrapped",[]),e.module("uiGmapgoogle-maps.extensions",["uiGmapgoogle-maps.wrapped","uiGmapgoogle-maps.providers"]),e.module("uiGmapgoogle-maps.directives.api.utils",["uiGmapgoogle-maps.extensions"]),e.module("uiGmapgoogle-maps.directives.api.managers",[]),e.module("uiGmapgoogle-maps.directives.api.options",["uiGmapgoogle-maps.directives.api.utils"]),e.module("uiGmapgoogle-maps.directives.api.options.builders",[]),e.module("uiGmapgoogle-maps.directives.api.models.child",["uiGmapgoogle-maps.directives.api.utils","uiGmapgoogle-maps.directives.api.options","uiGmapgoogle-maps.directives.api.options.builders"]),e.module("uiGmapgoogle-maps.directives.api.models.parent",["uiGmapgoogle-maps.directives.api.managers","uiGmapgoogle-maps.directives.api.models.child","uiGmapgoogle-maps.providers"]),e.module("uiGmapgoogle-maps.directives.api",["uiGmapgoogle-maps.directives.api.models.parent"]),e.module("uiGmapgoogle-maps",["uiGmapgoogle-maps.directives.api","uiGmapgoogle-maps.providers"]).factory("uiGmapdebounce",["$timeout",function(t){return function(e){var n;return n=0,function(){var i,o,r;return r=this,i=arguments,n++,o=function(t){return function(){return t===n?e.apply(r,i):void 0}}(n),t(o,0,!0)}}}])}).call(this),function(){e.module("uiGmapgoogle-maps.providers").factory("uiGmapMapScriptLoader",["$q","uiGmapuuid",function(n,i){var o,r;return r=void 0,o=function(t){return t.china?"http://maps.google.cn/maps/api/js?":"https://maps.googleapis.com/maps/api/js?"},{load:function(s){var a,l,u,p;return a=n.defer(),e.isDefined(t.google)&&e.isDefined(t.google.maps)?(a.resolve(t.google.maps),a.promise):(u=s.callback="onGoogleMapsReady"+Math.round(1e3*Math.random()),t[u]=function(){t[u]=null,a.resolve(t.google.maps)},l=_.map(s,function(t,e){return e+"="+t}),r&&document.getElementById(r).remove(),l=l.join("&"),p=document.createElement("script"),r="ui_gmap_map_load_"+i.generate(),p.id=r,p.type="text/javascript",p.src=o(s)+l,document.body.appendChild(p),a.promise)}}}]).provider("uiGmapGoogleMapApi",function(){return this.options={china:!1,v:"3.17",libraries:"",language:"en",sensor:"false"},this.configure=function(t){e.extend(this.options,t)},this.$get=["uiGmapMapScriptLoader",function(t){return function(e){return e.load(t.options)}}(this)],this})}.call(this),function(){e.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendGWin",function(){return{init:_.once(function(){return google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow?(google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(t,e,n){null==n&&(this._isOpen=!0,this._open(t,e,!0))},google.maps.InfoWindow.prototype.close=function(t){null==t&&(this._isOpen=!1,this._close(!0))},google.maps.InfoWindow.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},t.InfoBox&&(t.InfoBox.prototype._open=t.InfoBox.prototype.open,t.InfoBox.prototype._close=t.InfoBox.prototype.close,t.InfoBox.prototype._isOpen=!1,t.InfoBox.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},t.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},t.InfoBox.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t}),t.MarkerLabel_?(t.MarkerLabel_.prototype.setContent=function(){var t;t=this.marker_.get("labelContent"),t&&!_.isEqual(this.oldContent,t)&&("undefined"==typeof(null!=t?t.nodeType:void 0)?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML,this.oldContent=t):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.appendChild(t),this.oldContent=t))},t.MarkerLabel_.prototype.onRemove=function(){null!=this.labelDiv_.parentNode&&this.labelDiv_.parentNode.removeChild(this.labelDiv_),null!=this.eventDiv_.parentNode&&this.eventDiv_.parentNode.removeChild(this.eventDiv_),this.listeners_&&this.listeners_.length&&this.listeners_.forEach(function(t){return google.maps.event.removeListener(t)})}):void 0):void 0})}})}.call(this),function(){e.module("uiGmapgoogle-maps.extensions").service("uiGmapLodash",function(){return this.intersectionObjects=function(t,e,n){var i;return null==n&&(n=void 0),i=_.map(t,function(){return function(t){return _.find(e,function(e){return null!=n?n(t,e):_.isEqual(t,e)})}}(this)),_.filter(i,function(t){return null!=t})},this.containsObject=_.includeObject=function(t,e,n){return null==n&&(n=void 0),null===t?!1:_.any(t,function(){return function(t){return null!=n?n(t,e):_.isEqual(t,e)}}(this))},this.differenceObjects=function(t,e,n){return null==n&&(n=void 0),_.filter(t,function(t){return function(i){return!t.containsObject(e,i,n)}}(this))},this.withoutObjects=this.differenceObjects,this.indexOfObject=function(t,e,n,i){var o,r;if(null==t)return-1;if(o=0,r=t.length,i){if("number"!=typeof i)return o=_.sortedIndex(t,e),t[o]===e?o:-1;o=0>i?Math.max(0,r+i):i}for(;r>o;){if(null!=n){if(n(t[o],e))return o}else if(_.isEqual(t[o],e))return o;o++}return-1},this["extends"]=function(t){return _.reduce(t,function(t,e){return _.extend(t,e)},{})},this.isNullOrUndefined=function(t){return _.isNull(t||_.isUndefined(t))},this})}.call(this),function(){e.module("uiGmapgoogle-maps.extensions").factory("uiGmapString",function(){return function(t){return this.contains=function(e,n){return-1!==t.indexOf(e,n)},this}})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmap_sync",[function(){return{fakePromise:function(){var t;return t=void 0,{then:function(e){return t=e},resolve:function(){return t.apply(void 0,arguments)}}}}}]).service("uiGmap_async",["$timeout","uiGmapPromise","uiGmapLogger","$q","uiGmapDataStructures","uiGmapGmapUtil",function(t,e,n,i,o,r){var s,a,l,u,p,c,h,d,f,g,m,v,y,w,b,M,k;return M=e.promiseTypes,f=e.isInProgress,b=e.promiseStatus,s=e.ExposedPromise,l=e.SniffedPromise,g=function(t,e){var i;return i=t.promise(),i.promiseType=t.promiseType,i.$$state&&n.debug("promiseType: "+i.promiseType+", state: "+b(i.$$state.status)),i.cancelCb=e,i},c=function(t,e){return t.promiseType===M.create&&e.promiseType!==M["delete"]&&e.promiseType!==M.init?(n.debug("lastPromise.promiseType "+e.promiseType+", newPromiseType: "+t.promiseType+", SKIPPED MUST COME AFTER DELETE ONLY"),!0):!1},w=function(t,e,i){var o;return e.promiseType===M["delete"]&&i.promiseType!==M["delete"]&&null!=i.cancelCb&&_.isFunction(i.cancelCb)&&f(i)&&(n.debug("promiseType: "+e.promiseType+", CANCELING LAST PROMISE type: "+i.promiseType),i.cancelCb("cancel safe"),o=t.peek(),null!=o&&f(o))?o.hasOwnProperty("cancelCb")&&_.isFunction(o.cancelCb)?(n.debug("promiseType: "+o.promiseType+", CANCELING FIRST PROMISE type: "+o.promiseType),o.cancelCb("cancel safe")):n.warn("first promise was not cancelable"):void 0},a=function(t,e,n){var i,r;if(t.existingPieces){if(i=_.last(t.existingPieces._content),c(e,i))return;return w(t.existingPieces,e,i),r=s(i["finally"](function(){return g(e,n)})),r.cancelCb=n,r.promiseType=e.promiseType,t.existingPieces.enqueue(r),i["finally"](function(){return t.existingPieces.dequeue()})}return t.existingPieces=new o.Queue,t.existingPieces.enqueue(g(e,n))},v=function(t,e,i,o,r){var s;return null==i&&(i=""),s=function(t){return n.debug(""+t+": "+t),o(t)},a(t,l(r,e),s)},u=80,d={value:null},k=function(t,e,n){var i;try{return t.apply(e,n)}catch(o){return i=o,d.value=i,d}},m=function(t,e,i,o){var r,s;return s=k(t,e,o),s===d&&(r="error within chunking iterator: "+d.value,n.error(r),i.reject(r)),"cancel safe"===s?!1:!0},p=function(e,n,i,o,r,s,a){var l,u,c;for(l=n&&n<e.length?n:e.length,u=a,c=!0;c&&l--&&u<(e?e.length:u+1);)c=m(o,void 0,s,[e[u],u]),++u;if(e){if(!(c&&u<e.length))return s.resolve();if(a=u,n)return null!=r&&_.isFunction(r)&&m(r,void 0,s,[]),t(function(){return p(e,n,i,o,r,s,a)},i,!1)}},h=function(t,i,o,r,s,a){var l,c,h;return null==o&&(o=u),null==s&&(s=0),null==a&&(a=1),h=void 0,c=e.defer(),h=c.promise,a?void 0===t||(null!=t?t.length:void 0)<=0?(c.resolve(),h):(p(t,o,a,i,r,c,s),h):(l="pause (delay) must be set from _async!",n.error(l),c.reject(l),h)},y=function(t,n,i,o,r,s){var a;return a=[],null!=t&&(null!=t?t.length:void 0)>0?h(t,function(t){return a.push(n(t))},i,o,r,s).then(function(){return a}):e.resolve(a)},{each:h,map:y,managePromiseQueue:v,promiseLock:v,defaultChunkSize:u,chunkSizeFrom:function(t){var e;return e=void 0,_.isNumber(t)&&(e=t),(r.isFalse(t)||t===!1)&&(e=!1),e}}}])}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapBaseObject",function(){var e,n;return n=["extended","included"],e=function(){function e(){}return e.extend=function(e){var i,o,r;for(i in e)o=e[i],t.call(n,i)<0&&(this[i]=o);return null!=(r=e.extended)&&r.apply(this),this},e.include=function(e){var i,o,r;for(i in e)o=e[i],t.call(n,i)<0&&(this.prototype[i]=o);return null!=(r=e.included)&&r.apply(this),this},e}()})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChildEvents",function(){return{onChildCreation:function(){}}})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapCtrlHandle",["$q",function(t){var e;return e={handle:function(n){return n.$on("$destroy",function(){return e.handle(n)}),n.deferred=t.defer(),{getScope:function(){return n}}},mapPromise:function(t,e){var n;return n=e.getScope(),n.deferred.promise.then(function(e){return t.map=e}),n.deferred.promise}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapEventsHelper",["uiGmapLogger",function(){return{setEvents:function(t,n,i,o){return e.isDefined(n.events)&&null!=n.events&&e.isObject(n.events)?_.compact(_.map(n.events,function(r,s){var a;return o&&(a=_(o).contains(s)),n.events.hasOwnProperty(s)&&e.isFunction(n.events[s])&&!a?google.maps.event.addListener(t,s,function(){return n.$evalAsync||(n.$evalAsync=function(){}),n.$evalAsync(r.apply(n,[t,s,i,arguments]))}):void 0})):void 0},removeEvents:function(t){return t?t.forEach(function(t){return t?google.maps.event.removeListener(t):void 0}):void 0}}}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapFitHelper",["uiGmapBaseObject","uiGmapLogger","uiGmap_async",function(t,e,i){var o;return o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.fit=function(t,e){var n,o;return e&&t&&t.length>0?(n=new google.maps.LatLngBounds,o=!1,i.each(t,function(){return function(t){return t?(o||(o=!0),n.extend(t.getPosition())):void 0}}(this)).then(function(){return o?e.fitBounds(n):void 0})):void 0},e}(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapGmapUtil",["uiGmapLogger","$compile",function(t,n){var i,o,r,s;return o=function(t){return Array.isArray(t)&&2===t.length?t[1]:e.isDefined(t.type)&&"Point"===t.type?t.coordinates[1]:t.latitude},r=function(t){return Array.isArray(t)&&2===t.length?t[0]:e.isDefined(t.type)&&"Point"===t.type?t.coordinates[0]:t.longitude},i=function(t){return t?Array.isArray(t)&&2===t.length?new google.maps.LatLng(t[1],t[0]):e.isDefined(t.type)&&"Point"===t.type?new google.maps.LatLng(t.coordinates[1],t.coordinates[0]):new google.maps.LatLng(t.latitude,t.longitude):void 0},s=function(t){if(e.isUndefined(t))return!1;if(_.isArray(t)){if(2===t.length)return!0}else if(null!=t&&(null!=t?t.type:void 0)&&"Point"===t.type&&_.isArray(t.coordinates)&&2===t.coordinates.length)return!0;return t&&e.isDefined((null!=t?t.latitude:void 0)&&e.isDefined(null!=t?t.longitude:void 0))?!0:!1},{setCoordsFromEvent:function(t,n){return t?(Array.isArray(t)&&2===t.length?(t[1]=n.lat(),t[0]=n.lng()):e.isDefined(t.type)&&"Point"===t.type?(t.coordinates[1]=n.lat(),t.coordinates[0]=n.lng()):(t.latitude=n.lat(),t.longitude=n.lng()),t):void 0},getLabelPositionPoint:function(t){var e,n;return void 0===t?void 0:(t=/^([-\d\.]+)\s([-\d\.]+)$/.exec(t),e=parseFloat(t[1]),n=parseFloat(t[2]),null!=e&&null!=n?new google.maps.Point(e,n):void 0)},createWindowOptions:function(o,r,s,a){var l;return null!=s&&null!=a&&null!=n?(l=e.extend({},a,{content:this.buildContent(r,a,s),position:null!=a.position?a.position:e.isObject(o)?o.getPosition():i(r.coords)}),null!=o&&null==(null!=l?l.pixelOffset:void 0)&&(null==l.boxClass||(l.pixelOffset={height:0,width:-2})),l):a?a:(t.error("infoWindow defaults not defined"),s?void 0:t.error("infoWindow content not defined"))},buildContent:function(t,e,i){var o,r;return null!=e.content?r=e.content:null!=n?(i=i.replace(/^\s+|\s+$/g,""),o=""===i?"":n(i)(t),o.length>0&&(r=o[0])):r=i,r},defaultDelay:50,isTrue:function(t){return e.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},isFalse:function(t){return-1!==["false","FALSE",0,"n","N","no","NO"].indexOf(t)},getCoords:i,validateCoords:s,equalCoords:function(t,e){return o(t)===o(e)&&r(t)===r(e)},validatePath:function(t){var n,i,o,r;if(i=0,e.isUndefined(t.type)){if(!Array.isArray(t)||t.length<2)return!1;for(;i<t.length;){if(!(e.isDefined(t[i].latitude)&&e.isDefined(t[i].longitude)||"function"==typeof t[i].lat&&"function"==typeof t[i].lng))return!1;i++}return!0}if(e.isUndefined(t.coordinates))return!1;if("Polygon"===t.type){if(t.coordinates[0].length<4)return!1;n=t.coordinates[0]}else if("MultiPolygon"===t.type){if(r={max:0,index:0},_.forEach(t.coordinates,function(t,e){return t[0].length>this.max?(this.max=t[0].length,this.index=e):void 0},r),o=t.coordinates[r.index],n=o[0],n.length<4)return!1}else{if("LineString"!==t.type)return!1;if(t.coordinates.length<2)return!1;n=t.coordinates}for(;i<n.length;){if(2!==n[i].length)return!1;i++}return!0},convertPathPoints:function(t){var n,i,o,r,s;if(i=0,r=new google.maps.MVCArray,e.isUndefined(t.type))for(;i<t.length;)e.isDefined(t[i].latitude)&&e.isDefined(t[i].longitude)?o=new google.maps.LatLng(t[i].latitude,t[i].longitude):"function"==typeof t[i].lat&&"function"==typeof t[i].lng&&(o=t[i]),r.push(o),i++;else for("Polygon"===t.type?n=t.coordinates[0]:"MultiPolygon"===t.type?(s={max:0,index:0},_.forEach(t.coordinates,function(t,e){return t[0].length>this.max?(this.max=t[0].length,this.index=e):void 0},s),n=t.coordinates[s.index][0]):"LineString"===t.type&&(n=t.coordinates);i<n.length;)r.push(new google.maps.LatLng(n[i][1],n[i][0])),i++;return r},extendMapBounds:function(t,e){var n,i;for(n=new google.maps.LatLngBounds,i=0;i<e.length;)n.extend(e.getAt(i)),i++;return t.fitBounds(n)},getPath:function(t,e){var n;return n=t,_.each(e.split("."),function(t){return n?n=n[t]:void 0}),n},validateBoundPoints:function(t){return e.isUndefined(t.sw.latitude)||e.isUndefined(t.sw.longitude)||e.isUndefined(t.ne.latitude)||e.isUndefined(t.ne.longitude)?!1:!0},convertBoundPoints:function(t){var e;return e=new google.maps.LatLngBounds(new google.maps.LatLng(t.sw.latitude,t.sw.longitude),new google.maps.LatLng(t.ne.latitude,t.ne.longitude))},fitMapBounds:function(t,e){return t.fitBounds(e)}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapIsReady",["$q","$timeout",function(t,e){var n,i,o;return n=0,o=[],i=function(){return t.all(o)},{spawn:function(){var e;return e=t.defer(),o.push(e.promise),n+=1,{instance:n,deferred:e}},promises:i,instances:function(){return n},promise:function(o){var r,s;return null==o&&(o=1),r=t.defer(),s=function(){return e(function(){return n!==o?s():r.resolve(i())})},s(),r.promise},reset:function(){return n=0,o.length=0}}}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapLinked",["uiGmapBaseObject",function(t){var e;return e=function(t){function e(t,e,n,i){this.scope=t,this.element=e,this.attrs=n,this.ctrls=i}return n(e,t),e}(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapLogger",["$log",function(t){var e,n,i,o;return this.doLog=!0,e={log:1,info:2,debug:3,warn:4,error:5,none:6},o=function(t,e,n){return t>=e?n():void 0},n=function(e,n){return null!=t?t[e](n):console[e](n)},i={},["log","info","debug","warn","error"].forEach(function(t){return function(r){return i[r]=function(i){return t.doLog?o(e[r],t.currentLevel,function(){return n(r,i)}):void 0}}}(this)),this.LEVELS=e,this.currentLevel=e.error,this.log=i.log,this.info=i.info,this.debug=i.debug,this.warn=i.warn,this.error=i.error,this}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelKey",["uiGmapBaseObject","uiGmapGmapUtil","uiGmapPromise","$q","$timeout",function(e,n){var o;return o=function(e){function o(e){this.scope=e,this.destroy=t(this.destroy,this),this.setChildScope=t(this.setChildScope,this),this.getChanges=t(this.getChanges,this),this.getProp=t(this.getProp,this),this.setIdKey=t(this.setIdKey,this),this.modelKeyComparison=t(this.modelKeyComparison,this),o.__super__.constructor.call(this),this.defaultIdKey="id",this.idKey=void 0}return i(o,e),o.prototype.evalModelHandle=function(t,e){return void 0===t||void 0===e?void 0:"self"===e?t:n.getPath(t,e)},o.prototype.modelKeyComparison=function(t,e){var i;if(i=null!=this.scope.coords?this.scope:this.parentScope,null==i)throw"No scope or parentScope set!";return n.equalCoords(this.evalModelHandle(t,i.coords),this.evalModelHandle(e,i.coords))},o.prototype.setIdKey=function(t){return this.idKey=null!=t.idKey?t.idKey:this.defaultIdKey},o.prototype.setVal=function(t,e,n){var i;return i=this.modelOrKey(t,e),i=n,t},o.prototype.modelOrKey=function(t,e){return null!=e?"self"!==e?t[e]:t:void 0},o.prototype.getProp=function(t,e){return this.modelOrKey(e,t)},o.prototype.getChanges=function(t,e,n){var i,o,r;n&&(e=_.pick(e,n),t=_.pick(t,n)),o={},r={},i={};for(r in t)e&&e[r]===t[r]||(_.isArray(t[r])?o[r]=t[r]:_.isObject(t[r])?(i=this.getChanges(t[r],e?e[r]:null),_.isEmpty(i)||(o[r]=i)):o[r]=t[r]);return o},o.prototype.scopeOrModelVal=function(t,e,n,i){var o,r,s,a;return null==i&&(i=!1),o=function(t,e,n){return null==n&&(n=!1),n?{isScope:t,value:e}:e},a=e[t],_.isFunction(a)?o(!0,a(n),i):_.isObject(a)?o(!0,a,i):_.isString(a)?(r=a,s=r?"self"===r?n:n[r]:n[t],_.isFunction(s)?o(!1,s(),i):o(!1,s,i)):o(!0,a,i)},o.prototype.setChildScope=function(t,e,n){return _.each(t,function(t){return function(i){var o,r;return o=t.scopeOrModelVal(i,e,n,!0),o.isScope||(r=o.value,r===e[i])?void 0:e[i]=r}}(this)),e.model=n},o.prototype.destroy=function(t){var e;return null==t&&(t=!1),null==this.scope||(null!=(e=this.scope)?e.$$destroyed:void 0)||!this.needToManualDestroy&&!t?this.clean():this.scope.$destroy()},o}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelsWatcher",["uiGmapLogger","uiGmap_async","$q","uiGmapPromise",function(t,e,n,i){return{didQueueInitPromise:function(t,n){return 0===n.models.length?(e.promiseLock(t,i.promiseTypes.init,null,null,function(){return function(){return i.resolve()}}(this)),!0):!1},figureOutState:function(e,n,i,o){var r,s,a,l,u;return r=[],a={},l=[],u=[],n.models.forEach(function(n){var s;return null==n[e]?t.error(" id missing for model #{m.toString()},\ncan not use do comparison/insertion"):(a[n[e]]={},null==i.get(n[e])?r.push(n):(s=i.get(n[e]),o(n,s.clonedModel)?void 0:u.push({model:n,child:s})))}),s=i.values(),s.forEach(function(n){var i;return null==n?void t.error("child undefined in ModelsWatcher."):null==n.model?void t.error("child.model undefined in ModelsWatcher."):(i=n.model[e],null==a[i]?l.push(n):void 0)}),{adds:r,removals:l,updates:u}}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapPromise",["$q","$timeout","uiGmapLogger",function(t,e,n){var i,o,r,s,a,l,u,p,c,h,d;return c={create:"create",update:"update","delete":"delete",init:"init"},p={IN_PROGRESS:0,RESOLVED:1,REJECTED:2},d=function(){var t;return t={},t[""+p.IN_PROGRESS]="in-progress",t[""+p.RESOLVED]="resolved",t[""+p.REJECTED]="rejected",t}(),s=function(t){return t.$$state?t.$$state.status===p.IN_PROGRESS:t.hasOwnProperty("$$v")?void 0:!0},a=function(t){return t.$$state?t.$$state.status===p.RESOLVED:t.hasOwnProperty("$$v")?!0:void 0},u=function(t){return d[t]||"done w error"},i=function(e){var n,i,o;return n=t.defer(),i=t.all([e,n.promise]),o=t.defer(),e.then(n.resolve,function(){},function(t){return n.notify(t),o.notify(t)}),i.then(function(t){return o.resolve(t[0]||t[1])},function(t){return o.reject(t)}),o.promise.cancel=function(t){return null==t&&(t="canceled"),n.reject(t)},o.promise.notify=function(t){return null==t&&(t="cancel safe"),o.notify(t),e.hasOwnProperty("notify")?e.notify(t):void 0},null!=e.promiseType&&(o.promise.promiseType=e.promiseType),o.promise},o=function(t,e){return{promise:t,promiseType:e}},r=function(){return t.defer()},h=function(){var e;return e=t.defer(),e.resolve.apply(void 0,arguments),e.promise},l=function(i){var o;return _.isFunction(i)?(o=t.defer(),e(function(){var t;return t=i(),o.resolve(t)}),o.promise):void n.error("uiGmapPromise.promise() only accepts functions")},{defer:r,promise:l,resolve:h,promiseTypes:c,isInProgress:s,isResolved:a,promiseStatus:u,ExposedPromise:i,SniffedPromise:o}}])}.call(this),function(){var n,i=function(t,e){return function(){return t.apply(e,arguments)}};n=["get","put","remove","values","keys","length","push","didValueStateChange","didKeyStateChange","slice","removeAll","allVals","allKeys","stateChanged"],t.PropMap=function(){function t(){this.removeAll=i(this.removeAll,this),this.slice=i(this.slice,this),this.push=i(this.push,this),this.keys=i(this.keys,this),this.values=i(this.values,this),this.remove=i(this.remove,this),this.put=i(this.put,this),this.stateChanged=i(this.stateChanged,this),this.get=i(this.get,this),this.length=0,this.dict={},this.didValsStateChange=!1,this.didKeysStateChange=!1,this.allVals=[],this.allKeys=[]}return t.prototype.get=function(t){return this.dict[t]},t.prototype.stateChanged=function(){return this.didValsStateChange=!0,this.didKeysStateChange=!0},t.prototype.put=function(t,e){return null==this.get(t)&&this.length++,this.stateChanged(),this.dict[t]=e},t.prototype.remove=function(t,e){var n;return null==e&&(e=!1),e&&!this.get(t)?void 0:(n=this.dict[t],delete this.dict[t],this.length--,this.stateChanged(),n)},t.prototype.valuesOrKeys=function(t){var e,n;return null==t&&(t="Keys"),this["did"+t+"StateChange"]?(n=[],e=[],_.each(this.dict,function(t,i){return n.push(t),e.push(i)}),this.didKeysStateChange=!1,this.didValsStateChange=!1,this.allVals=n,this.allKeys=e,this["all"+t]):this["all"+t]},t.prototype.values=function(){return this.valuesOrKeys("Vals")},t.prototype.keys=function(){return this.valuesOrKeys()},t.prototype.push=function(t,e){return null==e&&(e="key"),this.put(t[e],t)},t.prototype.slice=function(){return this.keys().map(function(t){return function(e){return t.remove(e)}}(this))},t.prototype.removeAll=function(){return this.slice()},t.prototype.each=function(t){return _.each(this.dict,function(e){return t(e)})},t.prototype.map=function(t){return _.map(this.dict,function(e){return t(e)})},t}(),e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropMap",function(){return t.PropMap})}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropertyAction",["uiGmapLogger",function(){var t;return t=function(t){return this.setIfChange=function(e,n){var i;return i=this.exp,_.isEqual(n,e)?void 0:t(i,e)},this.sic=this.setIfChange,this}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapClustererMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap",function(n,o,r){var s;return s=function(o){function s(e,i,o,a){null==i&&(i={}),this.opt_options=null!=o?o:{},this.opt_events=a,this.checkSync=t(this.checkSync,this),this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.destroy=t(this.destroy,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),s.__super__.constructor.call(this),this.type=s.type,this.clusterer=new NgMapMarkerClusterer(e,i,this.opt_options),this.propMapGMarkers=new r,this.attachEvents(this.opt_events,"opt_events"),this.clusterer.setIgnoreHidden(!0),this.noDrawOnSingleAddRemoves=!0,n.info(this)}return i(s,o),s.type="ClustererMarkerManager",s.prototype.checkKey=function(t){var e;return null==t.key?(e="gMarker.key undefined and it is REQUIRED!!",Logger.error(e)):void 0},s.prototype.add=function(t){return this.checkKey(t),this.clusterer.addMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(t.key,t),this.checkSync()},s.prototype.update=function(t){return this.remove(t),this.add(t)},s.prototype.addMany=function(t){return t.forEach(function(t){return function(e){return t.add(e)}}(this))},s.prototype.remove=function(t){var e;return this.checkKey(t),e=this.propMapGMarkers.get(t.key),e&&(this.clusterer.removeMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(t.key)),this.checkSync()},s.prototype.removeMany=function(t){return t.forEach(function(t){return function(e){return t.remove(e)}}(this))},s.prototype.draw=function(){return this.clusterer.repaint()},s.prototype.clear=function(){return this.removeMany(this.getGMarkers()),this.clusterer.repaint()},s.prototype.attachEvents=function(t,i){var o,r,s;if(e.isDefined(t)&&null!=t&&e.isObject(t)){s=[];for(r in t)o=t[r],t.hasOwnProperty(r)&&e.isFunction(t[r])?(n.info(""+i+": Attaching event: "+r+" to clusterer"),s.push(google.maps.event.addListener(this.clusterer,r,t[r]))):s.push(void 0);return s}},s.prototype.clearEvents=function(t){var i,o,r;if(e.isDefined(t)&&null!=t&&e.isObject(t)){r=[];for(o in t)i=t[o],t.hasOwnProperty(o)&&e.isFunction(t[o])?(n.info(""+optionsName+": Clearing event: "+o+" to clusterer"),r.push(google.maps.event.clearListeners(this.clusterer,o))):r.push(void 0);return r}},s.prototype.destroy=function(){return this.clearEvents(this.opt_events),this.clearEvents(this.opt_internal_events),this.clear()},s.prototype.fit=function(){return s.__super__.fit.call(this,this.getGMarkers(),this.clusterer.getMap())},s.prototype.getGMarkers=function(){return this.clusterer.getMarkers().values()},s.prototype.checkSync=function(){},s}(o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap",function(e,n,o){var r;return r=function(r){function s(n){this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.handleOptDraw=t(this.handleOptDraw,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),s.__super__.constructor.call(this),this.type=s.type,this.gMap=n,this.gMarkers=new o,this.$log=e,this.$log.info(this)}return i(s,r),s.include(n),s.type="MarkerManager",s.prototype.add=function(t,n){var i,o;if(null==n&&(n=!0),null==t.key)throw o="gMarker.key undefined and it is REQUIRED!!",e.error(o),o;return i=this.gMarkers.get(t.key),i?void 0:(this.handleOptDraw(t,n,!0),this.gMarkers.put(t.key,t))},s.prototype.update=function(t,e){return null==e&&(e=!0),this.remove(t,e),this.add(t,e)},s.prototype.addMany=function(t){return t.forEach(function(t){return function(e){return t.add(e)}}(this))},s.prototype.remove=function(t,e){return null==e&&(e=!0),this.handleOptDraw(t,e,!1),this.gMarkers.get(t.key)?this.gMarkers.remove(t.key):void 0},s.prototype.removeMany=function(t){return t.forEach(function(t){return function(e){return t.remove(e)}}(this))},s.prototype.draw=function(){var t;return t=[],this.gMarkers.each(function(e){return function(n){return n.isDrawn?void 0:n.doAdd?(n.setMap(e.gMap),n.isDrawn=!0):t.push(n)}}(this)),t.forEach(function(t){return function(e){return e.isDrawn=!1,t.remove(e,!0)}}(this))},s.prototype.clear=function(){return this.gMarkers.each(function(t){return t.setMap(null)}),delete this.gMarkers,this.gMarkers=new o},s.prototype.handleOptDraw=function(t,e,n){return e===!0?(t.setMap(n?this.gMap:null),t.isDrawn=!0):(t.isDrawn=!1,t.doAdd=n)},s.prototype.fit=function(){return s.__super__.fit.call(this,this.getGMarkers(),this.gMap)},s.prototype.getGMarkers=function(){return this.gMarkers.values()
},s}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps").factory("uiGmapadd-events",["$timeout",function(t){var n,i;return n=function(e,n,i){return google.maps.event.addListener(e,n,function(){return i.apply(this,arguments),t(function(){},!0)})},i=function(t,i,o){var r;return o?n(t,i,o):(r=[],e.forEach(i,function(e,i){return r.push(n(t,i,e))}),function(){return e.forEach(r,function(t){return google.maps.event.removeListener(t)}),r=null})}}])}.call(this),function(){e.module("uiGmapgoogle-maps").factory("uiGmaparray-sync",["uiGmapadd-events",function(t){return function(n,i,o,r){var s,a,l,u,p,c,h,d,f;return u=!1,d=i.$eval(o),i["static"]||(p={set_at:function(t){var e;if(!u&&(e=n.getAt(t)))return e.lng&&e.lat?(d[t].latitude=e.lat(),d[t].longitude=e.lng()):d[t]=e},insert_at:function(t){var e;if(!u&&(e=n.getAt(t)))return e.lng&&e.lat?d.splice(t,0,{latitude:e.lat(),longitude:e.lng()}):d.splice(t,0,e)},remove_at:function(t){return u?void 0:d.splice(t,1)}},"Polygon"===d.type?s=d.coordinates[0]:"LineString"===d.type&&(s=d.coordinates),a={set_at:function(t){var e;if(!u&&(e=n.getAt(t),e&&e.lng&&e.lat))return s[t][1]=e.lat(),s[t][0]=e.lng()},insert_at:function(t){var e;if(!u&&(e=n.getAt(t),e&&e.lng&&e.lat))return s.splice(t,0,[e.lng(),e.lat()])},remove_at:function(t){return u?void 0:s.splice(t,1)}},h=t(n,e.isUndefined(d.type)?p:a)),c=function(t){var e,i,o,s,a,l,p,c;if(u=!0,l=n,e=!1,t){for(i=0,p=l.getLength(),s=t.length,o=Math.min(p,s),a=void 0;o>i;)c=l.getAt(i),a=t[i],"function"==typeof a.equals?a.equals(c)||(l.setAt(i,a),e=!0):(c.lat()!==a.latitude||c.lng()!==a.longitude)&&(l.setAt(i,new google.maps.LatLng(a.latitude,a.longitude)),e=!0),i++;for(;s>i;)a=t[i],l.push("function"==typeof a.lat&&"function"==typeof a.lng?a:new google.maps.LatLng(a.latitude,a.longitude)),e=!0,i++;for(;p>i;)l.pop(),e=!0,i++}return u=!1,e?r(l):void 0},l=function(t){var e,i,o,s,a,l,p,c,h;if(u=!0,p=n,i=!1,t){for("Polygon"===d.type?e=t.coordinates[0]:"LineString"===d.type&&(e=t.coordinates),o=0,c=p.getLength(),a=e.length,s=Math.min(c,a),l=void 0;s>o;)h=p.getAt(o),l=e[o],(h.lat()!==l[1]||h.lng()!==l[0])&&(p.setAt(o,new google.maps.LatLng(l[1],l[0])),i=!0),o++;for(;a>o;)l=e[o],p.push(new google.maps.LatLng(l[1],l[0])),i=!0,o++;for(;c>o;)p.pop(),i=!0,o++}return u=!1,i?r(p):void 0},i["static"]||(f=e.isUndefined(d.type)?i.$watchCollection(o,c):i.$watch(o,l,!0)),function(){return h&&(h(),h=null),f?(f(),f=null):void 0}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChromeFixes",["$timeout",function(t){return{maybeRepaint:function(e){return e?(e.style.opacity=.9,t(function(){return e.style.opacity=1})):void 0}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.options.builders").service("uiGmapCommonOptionsBuilder",["uiGmapBaseObject","uiGmapLogger","uiGmapModelKey",function(n,o,r){var s;return s=function(n){function r(){this.watchProps=t(this.watchProps,this),this.buildOpts=t(this.buildOpts,this),this.hasModel=_(this.scope).chain().keys().contains("model").value()}return i(r,n),r.prototype.props=["clickable","draggable","editable","visible",{prop:"stroke",isColl:!0}],r.prototype.buildOpts=function(t,n){var i,r,s;return null==t&&(t={}),null==n&&(n={}),this.scope?this.map?(i=this.hasModel?this.scope.model:this.scope,s=this.scopeOrModelVal("stroke",this.scope,i),r=e.extend(t,this.DEFAULTS,{map:this.map,strokeColor:null!=s?s.color:void 0,strokeOpacity:null!=s?s.opacity:void 0,strokeWeight:null!=s?s.weight:void 0}),e.forEach(e.extend(n,{clickable:!0,draggable:!1,editable:!1,"static":!1,fit:!1,visible:!0,zIndex:0,icons:[]}),function(t){return function(n,o){var s;return s=t.scopeOrModelVal(o,t.scope,i),r[o]=e.isUndefined(s)?n:i[o]}}(this)),r["static"]&&(r.editable=!1),r):void o.error("this.map not defined in CommonOptionsBuilder can not buildOpts"):void o.error("this.scope not defined in CommonOptionsBuilder can not buildOpts")},r.prototype.watchProps=function(t){return null==t&&(t=this.props),t.forEach(function(t){return function(e){return null!=t.attrs[e]||null!=t.attrs[null!=e?e.prop:void 0]?(null!=e?e.isColl:void 0)?t.scope.$watchCollection(e.prop,t.setMyOptions):t.scope.$watch(e,t.setMyOptions):void 0}}(this))},r}(r)}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api.options.builders").factory("uiGmapPolylineOptionsBuilder",["uiGmapCommonOptionsBuilder",function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.buildOpts=function(t){return e.__super__.buildOpts.call(this,{path:t},{geodesic:!1})},e}(t)}]).factory("uiGmapShapeOptionsBuilder",["uiGmapCommonOptionsBuilder",function(t){var i;return i=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.buildOpts=function(t,n){var o,r;return r=this.hasModel?this.scope.model:this.scope,o=this.scopeOrModelVal("fill",this.scope,r),t=e.extend(t,{fillColor:null!=o?o.color:void 0,fillOpacity:null!=o?o.opacity:void 0}),i.__super__.buildOpts.call(this,t,n)},i}(t)}]).factory("uiGmapPolygonOptionsBuilder",["uiGmapShapeOptionsBuilder",function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.buildOpts=function(t){return e.__super__.buildOpts.call(this,{path:t},{geodesic:!1})},e}(t)}]).factory("uiGmapRectangleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.buildOpts=function(t){return e.__super__.buildOpts.call(this,{bounds:t})},e}(t)}]).factory("uiGmapCircleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.buildOpts=function(t,n){return e.__super__.buildOpts.call(this,{center:t,radius:n})},e}(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.options").service("uiGmapMarkerOptions",["uiGmapLogger","uiGmapGmapUtil",function(t,n){return _.extend(n,{createOptions:function(t,i,o,r){var s;return null==o&&(o={}),s=e.extend({},o,{position:null!=o.position?o.position:n.getCoords(t),visible:null!=o.visible?o.visible:n.validateCoords(t)}),(null!=o.icon||null!=i)&&(s=e.extend(s,{icon:null!=o.icon?o.icon:i})),null!=r&&(s.map=r),s},isLabel:function(t){return null!=t.labelContent||null!=t.labelAnchor||null!=t.labelClass||null!=t.labelStyle||null!=t.labelVisible?!0:!1}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapBasePolyChildModel",["uiGmapLogger","$timeout","uiGmaparray-sync","uiGmapGmapUtil","uiGmapEventsHelper",function(n,o,r,s,a){return function(n,o){var l;return l=function(n){function l(n,i,s,l,u){var p;this.scope=n,this.attrs=i,this.map=s,this.defaults=l,this.model=u,this.clean=t(this.clean,this),this.clonedModel=_.clone(this.model,!0),this.isDragging=!1,this.internalEvents={dragend:function(t){return function(){return _.defer(function(){return t.isDragging=!1})}}(this),dragstart:function(t){return function(){return t.isDragging=!0}}(this)},p=function(t){return function(){var e;if(!t.isDragging)return e=t.convertPathPoints(t.scope.path),null!=t.shape&&t.clean(),e.length>0&&(t.shape=o(t.buildOpts(e))),t.shape?(t.scope.fit&&t.extendMapBounds(s,e),r(t.shape.getPath(),t.scope,"path",function(e){return t.scope.fit?t.extendMapBounds(s,e):void 0}),t.listeners=t.model?t.setEvents(t.shape,t.scope,t.model):t.setEvents(t.shape,t.scope,t.scope),t.internalListeners=t.model?t.setEvents(t.shape,{events:t.internalEvents},t.model):t.setEvents(t.shape,{events:t.internalEvents},t.scope)):void 0}}(this),p(),n.$watch("path",function(t){return function(e,n){return _.isEqual(e,n)&&t.shape?void 0:p()}}(this),!0),!n["static"]&&e.isDefined(n.editable)&&n.$watch("editable",function(t){return function(e,n){var i;return e!==n?(e=!t.isFalse(e),null!=(i=t.shape)?i.setEditable(e):void 0):void 0}}(this),!0),e.isDefined(n.draggable)&&n.$watch("draggable",function(t){return function(e,n){var i;return e!==n?(e=!t.isFalse(e),null!=(i=t.shape)?i.setDraggable(e):void 0):void 0}}(this),!0),e.isDefined(n.visible)&&n.$watch("visible",function(t){return function(e,n){var i;return e!==n&&(e=!t.isFalse(e)),null!=(i=t.shape)?i.setVisible(e):void 0}}(this),!0),e.isDefined(n.geodesic)&&n.$watch("geodesic",function(t){return function(e,n){var i;return e!==n?(e=!t.isFalse(e),null!=(i=t.shape)?i.setOptions(t.buildOpts(t.shape.getPath())):void 0):void 0}}(this),!0),e.isDefined(n.stroke)&&e.isDefined(n.stroke.weight)&&n.$watch("stroke.weight",function(t){return function(e,n){var i;return e!==n&&null!=(i=t.shape)?i.setOptions(t.buildOpts(t.shape.getPath())):void 0}}(this),!0),e.isDefined(n.stroke)&&e.isDefined(n.stroke.color)&&n.$watch("stroke.color",function(t){return function(e,n){var i;return e!==n&&null!=(i=t.shape)?i.setOptions(t.buildOpts(t.shape.getPath())):void 0}}(this),!0),e.isDefined(n.stroke)&&e.isDefined(n.stroke.opacity)&&n.$watch("stroke.opacity",function(t){return function(e,n){var i;return e!==n&&null!=(i=t.shape)?i.setOptions(t.buildOpts(t.shape.getPath())):void 0}}(this),!0),e.isDefined(n.icons)&&n.$watch("icons",function(t){return function(e,n){var i;return e!==n&&null!=(i=t.shape)?i.setOptions(t.buildOpts(t.shape.getPath())):void 0}}(this),!0),n.$on("$destroy",function(t){return function(){return t.clean(),t.scope=null}}(this)),e.isDefined(n.fill)&&e.isDefined(n.fill.color)&&n.$watch("fill.color",function(t){return function(e,n){return e!==n?t.shape.setOptions(t.buildOpts(t.shape.getPath())):void 0}}(this)),e.isDefined(n.fill)&&e.isDefined(n.fill.opacity)&&n.$watch("fill.opacity",function(t){return function(e,n){return e!==n?t.shape.setOptions(t.buildOpts(t.shape.getPath())):void 0}}(this)),e.isDefined(n.zIndex)&&n.$watch("zIndex",function(t){return function(e,n){return e!==n?t.shape.setOptions(t.buildOpts(t.shape.getPath())):void 0}}(this)),e.isDefined(n.events)&&null!==n.events&&e.isObject(n.events)&&(this.listeners=a.setEvents(this.shape,n,n))}return i(l,n),l.include(s),l.include(a),l.prototype.clean=function(){var t;return this.removeEvents(this.listeners),this.removeEvents(this.internalListeners),null!=(t=this.shape)&&t.setMap(null),this.shape=null},l}(n)}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapDrawFreeHandChildModel",["uiGmapLogger","$q",function(t,e){var n,i;return n=function(t,e,n){var i,o;return o=new google.maps.Polyline({map:t,clickable:!1}),i=google.maps.event.addListener(t,"mousemove",function(t){return o.getPath().push(t.latLng)}),void google.maps.event.addListenerOnce(t,"mouseup",function(){var r;return google.maps.event.removeListener(i),r=o.getPath(),o.setMap(null),e.push(new google.maps.Polygon({map:t,path:r})),o=null,google.maps.event.clearListeners(t.getDiv(),"mousedown"),n()})},i=function(i,o){var r,s;return this.map=i,o||(o={draggable:!0,zoomControl:!0,scrollwheel:!0,disableDoubleClickZoom:!0}),s=function(t){return function(){var e;return null!=(e=t.deferred)&&e.resolve(),_.defer(function(){return t.map.setOptions(_.extend(t.oldOptions,o))})}}(this),r=function(e){return function(){return t.info("disabling map move"),e.oldOptions=i.getOptions(),e.oldOptions.center=i.getCenter(),e.map.setOptions({draggable:!1,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!1})}}(this),this.engage=function(i){return function(o){return i.polys=o,i.deferred=e.defer(),r(),t.info("DrawFreeHandChildModel is engaged (drawing)."),google.maps.event.addDomListener(i.map.getDiv(),"mousedown",function(){return n(i.map,i.polys,s)}),i.deferred.promise}}(this),this}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapMarkerChildModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger","uiGmapEventsHelper","uiGmapPropertyAction","uiGmapMarkerOptions","uiGmapIMarker","uiGmapMarkerManager","uiGmapPromise",function(e,n,o,r,s,a,l,u,p){var c,h;return h=["coords","icon","options","fit"],c=function(e){function c(e,n,i,r,a,l,u,d,f,g){var m;this.model=n,this.keys=i,this.gMap=r,this.defaults=a,this.doClick=l,this.gMarkerManager=u,this.doDrawSelf=null!=d?d:!0,this.trackModel=null!=f?f:!0,this.needRedraw=null!=g?g:!1,this.internalEvents=t(this.internalEvents,this),this.setLabelOptions=t(this.setLabelOptions,this),this.setOptions=t(this.setOptions,this),this.setIcon=t(this.setIcon,this),this.setCoords=t(this.setCoords,this),this.isNotValid=t(this.isNotValid,this),this.maybeSetScopeValue=t(this.maybeSetScopeValue,this),this.createMarker=t(this.createMarker,this),this.setMyScope=t(this.setMyScope,this),this.updateModel=t(this.updateModel,this),this.handleModelChanges=t(this.handleModelChanges,this),this.destroy=t(this.destroy,this),this.clonedModel=_.clone(this.model,!0),this.deferred=p.defer(),_.each(this.keys,function(t){return function(e,n){return t[n+"Key"]=_.isFunction(t.keys[n])?t.keys[n]():t.keys[n]}}(this)),this.idKey=this.idKeyKey||"id",null!=this.model[this.idKey]&&(this.id=this.model[this.idKey]),c.__super__.constructor.call(this,e),this.scope.getGMarker=function(t){return function(){return t.gMarker}}(this),this.firstTime=!0,this.trackModel?(this.scope.model=this.model,this.scope.$watch("model",function(t){return function(e,n){return e!==n?t.handleModelChanges(e,n):void 0}}(this),!0)):(m=new s(function(t){return function(n){return t.firstTime?void 0:t.setMyScope(n,e)}}(this),!1),_.each(this.keys,function(t,n){return e.$watch(n,m.sic,!0)})),this.scope.$on("$destroy",function(t){return function(){return h(t)}}(this)),this.createMarker(this.model),o.info(this)}var h;return i(c,e),c.include(n),c.include(r),c.include(a),h=function(t){return null!=(null!=t?t.gMarker:void 0)&&(t.removeEvents(t.externalListeners),t.removeEvents(t.internalListeners),null!=t?t.gMarker:void 0)?(t.removeFromManager&&t.gMarkerManager.remove(t.gMarker),t.gMarker.setMap(null),t.gMarker=null):void 0},c.prototype.destroy=function(t){return null==t&&(t=!0),this.removeFromManager=t,this.scope.$destroy()},c.prototype.handleModelChanges=function(t,e){var n,i,o;return n=this.getChanges(t,e,l.keys),this.firstTime?void 0:(i=0,o=_.keys(n).length,_.each(n,function(n){return function(r,s){var a;return i+=1,a=o===i,n.setMyScope(s,t,e,!1,!0,a),n.needRedraw=!0}}(this)))},c.prototype.updateModel=function(t){return this.cloneModel=_.clone(t,!0),this.setMyScope("all",t,this.model)},c.prototype.renderGMarker=function(t,e){var n;if(null==t&&(t=!0),n=this.getProp(this.coordsKey,this.model),null!=n){if(!this.validateCoords(n))return void o.debug("MarkerChild does not have coords yet. They may be defined later.");if(null!=e&&e(),t&&this.gMarker)return this.gMarkerManager.add(this.gMarker)}else if(t&&this.gMarker)return this.gMarkerManager.remove(this.gMarker)},c.prototype.setMyScope=function(t,e,n,i,o){var r;switch(null==n&&(n=void 0),null==i&&(i=!1),null==o&&(o=!0),null==e?e=this.model:this.model=e,this.gMarker||(this.setOptions(this.scope,o),r=!0),t){case"all":return _.each(this.keys,function(t){return function(r,s){return t.setMyScope(s,e,n,i,o)}}(this));case"icon":return this.maybeSetScopeValue("icon",e,n,this.iconKey,this.evalModelHandle,i,this.setIcon,o);case"coords":return this.maybeSetScopeValue("coords",e,n,this.coordsKey,this.evalModelHandle,i,this.setCoords,o);case"options":if(!r)return this.createMarker(e,n,i,o)}},c.prototype.createMarker=function(t,e,n,i){return null==e&&(e=void 0),null==n&&(n=!1),null==i&&(i=!0),this.maybeSetScopeValue("options",t,e,this.optionsKey,this.evalModelHandle,n,this.setOptions,i),this.firstTime=!1},c.prototype.maybeSetScopeValue=function(t,e,n,i,o,r,s,a){return null==s&&(s=void 0),null==a&&(a=!0),null!=s&&s(this.scope,a),this.doDrawSelf&&a?this.gMarkerManager.draw():void 0},c.prototype.isNotValid=function(t,e){var n,i;return null==e&&(e=!0),i=e?void 0===this.gMarker:!1,n=this.trackModel?!1:t.$id!==this.scope.$id,n||i},c.prototype.setCoords=function(t,e){return null==e&&(e=!0),this.isNotValid(t)||null==this.gMarker?void 0:this.renderGMarker(e,function(t){return function(){var e,n,i;return n=t.getProp(t.coordsKey,t.model),e=t.getCoords(n),i=t.gMarker.getPosition(),null==i||null==e||e.lng()!==i.lng()||e.lat()!==i.lat()?(t.gMarker.setPosition(e),t.gMarker.setVisible(t.validateCoords(n))):void 0}}(this))},c.prototype.setIcon=function(t,e){return null==e&&(e=!0),this.isNotValid(t)||null==this.gMarker?void 0:this.renderGMarker(e,function(t){return function(){var e,n,i;return i=t.gMarker.getIcon(),n=t.getProp("icon",t.model),i!==n?(t.gMarker.setIcon(n),e=t.getProp("coords",t.model),t.gMarker.setPosition(t.getCoords(e)),t.gMarker.setVisible(t.validateCoords(e))):void 0}}(this))},c.prototype.setOptions=function(t,e){var n;if(null==e&&(e=!0),!this.isNotValid(t,!1)){if(this.renderGMarker(e,function(t){return function(){var e,n,i;return e=t.getProp(t.coordsKey,t.model),n=t.getProp(t.iconKey,t.model),i=t.getProp(t.optionsKey,t.model),t.opts=t.createOptions(e,n,i),null!=t.gMarker&&t.gMarker.setOptions(t.opts),t.gMarker||(t.gMarker=t.isLabel(t.opts)?new MarkerWithLabel(t.setLabelOptions(t.opts)):new google.maps.Marker(t.opts),_.extend(t.gMarker,{model:t.model})),t.externalListeners&&t.removeEvents(t.externalListeners),t.internalListeners&&t.removeEvents(t.internalListeners),t.externalListeners=t.setEvents(t.gMarker,t.scope,t.model,["dragend"]),t.internalListeners=t.setEvents(t.gMarker,{events:t.internalEvents(),$evalAsync:function(){}},t.model),null!=t.id?t.gMarker.key=t.id:void 0}}(this)),this.gMarker&&(this.gMarker.getMap()||this.gMarkerManager.type!==u.type))this.deferred.resolve(this.gMarker);else{if(!this.gMarker)return this.deferred.reject("gMarker is null");(null!=(n=this.gMarker)?n.getMap():0)&&this.gMarkerManager.type===u.type||(o.debug("gMarker has no map yet"),this.deferred.resolve(this.gMarker))}return this.model[this.fitKey]?this.gMarkerManager.fit():void 0}},c.prototype.setLabelOptions=function(t){return t.labelAnchor=this.getLabelPositionPoint(t.labelAnchor),t},c.prototype.internalEvents=function(){return{dragend:function(t){return function(e,n,i,o){var r,s,a;return s=t.trackModel?t.scope.model:t.model,a=t.setCoordsFromEvent(t.modelOrKey(s,t.coordsKey),t.gMarker.getPosition()),s=t.setVal(i,t.coordsKey,a),r=t.scope.events,null!=(null!=r?r.dragend:void 0)&&r.dragend(e,n,s,o),t.scope.$apply()}}(this),click:function(t){return function(e,n,i,o){var r;return r=_.isFunction(t.clickKey)?t.clickKey:t.getProp(t.clickKey,t.model),t.doClick&&null!=r?t.scope.$evalAsync(r(e,n,t.model,o)):void 0}}(this)}},c}(e)}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygonChildModel",["uiGmapBasePolyChildModel","uiGmapPolygonOptionsBuilder",function(t,e){var i,o,r;return r=function(t){return new google.maps.Polygon(t)},o=new t(e,r),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(o)}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylineChildModel",["uiGmapBasePolyChildModel","uiGmapPolylineOptionsBuilder",function(t,e){var i,o,r;return r=function(t){return new google.maps.Polyline(t)},o=t(e,r),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e}(o)}])}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapWindowChildModel",["uiGmapBaseObject","uiGmapGmapUtil","uiGmapLogger","$compile","$http","$templateCache","uiGmapChromeFixes","uiGmapEventsHelper",function(i,r,s,a,l,u,p,c){var h;return h=function(i){function h(t,e,i,o,r,a,l,u,p){var c;this.model=t,this.scope=e,this.opts=i,this.isIconVisibleOnClick=o,this.mapCtrl=r,this.markerScope=a,this.element=l,this.needToManualDestroy=null!=u?u:!1,this.markerIsVisibleAfterWindowClose=null!=p?p:!0,this.destroy=n(this.destroy,this),this.remove=n(this.remove,this),this.getLatestPosition=n(this.getLatestPosition,this),this.hideWindow=n(this.hideWindow,this),this.showWindow=n(this.showWindow,this),this.handleClick=n(this.handleClick,this),this.watchOptions=n(this.watchOptions,this),this.watchCoords=n(this.watchCoords,this),this.createGWin=n(this.createGWin,this),this.watchElement=n(this.watchElement,this),this.watchAndDoShow=n(this.watchAndDoShow,this),this.doShow=n(this.doShow,this),this.clonedModel=_.clone(this.model,!0),this.getGmarker=function(){var t,e;return null!=(null!=(t=this.markerScope)?t.getGMarker:void 0)&&null!=(e=this.markerScope)?e.getGMarker():void 0},this.listeners=[],this.createGWin(),c=this.getGmarker(),null!=c&&c.setClickable(!0),this.watchElement(),this.watchOptions(),this.watchCoords(),this.watchAndDoShow(),this.scope.$on("$destroy",function(t){return function(){return t.destroy()}}(this)),s.info(this)}return o(h,i),h.include(r),h.include(c),h.prototype.doShow=function(){return this.scope.show?this.showWindow():this.hideWindow()},h.prototype.watchAndDoShow=function(){return null!=this.model.show&&(this.scope.show=this.model.show),this.scope.$watch("show",this.doShow,!0),this.doShow()},h.prototype.watchElement=function(){return this.scope.$watch(function(t){return function(){var e,n;if(t.element||t.html)return t.html!==t.element.html()&&t.gWin?(null!=(n=t.opts)&&(n.content=void 0),e=t.gWin.isOpen(),t.remove(),t.createGWin(e)):void 0}}(this))},h.prototype.createGWin=function(e){var n,i,o,r,s;return null==e&&(e=!1),i=this.getGmarker(),null==this.gWin&&(n={},null!=this.opts&&(this.scope.coords&&(this.opts.position=this.getCoords(this.scope.coords)),n=this.opts),this.element&&(this.html=_.isObject(this.element)?this.element.html():this.element),o=this.scope.options?this.scope.options:n,this.opts=this.createWindowOptions(i,this.markerScope||this.scope,this.html,o)),null==this.opts||this.gWin?void 0:(this.gWin=this.opts.boxClass&&t.InfoBox&&"function"==typeof t.InfoBox?new t.InfoBox(this.opts):new google.maps.InfoWindow(this.opts),this.handleClick((null!=(r=this.scope)&&null!=(s=r.options)?s.forceClick:void 0)||e),this.doShow(),this.listeners.push(google.maps.event.addListener(this.gWin,"domready",function(){return p.maybeRepaint(this.content)})),this.listeners.push(google.maps.event.addListener(this.gWin,"closeclick",function(t){return function(){return i&&(i.setAnimation(t.oldMarkerAnimation),t.markerIsVisibleAfterWindowClose&&_.delay(function(){return i.setVisible(!1),i.setVisible(t.markerIsVisibleAfterWindowClose)},250)),t.gWin.close(),t.model.show=!1,null!=t.scope.closeClick?t.scope.$evalAsync(t.scope.closeClick()):t.scope.$evalAsync()}}(this))))},h.prototype.watchCoords=function(){var t;return t=null!=this.markerScope?this.markerScope:this.scope,t.$watch("coords",function(t){return function(e,n){var i;if(e!==n){if(null==e)t.hideWindow();else if(!t.validateCoords(e))return void s.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(t.model));if(i=t.getCoords(e),t.gWin.setPosition(i),t.opts)return t.opts.position=i}}}(this),!0)},h.prototype.watchOptions=function(){return this.scope.$watch("options",function(t){return function(e,n){if(e!==n&&(t.opts=e,null!=t.gWin)){if(t.gWin.setOptions(t.opts),null!=t.opts.visible&&t.opts.visible)return t.showWindow();if(null!=t.opts.visible)return t.hideWindow()}}}(this),!0)},h.prototype.handleClick=function(t){var e,n;if(null!=this.gWin)return n=this.getGmarker(),e=function(t){return function(){return null==t.gWin&&t.createGWin(),t.showWindow(),null!=n?(t.initialMarkerVisibility=n.getVisible(),t.oldMarkerAnimation=n.getAnimation(),n.setVisible(t.isIconVisibleOnClick)):void 0}}(this),t&&e(),n?this.listeners=this.listeners.concat(this.setEvents(n,{events:{click:e}},this.model)):void 0},h.prototype.showWindow=function(){var t,n,i;return null!=this.gWin?(n=function(t){return function(){var e,n,i;if(!t.gWin.isOpen()){if(n=t.getGmarker(),null!=t.gWin&&null!=t.gWin.getPosition&&(i=t.gWin.getPosition()),n&&(i=n.getPosition()),!i)return;if(t.gWin.open(t.mapCtrl,n),e=t.gWin.isOpen(),t.model.show!==e)return t.model.show=e}}}(this),this.scope.templateUrl?l.get(this.scope.templateUrl,{cache:u}).then(function(t){return function(i){var o,r;return r=t.scope.$new(),e.isDefined(t.scope.templateParameter)&&(r.parameter=t.scope.templateParameter),o=a(i.data)(r),t.gWin.setContent(o[0]),n()}}(this)):this.scope.template?(i=this.scope.$new(),e.isDefined(this.scope.templateParameter)&&(i.parameter=this.scope.templateParameter),t=a(this.scope.template)(i),this.gWin.setContent(t[0]),n()):n()):void 0},h.prototype.hideWindow=function(){return null!=this.gWin&&this.gWin.isOpen()?this.gWin.close():void 0},h.prototype.getLatestPosition=function(t){var e;return e=this.getGmarker(),null==this.gWin||null==e||t?t?this.gWin.setPosition(t):void 0:this.gWin.setPosition(e.getPosition())},h.prototype.remove=function(){return this.hideWindow(),this.removeEvents(this.listeners),this.listeners.length=0,delete this.gWin,delete this.opts},h.prototype.destroy=function(t){var e;return null==t&&(t=!1),this.remove(),null==this.scope||(null!=(e=this.scope)?e.$$destroyed:void 0)||!this.needToManualDestroy&&!t?void 0:this.scope.$destroy()},h}(i)}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapCircleParentModel",["uiGmapLogger","$timeout","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapCircleOptionsBuilder",function(t,i,o,r,s){var a;return a=function(i){function s(n,i,r,s,a){var l,u;this.scope=n,this.attrs=r,this.map=s,this.DEFAULTS=a,l=new google.maps.Circle(this.buildOpts(o.getCoords(n.center),n.radius)),this.setMyOptions=function(t){return function(e,i){return _.isEqual(e,i)?void 0:l.setOptions(t.buildOpts(o.getCoords(n.center),n.radius))}}(this),this.props=this.props.concat([{prop:"center",isColl:!0},{prop:"fill",isColl:!0},"radius"]),this.watchProps(),u=this.setEvents(l,n,n),google.maps.event.addListener(l,"radius_changed",function(){return n.$evalAsync(function(){return n.radius=l.getRadius()})}),google.maps.event.addListener(l,"center_changed",function(){return n.$evalAsync(function(){return e.isDefined(n.center.type)?(n.center.coordinates[1]=l.getCenter().lat(),n.center.coordinates[0]=l.getCenter().lng()):(n.center.latitude=l.getCenter().lat(),n.center.longitude=l.getCenter().lng())})}),n.$on("$destroy",function(t){return function(){return t.removeEvents(u),l.setMap(null)}}(this)),t.info(this)}return n(s,i),s.include(o),s.include(r),s}(s)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapDrawingManagerParentModel",["uiGmapLogger","$timeout",function(){var t;return t=function(){function t(t,e,n,i){var o;this.scope=t,this.attrs=n,this.map=i,o=new google.maps.drawing.DrawingManager(this.scope.options),o.setMap(this.map),null!=this.scope.control&&(this.scope.control.getDrawingManager=function(){return o}),!this.scope["static"]&&this.scope.options&&this.scope.$watch("options",function(t){return null!=o?o.setOptions(t):void 0},!0),t.$on("$destroy",function(){return o.setMap(null),o=null})}return t}()}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIMarkerParentModel",["uiGmapModelKey","uiGmapLogger",function(n,o){var r;return r=function(n){function r(n,i,s,a){if(this.scope=n,this.element=i,this.attrs=s,this.map=a,this.onDestroy=t(this.onDestroy,this),this.onWatch=t(this.onWatch,this),this.watch=t(this.watch,this),this.validateScope=t(this.validateScope,this),r.__super__.constructor.call(this,this.scope),this.$log=o,!this.validateScope(n))throw new String("Unable to construct IMarkerParentModel due to invalid scope");this.doClick=e.isDefined(s.click),null!=n.options&&(this.DEFAULTS=n.options),this.watch("coords",this.scope),this.watch("icon",this.scope),this.watch("options",this.scope),n.$on("$destroy",function(t){return function(){return t.onDestroy(n)}}(this))}return i(r,n),r.prototype.DEFAULTS={},r.prototype.validateScope=function(t){var e;return null==t?(this.$log.error(this.constructor.name+": invalid scope used"),!1):(e=null!=t.coords,e?e:(this.$log.error(this.constructor.name+": no valid coords attribute found"),!1))},r.prototype.watch=function(t,e,n){return null==n&&(n=!0),e.$watch(t,function(n){return function(i,o){return _.isEqual(i,o)?void 0:n.onWatch(t,e,i,o)}}(this),n)},r.prototype.onWatch=function(){},r.prototype.onDestroy=function(){throw new String("OnDestroy Not Implemented!!")},r}(n)}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIWindowParentModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger",function(t,e,i){var o;return o=function(t){function o(t,e,n,r,s,a,l,u){o.__super__.constructor.call(this,t),this.$log=i,this.$timeout=s,this.$compile=a,this.$http=l,this.$templateCache=u,this.DEFAULTS={},null!=t.options&&(this.DEFAULTS=t.options)}return n(o,t),o.include(e),o.prototype.getItem=function(t,e,n){return"models"===e?t[e][n]:t[e].get(n)},o}(t)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapLayerParentModel",["uiGmapBaseObject","uiGmapLogger","$timeout",function(n,o){var r;return r=function(n){function r(n,i,r,s,a,l){return this.scope=n,this.element=i,this.attrs=r,this.gMap=s,this.onLayerCreated=null!=a?a:void 0,this.$log=null!=l?l:o,this.createGoogleLayer=t(this.createGoogleLayer,this),null==this.attrs.type?void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!"):(this.createGoogleLayer(),this.doShow=!0,e.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.layer.setMap(this.gMap),this.scope.$watch("show",function(t){return function(e,n){return e!==n?(t.doShow=e,t.layer.setMap(e?t.gMap:null)):void 0
}}(this),!0),this.scope.$watch("options",function(t){return function(e,n){return e!==n?(t.layer.setMap(null),t.layer=null,t.createGoogleLayer()):void 0}}(this),!0),void this.scope.$on("$destroy",function(t){return function(){return t.layer.setMap(null)}}(this)))}return i(r,n),r.prototype.createGoogleLayer=function(){var t;return this.layer=null==this.attrs.options?void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),null!=this.layer&&null!=this.onLayerCreated&&"function"==typeof(t=this.onLayerCreated(this.scope,this.layer))?t(this.layer):void 0},r}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMapTypeParentModel",["uiGmapBaseObject","uiGmapLogger",function(n,o){var r;return r=function(n){function r(n,i,r,s,a){return this.scope=n,this.element=i,this.attrs=r,this.gMap=s,this.$log=null!=a?a:o,this.hideOverlay=t(this.hideOverlay,this),this.showOverlay=t(this.showOverlay,this),this.refreshMapType=t(this.refreshMapType,this),this.createMapType=t(this.createMapType,this),null==this.attrs.options?void this.$log.info("options attribute for the map-type directive is mandatory. Map type creation aborted!!"):(this.id=this.gMap.overlayMapTypesCount=this.gMap.overlayMapTypesCount+1||0,this.doShow=!0,this.createMapType(),e.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.showOverlay(),this.scope.$watch("show",function(t){return function(e,n){return e!==n?(t.doShow=e,e?t.showOverlay():t.hideOverlay()):void 0}}(this),!0),this.scope.$watch("options",function(t){return function(e,n){return _.isEqual(e,n)?void 0:t.refreshMapType()}}(this),!0),e.isDefined(this.attrs.refresh)&&this.scope.$watch("refresh",function(t){return function(e,n){return _.isEqual(e,n)?void 0:t.refreshMapType()}}(this),!0),void this.scope.$on("$destroy",function(t){return function(){return t.hideOverlay(),t.mapType=null}}(this)))}return i(r,n),r.prototype.createMapType=function(){if(null!=this.scope.options.getTile)this.mapType=this.scope.options;else{if(null==this.scope.options.getTileUrl)return void this.$log.info("options should provide either getTile or getTileUrl methods. Map type creation aborted!!");this.mapType=new google.maps.ImageMapType(this.scope.options)}return this.attrs.id&&this.scope.id&&(this.gMap.mapTypes.set(this.scope.id,this.mapType),e.isDefined(this.attrs.show)||(this.doShow=!1)),this.mapType.layerId=this.id},r.prototype.refreshMapType=function(){return this.hideOverlay(),this.mapType=null,this.createMapType(),this.doShow&&null!=this.gMap?this.showOverlay():void 0},r.prototype.showOverlay=function(){return this.gMap.overlayMapTypes.push(this.mapType)},r.prototype.hideOverlay=function(){var t;return t=!1,this.gMap.overlayMapTypes.forEach(function(e){return function(n,i){t||n.layerId!==e.id||(t=!0,e.gMap.overlayMapTypes.removeAt(i))}}(this))},r}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMarkersParentModel",["uiGmapIMarkerParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapMarkerChildModel","uiGmap_async","uiGmapClustererMarkerManager","uiGmapMarkerManager","$timeout","uiGmapIMarker","uiGmapPromise","uiGmapGmapUtil","uiGmapLogger",function(n,o,r,s,a,l,u,p,c,h,d){var f;return f=function(n){function p(e,n,i,o){this.onDestroy=t(this.onDestroy,this),this.newChildMarker=t(this.newChildMarker,this),this.updateChild=t(this.updateChild,this),this.pieceMeal=t(this.pieceMeal,this),this.reBuildMarkers=t(this.reBuildMarkers,this),this.createMarkersFromScratch=t(this.createMarkersFromScratch,this),this.validateScope=t(this.validateScope,this),this.onWatch=t(this.onWatch,this);var s;p.__super__.constructor.call(this,e,n,i,o),s=this,this.scope.markerModels=new r,this.scope.markerModelsUpdate={updateCtr:0},this.$log.info(this),this.doRebuildAll=null!=this.scope.doRebuildAll?this.scope.doRebuildAll:!1,this.setIdKey(e),this.scope.$watch("doRebuildAll",function(t){return function(e,n){return e!==n?t.doRebuildAll=e:void 0}}(this)),(null==e.models||0===e.models.length)&&(this.modelsRendered=!1),this.scope.$watch("models",function(t){return function(n,i){if(!_.isEqual(n,i)||!t.modelsRendered){if(0===n.length&&0===i.length)return;return t.modelsRendered=!0,t.onWatch("models",e,n,i)}}}(this),!this.isTrue(i.modelsbyref)),this.watch("doCluster",e),this.watch("clusterOptions",e),this.watch("clusterEvents",e),this.watch("fit",e),this.watch("idKey",e),this.gMarkerManager=void 0,this.createMarkersFromScratch(e)}return i(p,n),p.include(d),p.include(o),p.prototype.onWatch=function(t,e,n,i){return"idKey"===t&&n!==i&&(this.idKey=n),this.doRebuildAll?this.reBuildMarkers(e):this.pieceMeal(e)},p.prototype.validateScope=function(t){var n;return n=e.isUndefined(t.models)||void 0===t.models,n&&this.$log.error(this.constructor.name+": no valid models attribute found"),p.__super__.validateScope.call(this,t)||n},p.prototype.createMarkersFromScratch=function(t){var e;return t.doCluster&&(t.clusterEvents&&(this.clusterInternalOptions=_.once(function(e){return function(){var n,i,o,r;return n=e,e.origClusterEvents?void 0:(e.origClusterEvents={click:null!=(i=t.clusterEvents)?i.click:void 0,mouseout:null!=(o=t.clusterEvents)?o.mouseout:void 0,mouseover:null!=(r=t.clusterEvents)?r.mouseover:void 0},_.extend(t.clusterEvents,{click:function(t){return n.maybeExecMappedEvent(t,"click")},mouseout:function(t){return n.maybeExecMappedEvent(t,"mouseout")},mouseover:function(t){return n.maybeExecMappedEvent(t,"mouseover")}}))}}(this))()),this.gMarkerManager||(this.gMarkerManager=new l(this.map,void 0,t.clusterOptions,this.clusterInternalOptions))),this.gMarkerManager||(this.gMarkerManager=new u(this.map)),this.gMarkerManager.clear(),this.didQueueInitPromise(this,t)?void 0:(e=null,a.promiseLock(this,h.promiseTypes.create,"createAllNew",function(t){return e=t},function(n){return function(){return a.each(t.models,function(i){return n.newChildMarker(i,t),e},a.chunkSizeFrom(t.chunk)).then(function(){return n.modelsRendered=!0,n.gMarkerManager.draw(),t.fit&&n.gMarkerManager.fit(),n.scope.markerModelsUpdate.updateCtr+=1},a.chunkSizeFrom(t.chunk))}}(this)))},p.prototype.reBuildMarkers=function(t){var e;if(t.doRebuild||void 0===t.doRebuild)return(null!=(e=this.scope.markerModels)?e.length:void 0)?this.onDestroy(t).then(function(e){return function(){return e.createMarkersFromScratch(t)}}(this)):this.createMarkersFromScratch(t)},p.prototype.pieceMeal=function(t){var e,n;if(!t.$$destroyed)return e=null,n=null,null!=this.scope.models&&this.scope.models.length>0&&this.scope.markerModels.length>0?a.promiseLock(this,h.promiseTypes.update,"pieceMeal",function(t){return e=t},function(i){return function(){return h.promise(function(){return i.figureOutState(i.idKey,t,i.scope.markerModels,i.modelKeyComparison)}).then(function(o){return n=o,a.each(n.removals,function(t){return null!=t?(null!=t.destroy&&t.destroy(),i.scope.markerModels.remove(t.id),e):void 0},a.chunkSizeFrom(t.chunk))}).then(function(){return a.each(n.adds,function(n){return i.newChildMarker(n,t),e},a.chunkSizeFrom(t.chunk))}).then(function(){return a.each(n.updates,function(t){return i.updateChild(t.child,t.model),e},a.chunkSizeFrom(t.chunk))}).then(function(){return(n.adds.length>0||n.removals.length>0||n.updates.length>0)&&(i.gMarkerManager.draw(),t.markerModels=i.scope.markerModels,t.fit&&i.gMarkerManager.fit()),i.scope.markerModelsUpdate.updateCtr+=1})}}(this)):(this.inProgress=!1,this.reBuildMarkers(t))},p.prototype.updateChild=function(t,e){return null==e[this.idKey]?void this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):t.updateModel(e)},p.prototype.newChildMarker=function(t,e){var n,i,o,r;return null==t[this.idKey]?void this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.$log.info("child",n,"markers",this.scope.markerModels),i=e.$new(!0),i.events=e.events,r={},_.each(c.scopeKeys,function(t,n){return r[n]=e[n]}),n=new s(i,t,r,this.map,this.DEFAULTS,this.doClick,this.gMarkerManager,o=!1),this.scope.markerModels.put(t[this.idKey],n),n)},p.prototype.onDestroy=function(){return a.promiseLock(this,h.promiseTypes["delete"],void 0,void 0,function(t){return function(){return a.each(t.scope.markerModels.values(),function(t){return null!=t?t.destroy(!1):void 0},!1).then(function(){return delete t.scope.markerModels,null!=t.gMarkerManager&&t.gMarkerManager.clear(),t.scope.markerModels=new r,t.scope.markerModelsUpdate.updateCtr+=1})}}(this))},p.prototype.maybeExecMappedEvent=function(t,e){var n,i;return _.isFunction(null!=(i=this.scope.clusterEvents)?i[e]:void 0)&&(n=this.mapClusterToMarkerModels(t),this.origClusterEvents[e])?this.origClusterEvents[e](n.cluster,n.mapped):void 0},p.prototype.mapClusterToMarkerModels=function(t){var e;return e=t.getMarkers().map(function(t){return function(e){return t.scope.markerModels.get(e.key).model}}(this)),{cluster:t,mapped:e}},p.prototype.getItem=function(t,e,n){return"models"===e?t[e][n]:t[e].get(n)},p}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapPolygonsParentModel",["$timeout","uiGmapLogger","uiGmapModelKey","uiGmapModelsWatcher","uiGmapPropMap","uiGmapPolygonChildModel","uiGmap_async","uiGmapPromise",function(n,o,r,s,a,l,u,p){var c;return c=function(n){function r(e,n,i,s,l){var u;this.scope=e,this.element=n,this.attrs=i,this.gMap=s,this.defaults=l,this.modelKeyComparison=t(this.modelKeyComparison,this),this.createChild=t(this.createChild,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.onDestroy=t(this.onDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.watch=t(this.watch,this),r.__super__.constructor.call(this,e),u=this,this.$log=o,this.plurals=new a,this.scopePropNames=["path","stroke","clickable","draggable","editable","geodesic","icons","visible"],_.each(this.scopePropNames,function(t){return function(e){return t[e+"Key"]=void 0}}(this)),this.models=void 0,this.firstTime=!0,this.$log.info(this),this.watchOurScope(e),this.createChildScopes()}return i(r,n),r.include(s),r.prototype.watch=function(t,e,n){return t.$watch(e,function(i){return function(o,r){var s;return o!==r?(s=null,i[n]=_.isFunction(o)?o():o,u.promiseLock(i,p.promiseTypes.update,"watch "+e+" "+n,function(t){return s=t},function(){return u.each(i.plurals.values(),function(t){return t.scope[e]="self"===i[n]?t:t[i[n]],s},u.chunkSizeFrom(t.chunk))})):void 0}}(this))},r.prototype.watchModels=function(t){return t.$watchCollection("models",function(e){return function(n,i){return!_.isEqual(n,i)||e.lastNewValue===n&&e.lastOldValue===i?(e.lastNewValue=n,e.lastOldValue=i,e.doINeedToWipe(n)?e.rebuildAll(t,!0,!0):e.createChildScopes(!1)):void 0}}(this))},r.prototype.doINeedToWipe=function(t){var e;return e=null!=t?0===t.length:!0,this.plurals.length>0&&e},r.prototype.rebuildAll=function(t,e,n){return this.onDestroy(n).then(function(t){return function(){return e?t.createChildScopes():void 0}}(this))},r.prototype.onDestroy=function(t){return u.promiseLock(this,p.promiseTypes["delete"],void 0,void 0,function(e){return function(){return u.each(e.plurals.values(),function(t){return t.destroy(!0)},!1).then(function(){return t&&delete e.plurals,e.plurals=new a})}}(this))},r.prototype.watchDestroy=function(t){return t.$on("$destroy",function(e){return function(){return e.rebuildAll(t,!1,!0)}}(this))},r.prototype.watchOurScope=function(t){return _.each(this.scopePropNames,function(e){return function(n){var i;return i=n+"Key",e[i]="function"==typeof t[n]?t[n]():t[n],e.watch(t,n,i)}}(this))},r.prototype.createChildScopes=function(t){return null==t&&(t=!0),e.isUndefined(this.scope.models)?void this.$log.error("No models to create Polygons from! I Need direct models!"):null!=this.gMap&&null!=this.scope.models?(this.watchIdKey(this.scope),t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)):void 0},r.prototype.watchIdKey=function(t){return this.setIdKey(t),t.$watch("idKey",function(e){return function(n,i){return n!==i&&null==n?(e.idKey=n,e.rebuildAll(t,!0,!0)):void 0}}(this))},r.prototype.createAllNew=function(t,e){var n;return null==e&&(e=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),this.didQueueInitPromise(this,t)?void 0:(n=null,u.promiseLock(this,p.promiseTypes.create,"createAllNew",function(t){return n=t},function(e){return function(){return u.each(t.models,function(t){var i;return i=e.createChild(t,e.gMap),n&&(o.debug("createNew should fall through safely"),i.isEnabled=!1),n},u.chunkSizeFrom(t.chunk)).then(function(){return e.firstTime=!1})}}(this)))},r.prototype.pieceMeal=function(t,e){var n,i;return null==e&&(e=!0),t.$$destroyed?void 0:(n=null,i=null,this.models=t.models,null!=t&&null!=t.models&&t.models.length>0&&this.plurals.length>0?u.promiseLock(this,p.promiseTypes.update,"pieceMeal",function(t){return n=t},function(e){return function(){return p.promise(function(){return e.figureOutState(e.idKey,t,e.plurals,e.modelKeyComparison)}).then(function(o){return i=o,u.each(i.removals,function(t){var i;return i=e.plurals.get(t),null!=i?(i.destroy(),e.plurals.remove(t),n):void 0},u.chunkSizeFrom(t.chunk))}).then(function(){return u.each(i.adds,function(t){return n&&o.debug("pieceMeal should fall through safely"),e.createChild(t,e.gMap),n},u.chunkSizeFrom(t.chunk))})}}(this)):(this.inProgress=!1,this.rebuildAll(this.scope,!0,!0)))},r.prototype.createChild=function(t,e){var n,i;return i=this.scope.$new(!1),this.setChildScope(this.scopePropNames,i,t),i.$watch("model",function(t){return function(e,n){return e!==n?t.setChildScope(i,e):void 0}}(this),!0),i["static"]=this.scope["static"],n=new l(i,this.attrs,e,this.defaults,t),null==t[this.idKey]?void this.$log.error("Polygon model has no id to assign a child to.\nThis is required for performance. Please assign id,\nor redirect id to a different key."):(this.plurals.put(t[this.idKey],n),n)},r.prototype.modelKeyComparison=function(t,e){return _.isEqual(this.evalModelHandle(t,this.scope.path),this.evalModelHandle(e,this.scope.path))},r}(r)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapPolylinesParentModel",["$timeout","uiGmapLogger","uiGmapModelKey","uiGmapModelsWatcher","uiGmapPropMap","uiGmapPolylineChildModel","uiGmap_async","uiGmapPromise",function(n,o,r,s,a,l,u,p){var c;return c=function(n){function r(e,n,i,s,l){var u;this.scope=e,this.element=n,this.attrs=i,this.gMap=s,this.defaults=l,this.modelKeyComparison=t(this.modelKeyComparison,this),this.setChildScope=t(this.setChildScope,this),this.createChild=t(this.createChild,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.onDestroy=t(this.onDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.watch=t(this.watch,this),r.__super__.constructor.call(this,e),u=this,this.$log=o,this.plurals=new a,this.scopePropNames=["path","stroke","clickable","draggable","editable","geodesic","icons","visible"],_.each(this.scopePropNames,function(t){return function(e){return t[e+"Key"]=void 0}}(this)),this.models=void 0,this.firstTime=!0,this.$log.info(this),this.watchOurScope(e),this.createChildScopes()}return i(r,n),r.include(s),r.prototype.watch=function(t,e,n){return t.$watch(e,function(t){return function(i,o){var r;return i!==o?(r=null,t[n]=_.isFunction(i)?i():i,u.promiseLock(t,p.promiseTypes.update,"watch "+e+" "+n,function(t){return r=t},function(){return u.each(t.plurals.values(),function(i){return i.scope[e]="self"===t[n]?i:i[t[n]],r},!1)})):void 0}}(this))},r.prototype.watchModels=function(t){return t.$watchCollection("models",function(e){return function(n,i){return!_.isEqual(n,i)||e.lastNewValue===n&&e.lastOldValue===i?(e.lastNewValue=n,e.lastOldValue=i,e.doINeedToWipe(n)?e.rebuildAll(t,!0,!0):e.createChildScopes(!1)):void 0}}(this))},r.prototype.doINeedToWipe=function(t){var e;return e=null!=t?0===t.length:!0,this.plurals.length>0&&e},r.prototype.rebuildAll=function(t,e,n){return this.onDestroy(n).then(function(t){return function(){return e?t.createChildScopes():void 0}}(this))},r.prototype.onDestroy=function(t){return u.promiseLock(this,p.promiseTypes["delete"],void 0,void 0,function(e){return function(){return u.each(e.plurals.values(),function(t){return t.destroy(!0)},!1).then(function(){return t&&delete e.plurals,e.plurals=new a})}}(this))},r.prototype.watchDestroy=function(t){return t.$on("$destroy",function(e){return function(){return e.rebuildAll(t,!1,!0)}}(this))},r.prototype.watchOurScope=function(t){return _.each(this.scopePropNames,function(e){return function(n){var i;return i=n+"Key",e[i]="function"==typeof t[n]?t[n]():t[n],e.watch(t,n,i)}}(this))},r.prototype.createChildScopes=function(t){return null==t&&(t=!0),e.isUndefined(this.scope.models)?void this.$log.error("No models to create Polylines from! I Need direct models!"):null!=this.gMap&&null!=this.scope.models?(this.watchIdKey(this.scope),t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)):void 0},r.prototype.watchIdKey=function(t){return this.setIdKey(t),t.$watch("idKey",function(e){return function(n,i){return n!==i&&null==n?(e.idKey=n,e.rebuildAll(t,!0,!0)):void 0}}(this))},r.prototype.createAllNew=function(t,e){var n;return null==e&&(e=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),this.didQueueInitPromise(this,t)?void 0:(n=null,u.promiseLock(this,p.promiseTypes.create,"createAllNew",function(t){return n=t},function(e){return function(){return u.each(t.models,function(t){return e.createChild(t,e.gMap),n&&o.debug("createNew should fall through safely"),n}).then(function(){return e.firstTime=!1})}}(this)))},r.prototype.pieceMeal=function(t,e){var n,i;return null==e&&(e=!0),t.$$destroyed?void 0:(n=null,i=null,this.models=t.models,null!=t&&null!=t.models&&t.models.length>0&&this.plurals.length>0?u.promiseLock(this,p.promiseTypes.update,"pieceMeal",function(t){return n=t},function(e){return function(){return p.promise(function(){return e.figureOutState(e.idKey,t,e.plurals,e.modelKeyComparison)}).then(function(t){return i=t,u.each(i.removals,function(t){var i;return i=e.plurals.get(t),null!=i?(i.destroy(),e.plurals.remove(t),n):void 0})}).then(function(){return u.each(i.adds,function(t){return n&&o.debug("pieceMeal should fall through safely"),e.createChild(t,e.gMap),n})})}}(this)):(this.inProgress=!1,this.rebuildAll(this.scope,!0,!0)))},r.prototype.createChild=function(t,e){var n,i;return i=this.scope.$new(!1),this.setChildScope(i,t),i.$watch("model",function(t){return function(e,n){return e!==n?t.setChildScope(i,e):void 0}}(this),!0),i["static"]=this.scope["static"],n=new l(i,this.attrs,e,this.defaults,t),null==t[this.idKey]?void this.$log.error("Polyline model has no id to assign a child to.\nThis is required for performance. Please assign id,\nor redirect id to a different key."):(this.plurals.put(t[this.idKey],n),n)},r.prototype.setChildScope=function(t,e){return _.each(this.scopePropNames,function(n){return function(i){var o,r;return o=i+"Key",r="self"===n[o]?e:e[n[o]],r!==t[i]?t[i]=r:void 0}}(this)),t.model=e},r.prototype.modelKeyComparison=function(t,e){return _.isEqual(this.evalModelHandle(t,this.scope.path),this.evalModelHandle(e,this.scope.path))},r}(r)}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapRectangleParentModel",["uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapRectangleOptionsBuilder",function(t,e,i,o){var r;return r=function(o){function r(e,n,i,o,r){var s,a,l,u,p,c,h,d,f,g,m;this.scope=e,this.attrs=i,this.map=o,this.DEFAULTS=r,s=void 0,u=!1,d=[],h=void 0,p=function(t){return function(){return t.isTrue(i.fit)?t.fitMapBounds(t.map,s):void 0}}(this),l=function(n){return function(){var i,o;return null!=e.bounds&&null!=(null!=(i=e.bounds)?i.sw:void 0)&&null!=(null!=(o=e.bounds)?o.ne:void 0)&&n.validateBoundPoints(e.bounds)?(s=n.convertBoundPoints(e.bounds),t.info("new new bounds created: "+f)):null!=e.bounds.getNorthEast&&null!=e.bounds.getSouthWest?s=e.bounds:"undefined"!=typeof bound&&null!==bound?t.error("Invalid bounds for newValue: "+JSON.stringify(e.bounds)):void 0}}(this),l(),f=new google.maps.Rectangle(this.buildOpts(s)),t.info("rectangle created: "+f),g=!1,m=function(){return function(){var t,n,i;return t=f.getBounds(),n=t.getNorthEast(),i=t.getSouthWest(),g?void 0:e.$evalAsync(function(e){return null!=e.bounds&&null!=e.bounds.sw&&null!=e.bounds.ne&&(e.bounds.ne={latitude:n.lat(),longitude:n.lng()},e.bounds.sw={latitude:i.lat(),longitude:i.lng()}),null!=e.bounds.getNorthEast&&null!=e.bounds.getSouthWest?e.bounds=t:void 0})}}(this),c=function(t){return function(){return p(),t.removeEvents(d),d.push(google.maps.event.addListener(f,"dragstart",function(){return u=!0})),d.push(google.maps.event.addListener(f,"dragend",function(){return u=!1,m()})),d.push(google.maps.event.addListener(f,"bounds_changed",function(){return u?void 0:m()}))}}(this),a=function(t){return function(){return t.removeEvents(d),null!=h&&t.removeEvents(h),f.setMap(null)}}(this),null!=s&&c(),e.$watch("bounds",function(t,e){var n;if(!(_.isEqual(t,e)&&null!=s||u))return g=!0,null==t?void a():(null==s?n=!0:p(),l(),f.setBounds(s),g=!1,n&&null!=s?c():void 0)},!0),this.setMyOptions=function(t){return function(e,n){return _.isEqual(e,n)||null==s||null==e?void 0:f.setOptions(t.buildOpts(s))}}(this),this.props.push("bounds"),this.watchProps(this.props),null!=i.events&&(h=this.setEvents(f,e,e),e.$watch("events",function(t){return function(n,i){return _.isEqual(n,i)?void 0:(null!=h&&t.removeEvents(h),h=t.setEvents(f,e,e))}}(this))),e.$on("$destroy",function(){return function(){return a()}}(this)),t.info(this)}return n(r,o),r.include(e),r.include(i),r}(o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapSearchBoxParentModel",["uiGmapBaseObject","uiGmapLogger","uiGmapEventsHelper","$timeout","$http","$templateCache",function(n,o,r){var s;return s=function(n){function s(n,i,r,s,a,l,u){var p;return this.scope=n,this.element=i,this.attrs=r,this.gMap=s,this.ctrlPosition=a,this.template=l,this.$log=null!=u?u:o,this.setVisibility=t(this.setVisibility,this),this.getBounds=t(this.getBounds,this),this.setBounds=t(this.setBounds,this),this.createSearchBox=t(this.createSearchBox,this),this.addToParentDiv=t(this.addToParentDiv,this),this.addAsMapControl=t(this.addAsMapControl,this),this.init=t(this.init,this),null==this.attrs.template?void this.$log.error("template attribute for the search-box directive is mandatory. Places Search Box creation aborted!!"):(e.isUndefined(this.scope.options)&&(this.scope.options={},this.scope.options.visible=!0),e.isUndefined(this.scope.options.visible)&&(this.scope.options.visible=!0),this.visible=n.options.visible,p=e.element("<div></div>"),p.append(this.template),this.input=p.find("input")[0],void this.init())}return i(s,n),s.include(r),s.prototype.init=function(){return this.createSearchBox(),this.scope.$watch("options",function(t){return function(n){return e.isObject(n)&&(null!=n.bounds&&t.setBounds(n.bounds),null!=n.visible&&t.visible!==n.visible)?t.setVisibility(n.visible):void 0}}(this),!0),null!=this.attrs.parentdiv?this.addToParentDiv():this.addAsMapControl(),this.listener=google.maps.event.addListener(this.searchBox,"places_changed",function(t){return function(){return t.places=t.searchBox.getPlaces()}}(this)),this.listeners=this.setEvents(this.searchBox,this.scope,this.scope),this.$log.info(this),this.scope.$on("$destroy",function(t){return function(){return t.searchBox=null}}(this))},s.prototype.addAsMapControl=function(){return this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input)},s.prototype.addToParentDiv=function(){return this.parentDiv=e.element(document.getElementById(this.scope.parentdiv)),this.parentDiv.append(this.input)},s.prototype.createSearchBox=function(){return this.searchBox=new google.maps.places.SearchBox(this.input,this.scope.options)},s.prototype.setBounds=function(t){if(e.isUndefined(t.isEmpty))this.$log.error("Error: SearchBoxParentModel setBounds. Bounds not an instance of LatLngBounds.");else if(t.isEmpty()===!1&&null!=this.searchBox)return this.searchBox.setBounds(t)},s.prototype.getBounds=function(){return this.searchBox.getBounds()},s.prototype.setVisibility=function(t){return null!=this.attrs.parentdiv?t===!1?this.parentDiv.addClass("ng-hide"):this.parentDiv.removeClass("ng-hide"):t===!1?this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].clear():this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input),this.visible=t},s}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapWindowsParentModel",["uiGmapIWindowParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapWindowChildModel","uiGmapLinked","uiGmap_async","uiGmapLogger","$timeout","$compile","$http","$templateCache","$interpolate","uiGmapPromise",function(n,o,r,s,a,l,u,p,c,h,d,f,g){var m;return m=function(n){function m(e,n,i,o,s,l){this.gMap=s,this.markersScope=l,this.interpolateContent=t(this.interpolateContent,this),this.setChildScope=t(this.setChildScope,this),this.createWindow=t(this.createWindow,this),this.setContentKeys=t(this.setContentKeys,this),this.pieceMealWindows=t(this.pieceMealWindows,this),this.createAllNewWindows=t(this.createAllNewWindows,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopesWindows=t(this.createChildScopesWindows,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.onDestroy=t(this.onDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.go=t(this.go,this),m.__super__.constructor.call(this,e,n,i,o,p,c,h,d),this.windows=new r,this.scopePropNames=["coords","template","templateUrl","templateParameter","isIconVisibleOnClick","closeClick","options","show"],_.each(this.scopePropNames,function(t){return function(e){return t[e+"Key"]=void 0}}(this)),this.linked=new a(e,n,i,o),this.models=void 0,this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.firstWatchModels=!0,this.$log.info(self),this.parentScope=void 0,this.go(e)}return i(m,n),m.include(o),m.prototype.go=function(t){return this.watchOurScope(t),this.doRebuildAll=null!=this.scope.doRebuildAll?this.scope.doRebuildAll:!1,t.$watch("doRebuildAll",function(t){return function(e,n){return e!==n?t.doRebuildAll=e:void 0}}(this)),this.createChildScopesWindows()},m.prototype.watchModels=function(t){var e;return e=null!=this.markersScope?"markerModelsUpdate":"models",t.$watch(e,function(e){return function(n,i){var o;return!_.isEqual(n,i)||e.firstWatchModels?(e.firstWatchModels=!1,e.doRebuildAll||e.doINeedToWipe(t.models)?e.rebuildAll(t,!0,!0):(o=0===e.windows.length,null!=e.existingPieces?_.last(e.existingPieces._content).then(function(){return e.createChildScopesWindows(o)}):e.createChildScopesWindows(o))):void 0}}(this),!0)},m.prototype.doINeedToWipe=function(t){var e;return e=null!=t?0===t.length:!0,this.windows.length>0&&e},m.prototype.rebuildAll=function(t,e,n){return this.onDestroy(n).then(function(t){return function(){return e?t.createChildScopesWindows():void 0}}(this))},m.prototype.onDestroy=function(t){return l.promiseLock(this,g.promiseTypes["delete"],void 0,void 0,function(e){return function(){return l.each(e.windows.values(),function(t){return t.destroy()},!1).then(function(){return t&&delete e.windows,e.windows=new r})}}(this))},m.prototype.watchDestroy=function(t){return t.$on("$destroy",function(e){return function(){return e.firstWatchModels=!0,e.firstTime=!0,e.rebuildAll(t,!1,!0)}}(this))},m.prototype.watchOurScope=function(t){return _.each(this.scopePropNames,function(e){return function(n){var i;return i=n+"Key",e[i]="function"==typeof t[n]?t[n]():t[n]}}(this))},m.prototype.createChildScopesWindows=function(t){var n,i,o;return null==t&&(t=!0),this.isIconVisibleOnClick=!0,e.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),n=e.isUndefined(this.linked.scope.models),!n||void 0!==this.markersScope&&void 0!==(null!=(i=this.markersScope)?i.markerModels:void 0)&&void 0!==(null!=(o=this.markersScope)?o.models:void 0)?null!=this.gMap?null!=this.linked.scope.models?(this.watchIdKey(this.linked.scope),t?this.createAllNewWindows(this.linked.scope,!1):this.pieceMealWindows(this.linked.scope,!1)):(this.parentScope=this.markersScope,this.watchIdKey(this.parentScope),t?this.createAllNewWindows(this.markersScope,!0,"markerModels",!1):this.pieceMealWindows(this.markersScope,!0,"markerModels",!1)):void 0:void this.$log.error("No models to create windows from! Need direct models or models derived from markers!")},m.prototype.watchIdKey=function(t){return this.setIdKey(t),t.$watch("idKey",function(e){return function(n,i){return n!==i&&null==n?(e.idKey=n,e.rebuildAll(t,!0,!0)):void 0}}(this))},m.prototype.createAllNewWindows=function(t,e,n,i){var o;return null==n&&(n="models"),null==i&&(i=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),this.setContentKeys(t.models),this.didQueueInitPromise(this,t)?void 0:(o=null,l.promiseLock(this,g.promiseTypes.create,"createAllNewWindows",function(t){return o=t},function(i){return function(){return l.each(t.models,function(r){var s,a;
return s=e&&null!=(a=i.getItem(t,n,r[i.idKey]))?a.gMarker:void 0,o||(!s&&i.markersScope&&u.error("Unable to get gMarker from markersScope!"),i.createWindow(r,s,i.gMap)),o},l.chunkSizeFrom(t.chunk)).then(function(){return i.firstTime=!1})}}(this)))},m.prototype.pieceMealWindows=function(t,e,n,i){var o,r;return null==n&&(n="models"),null==i&&(i=!0),t.$$destroyed?void 0:(o=null,r=null,this.models=t.models,null!=t&&null!=t.models&&t.models.length>0&&this.windows.length>0?l.promiseLock(this,g.promiseTypes.update,"pieceMeal",function(t){return o=t},function(e){return function(){return g.promise(function(){return e.figureOutState(e.idKey,t,e.windows,e.modelKeyComparison)}).then(function(n){return r=n,l.each(r.removals,function(t){return null!=t?(e.windows.remove(t.id),null!=t.destroy&&t.destroy(!0),o):void 0},l.chunkSizeFrom(t.chunk))}).then(function(){return l.each(r.adds,function(i){var r,s;if(r=null!=(s=e.getItem(t,n,i[e.idKey]))?s.gMarker:void 0,!r)throw"Gmarker undefined";return e.createWindow(i,r,e.gMap),o})})}}(this)):(u.debug("pieceMealWindows: rebuildAll"),this.rebuildAll(this.scope,!0,!0)))},m.prototype.setContentKeys=function(t){return t.length>0?this.contentKeys=Object.keys(t[0]):void 0},m.prototype.createWindow=function(t,e,n){var i,o,r,a,l,u;return o=this.linked.scope.$new(!1),this.setChildScope(o,t),o.$watch("model",function(t){return function(e,n){return e!==n?t.setChildScope(o,e):void 0}}(this),!0),r={html:function(e){return function(){return e.interpolateContent(e.linked.element.html(),t)}}(this)},this.DEFAULTS=this.scopeOrModelVal(this.optionsKey,this.scope,t)||{},a=this.createWindowOptions(e,o,r.html(),this.DEFAULTS),i=new s(t,o,a,this.isIconVisibleOnClick,n,null!=(l=this.markersScope)&&null!=(u=l.markerModels.get(t[this.idKey]))?u.scope:void 0,r,!1,!0),null==t[this.idKey]?void this.$log.error("Window model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.windows.put(t[this.idKey],i),i)},m.prototype.setChildScope=function(t,e){return _.each(this.scopePropNames,function(n){return function(i){var o,r;return o=i+"Key",r="self"===n[o]?e:e[n[o]],r!==t[i]?t[i]=r:void 0}}(this)),t.model=e},m.prototype.interpolateContent=function(t,e){var n,i,o,r,s,a;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(n=f(t),i={},a=this.contentKeys,r=0,s=a.length;s>r;r++)o=a[r],i[o]=e[o];return n(i)}},m}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapCircle",["uiGmapICircle","uiGmapCircleParentModel",function(t,e){return _.extend(t,{link:function(t,n,i,o){return o.getScope().deferred.promise.then(function(){return function(o){return new e(t,n,i,o)}}(this))}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapControl",["uiGmapIControl","$http","$templateCache","$compile","$controller","uiGmapGoogleMapApi",function(n,o,r,s,a,l){var u;return u=function(u){function p(){this.link=t(this.link,this),p.__super__.constructor.call(this)}return i(p,u),p.prototype.link=function(t,i,u,p){return l.then(function(i){return function(l){var u,c;return e.isUndefined(t.template)?void i.$log.error("mapControl: could not find a valid template property"):(u=e.isDefined(t.index&&!isNaN(parseInt(t.index)))?parseInt(t.index):void 0,c=e.isDefined(t.position)?t.position.toUpperCase().replace(/-/g,"_"):"TOP_CENTER",l.ControlPosition[c]?n.mapPromise(t,p).then(function(n){var l,p;return l=void 0,p=e.element("<div></div>"),o.get(t.template,{cache:r}).success(function(n){var i,o;return o=t.$new(),p.append(n),e.isDefined(t.controller)&&(i=a(t.controller,{$scope:o}),p.children().data("$ngControllerController",i)),l=s(p.children())(o),u?l[0].index=u:void 0}).error(function(){return i.$log.error("mapControl: template could not be found")}).then(function(){return n.controls[google.maps.ControlPosition[c]].push(l[0])})}):void i.$log.error("mapControl: invalid position property"))}}(this))},p}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapDragZoom",["uiGmapCtrlHandle","uiGmapPropertyAction",function(t,e){return{restrict:"EMA",transclude:!0,template:'<div class="angular-google-map-dragzoom" ng-transclude style="display: none"></div>',require:"^uiGmapGoogleMap",scope:{keyboardkey:"=",options:"=",spec:"="},controller:["$scope","$element",function(e,n){return e.ctrlType="uiGmapDragZoom",_.extend(this,t.handle(e,n))}],link:function(n,i,o,r){return t.mapPromise(n,r).then(function(t){var i,o,r;return i=function(e){return t.enableKeyDragZoom(e),n.spec?n.spec.enableKeyDragZoom(e):void 0},o=new e(function(t,e){return e?i({key:e}):i()}),r=new e(function(t,e){return e?i(e):void 0}),n.$watch("keyboardkey",o.sic),o.sic(n.keyboardkey),n.$watch("options",r.sic),r.sic(n.options)})}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapDrawingManager",["uiGmapIDrawingManager","uiGmapDrawingManagerParentModel",function(t,e){return _.extend(t,{link:function(t,n,i,o){return o.getScope().deferred.promise.then(function(o){return new e(t,n,i,o)})}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapApiFreeDrawPolygons",["uiGmapLogger","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapDrawFreeHandChildModel","uiGmapLodash",function(e,n,o,r,s){var a;return a=function(n){function a(){return this.link=t(this.link,this),a.__super__.constructor.apply(this,arguments)}return i(a,n),a.include(o),a.prototype.restrict="EMA",a.prototype.replace=!0,a.prototype.require="^uiGmapGoogleMap",a.prototype.scope={polygons:"=",draw:"=",revertmapoptions:"="},a.prototype.link=function(t,n,i,o){return this.mapPromise(t,o).then(function(){return function(n){var i,o;return t.polygons?_.isArray(t.polygons)?(i=new r(n,t.revertmapoptions),o=void 0,t.draw=function(){return"function"==typeof o&&o(),i.engage(t.polygons).then(function(){var e;return e=!0,o=t.$watchCollection("polygons",function(t,n){var i;return e||t===n?void(e=!1):(i=s.differenceObjects(n,t),i.forEach(function(t){return t.setMap(null)}))})})}):e.error("Free Draw Polygons must be of type Array!"):e.error("No polygons to bind to!")}}(this))},a}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapICircle",[function(){var t;return t={},{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{center:"=center",radius:"=radius",stroke:"=stroke",fill:"=fill",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"=",events:"="}}}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIControl",["uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(t,e,i){var o;return o=function(t){function o(){this.restrict="EA",this.replace=!0,this.require="^uiGmapGoogleMap",this.scope={template:"@template",position:"@position",controller:"@controller",index:"@index"},this.$log=e}return n(o,t),o.extend(i),o.prototype.link=function(){throw new Exception("Not implemented!!")},o}(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapIDrawingManager",[function(){return{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{"static":"@",control:"=",options:"="}}}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIMarker",["uiGmapBaseObject","uiGmapCtrlHandle",function(t,e){var i;return i=function(t){function i(){this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope=_.extend(this.scope||{},i.scopeKeys)}return n(i,t),i.scopeKeys={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events",fit:"=fit",idKey:"=idkey",control:"=control"},i.keys=_.keys(i.scopeKeys),i.extend(e),i}(t)}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolygon",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(t,e,i,o){var r;return r=function(e){function r(){}return n(r,e),r.include(t),r.extend(o),r.prototype.restrict="EMA",r.prototype.replace=!0,r.prototype.require="^uiGmapGoogleMap",r.prototype.scope={path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",fill:"=",icons:"=icons",visible:"=","static":"=",events:"=",zIndex:"=zindex",fit:"=",control:"=control"},r.prototype.DEFAULTS={},r.prototype.$log=i,r}(e)}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolyline",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(t,e,i,o){var r;return r=function(e){function r(){}return n(r,e),r.include(t),r.extend(o),r.prototype.restrict="EMA",r.prototype.replace=!0,r.prototype.require="^uiGmapGoogleMap",r.prototype.scope={path:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=",visible:"=","static":"=",fit:"=",events:"="},r.prototype.DEFAULTS={},r.prototype.$log=i,r}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapIRectangle",[function(){var t;return t={},{restrict:"EMA",require:"^uiGmapGoogleMap",replace:!0,scope:{bounds:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",fill:"=",visible:"=",events:"="}}}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIWindow",["uiGmapBaseObject","uiGmapChildEvents","uiGmapCtrlHandle",function(t,e,i){var o;return o=function(t){function o(){this.restrict="EMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require="^uiGmapGoogleMap",this.replace=!0,this.scope={coords:"=coords",template:"=template",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options",control:"=control",show:"=show"}}return n(o,t),o.include(e),o.extend(i),o}(t)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMap",["$timeout","$q","uiGmapLogger","uiGmapGmapUtil","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapIsReady","uiGmapuuid","uiGmapExtendGWin","uiGmapExtendMarkerClusterer","uiGmapGoogleMapsUtilV3","uiGmapGoogleMapApi","uiGmapEventsHelper",function(i,r,s,a,l,u,p,c,h,d,f,g,m){var v,y,w;return v=void 0,w=[f,h,d],y=function(r){function l(){this.link=t(this.link,this);var e,n;e=function(t){var e,n;return n=void 0,t.$on("$destroy",function(){return p.reset()}),e=u.handle(t),t.ctrlType="Map",t.deferred.promise.then(function(){return w.forEach(function(t){return t.init()})}),e.getMap=function(){return t.map},n=_.extend(this,e)},this.controller=["$scope",e],n=this}return o(l,r),l.include(a),l.prototype.restrict="EMA",l.prototype.transclude=!0,l.prototype.replace=!1,l.prototype.template='<div class="angular-google-map"><div class="angular-google-map-container"></div><div ng-transclude style="display: none"></div></div>',l.prototype.scope={center:"=",zoom:"=",dragging:"=",control:"=",options:"=",events:"=",eventOpts:"=",styles:"=",bounds:"=",update:"="},l.prototype.link=function(t,o,r){var a,l;return a=[],t.$on("$destroy",function(){return m.removeEvents(a)}),t.idleAndZoomChanged=!1,null==t.center?void(l=t.$watch("center",function(e){return function(){return t.center?(l(),e.link(t,o,r)):void 0}}(this))):g.then(function(l){return function(u){var h,d,f,g,y,w,b,M,k,x,C,G,P,D,S,L,O,E;if(v={mapTypeId:u.MapTypeId.ROADMAP},S=p.spawn(),x=function(){return S.deferred.resolve({instance:S.instance,map:O})},!l.validateCoords(t.center))return void s.error("angular-google-maps: could not find a valid center property");if(!e.isDefined(t.zoom))return void s.error("angular-google-maps: map zoom property not set");if(g=e.element(o),g.addClass("angular-google-map"),k={options:{}},r.options&&(k.options=t.options),r.styles&&(k.styles=t.styles),r.type&&(L=r.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(L)?k.mapTypeId=google.maps.MapTypeId[r.type.toUpperCase()]:s.error("angular-google-maps: invalid map type '"+r.type+"'")),b=e.extend({},v,k,{center:l.getCoords(t.center),zoom:t.zoom,bounds:t.bounds}),O=new google.maps.Map(g.find("div")[1],b),O.uiGmap_id=c.generate(),f=!1,a.push(google.maps.event.addListenerOnce(O,"idle",function(){return t.deferred.resolve(O),x()})),d=r.events&&null!=(null!=(E=t.events)?E.blacklist:void 0)?t.events.blacklist:[],_.isString(d)&&(d=[d]),M=function(e,n,i){return _.contains(d,e)?void 0:(i&&i(),a.push(google.maps.event.addListener(O,e,function(){var e;return(null!=(e=t.update)?e.lazy:void 0)?void 0:n()})))},_.contains(d,"all")||(M("dragstart",function(){return f=!0,t.$evalAsync(function(t){return null!=t.dragging?t.dragging=f:void 0})}),M("dragend",function(){return f=!1,t.$evalAsync(function(t){return null!=t.dragging?t.dragging=f:void 0})}),M("drag",function(){var n,o,r,s;return n=O.center,i(function(){var i;return i=t,e.isDefined(i.center.type)?(i.center.coordinates[1]=n.lat(),i.center.coordinates[0]=n.lng()):(i.center.latitude=n.lat(),i.center.longitude=n.lng())},null!=(o=t.eventOpts)&&null!=(r=o.debounce)&&null!=(s=r.debounce)?s.dragMs:void 0)}),D=!1,P=!1,M("zoom_changed",function(){var e,n;if(!D)return t.zoom!==O.zoom?(P=!0,i(function(){return t.zoom=O.zoom,P=!1},null!=(e=t.eventOpts)&&null!=(n=e.debounce)?n.zoomMs:void 0)):void 0}),G=!1,C=!1,M("center_changed",function(){var n,o,r;return n=O.center,G?void 0:(C=!0,i(function(){var i;return i=t,O.dragging||(e.isDefined(i.center.type)?(i.center.coordinates[1]!==n.lat()&&(i.center.coordinates[1]=n.lat()),i.center.coordinates[0]!==n.lng()&&(i.center.coordinates[0]=n.lng())):(i.center.latitude!==n.lat()&&(i.center.latitude=n.lat()),i.center.longitude!==n.lng()&&(i.center.longitude=n.lng()))),C=!1},null!=(o=t.eventOpts)&&null!=(r=o.debounce)?r.centerMs:void 0))}),M("idle",function(){var i,o,r;return i=O.getBounds(),o=i.getNorthEast(),r=i.getSouthWest(),t.$evalAsync(function(i){var s;return s=O.center,e.isDefined(i.center.type)?(i.center.coordinates[1]!==s.lat()&&(i.center.coordinates[1]=s.lat()),i.center.coordinates[0]!==s.lng()&&(i.center.coordinates[0]=s.lng())):(i.center.latitude!==s.lat()&&(i.center.latitude=s.lat()),i.center.longitude!==s.lng()&&(i.center.longitude=s.lng())),null!==i.bounds&&i.bounds!==n&&void 0!==i.bounds?(i.bounds.northeast={latitude:o.lat(),longitude:o.lng()},i.bounds.southwest={latitude:r.lat(),longitude:r.lng()},i.zoom=O.zoom,t.idleAndZoomChanged=!t.idleAndZoomChanged):void 0})})),e.isDefined(t.events)&&null!==t.events&&e.isObject(t.events)){w=function(e){return function(){return t.events[e].apply(t,[O,e,arguments])}},h=[];for(y in t.events)t.events.hasOwnProperty(y)&&e.isFunction(t.events[y])&&h.push(google.maps.event.addListener(O,y,w(y)));a.concat(h)}return O.getOptions=function(){return b},t.map=O,null!=r.control&&null!=t.control&&(t.control.refresh=function(t){var e;if(null!=O)return google.maps.event.trigger(O,"resize"),null!=(null!=t?t.latitude:void 0)&&null!=(null!=t?t.latitude:void 0)?(e=l.getCoords(t),l.isTrue(r.pan)?O.panTo(e):O.setCenter(e)):void 0},t.control.getGMap=function(){return O},t.control.getMapOptions=function(){return b},t.control.getCustomEventListeners=function(){return h},t.control.removeEvents=function(t){return m.removeEvents(t)}),t.$watch("center",function(e,n){var i;if(e!==n&&!C&&(i=l.getCoords(t.center),i.lat()!==O.center.lat()||i.lng()!==O.center.lng()))return G=!0,f||(l.validateCoords(e)||s.error("Invalid center for newValue: "+JSON.stringify(e)),l.isTrue(r.pan)&&t.zoom===O.zoom?O.panTo(i):O.setCenter(i)),G=!1},!0),t.$watch("zoom",function(e,n){var o,r;if(!_.isEqual(e,n)&&O.getZoom()!==t.zoom)return D=!0,i(function(){return O.setZoom(e),D=!1},(null!=(o=t.eventOpts)&&null!=(r=o.debounce)?r.zoomMs:void 0)+20,!1)}),t.$watch("bounds",function(t,e){var n,i,o;if(t!==e)return null==t.northeast.latitude||null==t.northeast.longitude||null==t.southwest.latitude||null==t.southwest.longitude?void s.error("Invalid map bounds for new value: "+JSON.stringify(t)):(i=new google.maps.LatLng(t.northeast.latitude,t.northeast.longitude),o=new google.maps.LatLng(t.southwest.latitude,t.southwest.longitude),n=new google.maps.LatLngBounds(o,i),O.fitBounds(n))}),["options","styles"].forEach(function(e){return t.$watch(e,function(t,e){var n;return n=this.exp,_.isEqual(t,e)?void 0:(k.options=t,null!=O?O.setOptions(k):void 0)})},!0)}}(this))},l}(l)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarker",["uiGmapIMarker","uiGmapMarkerChildModel","uiGmapMarkerManager","uiGmapLogger",function(e,n,o,r){var s;return s=function(s){function a(){this.link=t(this.link,this),a.__super__.constructor.call(this),this.template='<span class="angular-google-map-marker" ng-transclude></span>',r.info(this)}return i(a,s),a.prototype.controller=["$scope","$element",function(t,n){return t.ctrlType="Marker",_.extend(this,e.handle(t,n))}],a.prototype.link=function(t,i,r,s){var a;return a=e.mapPromise(t,s),a.then(function(){return function(i){var r,s,a,l,u,p;return a=new o(i),l=_.object(e.keys,e.keys),u=new n(t,t,l,i,{},r=!0,a,s=!1,p=!1),u.deferred.promise.then(function(e){return t.deferred.resolve(e)}),null!=t.control?t.control.getGMarkers=a.getGMarkers:void 0}}(this)),t.$on("$destroy",function(){return function(){var t;return"undefined"!=typeof t&&null!==t&&t.clear(),t=null}}(this))},a}(e)}])}.call(this),function(){var t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarkers",["uiGmapIMarker","uiGmapPlural","uiGmapMarkersParentModel","uiGmap_sync","uiGmapLogger",function(t,e,i,o,r){var s;return s=function(o){function s(){s.__super__.constructor.call(this),this.template='<span class="angular-google-map-markers" ng-transclude></span>',e.extend(this,{doRebuildAll:"=dorebuildall",doCluster:"=docluster",clusterOptions:"=clusteroptions",clusterEvents:"=clusterevents",modelsByRef:"=modelsbyref"}),r.info(this)}return n(s,o),s.prototype.controller=["$scope","$element",function(e,n){return e.ctrlType="Markers",_.extend(this,t.handle(e,n))}],s.prototype.link=function(e,n,o,r){var s,a;return s=void 0,a=function(){return null!=e.control&&(e.control.getGMarkers=function(){var t;return null!=(t=s.gMarkerManager)?t.getGMarkers():void 0},e.control.getChildMarkers=function(){return s.markerModels}),e.deferred.resolve()},t.mapPromise(e,r).then(function(t){var l;return l=r.getScope(),l.$watch("idleAndZoomChanged",function(){return _.defer(s.gMarkerManager.draw)}),s=new i(e,n,o,t),_.last(s.existingPieces._content).then(function(){return a()})})},s}(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPlural",[function(){return{extend:function(t,e){return _.extend(t.scope||{},e||{},{idKey:"=idkey",doRebuildAll:"=dorebuildall",models:"=models",chunk:"=chunk"})}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygon",["uiGmapIPolygon","$timeout","uiGmaparray-sync","uiGmapPolygonChildModel",function(e,n,o,r){var s;return s=function(n){function o(){return this.link=t(this.link,this),o.__super__.constructor.apply(this,arguments)}return i(o,n),o.prototype.link=function(t,n,i,o){var s,a;return s=[],a=e.mapPromise(t,o),null!=t.control&&(t.control.getInstance=this,t.control.polygons=s,t.control.promise=a),a.then(function(e){return function(n){return s.push(new r(t,i,n,e.DEFAULTS))}}(this))},o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygons",["uiGmapIPolygon","$timeout","uiGmaparray-sync","uiGmapPolygonsParentModel","uiGmapPlural",function(n,o,r,s,a){var l;return l=function(n){function o(){this.link=t(this.link,this),o.__super__.constructor.call(this),a.extend(this),this.$log.info(this)}return i(o,n),o.prototype.link=function(t,n,i,o){return o.getScope().deferred.promise.then(function(o){return function(r){var a;return(e.isUndefined(t.path)||null===t.path)&&o.$log.warn("polygons: no valid path attribute found"),t.models||o.$log.warn("polygons: no models found to create from"),a=null,null!=t.control&&(t.control.updateModels=function(e){return t.models=e,a.createChildScopes(!1)},t.control.newModels=function(e){return t.models=e,a.rebuildAll(t,!0,!0)},t.control.clean=function(){return a.rebuildAll(t,!1,!0)}),a=new s(t,n,i,r,o.DEFAULTS)}}(this))},o}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolyline",["uiGmapIPolyline","$timeout","uiGmaparray-sync","uiGmapPolylineChildModel",function(n,o,r,s){var a;return a=function(o){function r(){return this.link=t(this.link,this),r.__super__.constructor.apply(this,arguments)}return i(r,o),r.prototype.link=function(t,i,o,r){return n.mapPromise(t,r).then(function(n){return function(i){return(e.isUndefined(t.path)||null===t.path||!n.validatePath(t.path))&&n.$log.warn("polyline: no valid path attribute found"),new s(t,o,i,n.DEFAULTS)}}(this))},r}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylines",["uiGmapIPolyline","$timeout","uiGmaparray-sync","uiGmapPolylinesParentModel",function(n,o,r,s){var a;return a=function(n){function o(){this.link=t(this.link,this),o.__super__.constructor.call(this),this.scope.idKey="=idkey",this.scope.models="=models",this.$log.info(this)}return i(o,n),o.prototype.link=function(t,n,i,o){return o.getScope().deferred.promise.then(function(o){return function(r){return(e.isUndefined(t.path)||null===t.path)&&o.$log.warn("polylines: no valid path attribute found"),t.models||o.$log.warn("polylines: no models found to create from"),new s(t,n,i,r,o.DEFAULTS)}}(this))},o}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapRectangle",["uiGmapLogger","uiGmapGmapUtil","uiGmapIRectangle","uiGmapRectangleParentModel",function(t,e,n,i){return _.extend(n,{link:function(t,e,n,o){return o.getScope().deferred.promise.then(function(){return function(o){return new i(t,e,n,o)}}(this))}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindow",["uiGmapIWindow","uiGmapGmapUtil","uiGmapWindowChildModel","uiGmapLodash","uiGmapLogger",function(n,o,r,s,a){var l;return l=function(l){function u(){this.link=t(this.link,this),u.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',a.debug(this),this.childWindows=[]}return i(u,l),u.include(o),u.prototype.link=function(t,i,o,r){var s,a;return s=r.length>1&&null!=r[1]?r[1]:void 0,a=null!=s?s.getScope():void 0,this.mapPromise=n.mapPromise(t,r[0]),this.mapPromise.then(function(n){return function(r){var l;return l=!0,e.isDefined(o.isiconvisibleonclick)&&(l=t.isIconVisibleOnClick),s?a.deferred.promise.then(function(){return n.init(t,i,l,r,a)}):void n.init(t,i,l,r)}}(this))},u.prototype.init=function(t,e,n,i,o){var a,l,u,p,c;return l=null!=t.options?t.options:{},p=null!=t&&this.validateCoords(t.coords),null!=(null!=o?o.getGMarker:void 0)&&(u=o.getGMarker()),c=p?this.createWindowOptions(u,t,e.html(),l):l,null!=i&&(a=new r({},t,c,n,i,o,e),this.childWindows.push(a),t.$on("$destroy",function(t){return function(){return t.childWindows=s.withoutObjects(t.childWindows,[a],function(t,e){return t.scope.$id===e.scope.$id}),t.childWindows.length=0}}(this))),null!=t.control&&(t.control.getGWindows=function(t){return function(){return t.childWindows.map(function(t){return t.gWin})}}(this),t.control.getChildWindows=function(t){return function(){return t.childWindows}}(this),t.control.showWindow=function(t){return function(){return t.childWindows.map(function(t){return t.showWindow()})}}(this),t.control.hideWindow=function(t){return function(){return t.childWindows.map(function(t){return t.hideWindow()})}}(this)),null!=this.onChildCreation&&null!=a?this.onChildCreation(a):void 0},u}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindows",["uiGmapIWindow","uiGmapPlural","uiGmapWindowsParentModel","uiGmapPromise","uiGmapLogger",function(e,n,o,r,s){var a;return a=function(e){function a(){this.init=t(this.init,this),this.link=t(this.link,this),a.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarkers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',n.extend(this),s.debug(this)}return i(a,e),a.prototype.link=function(t,e,n,i){var o,s,a;return o=i[0].getScope(),s=i.length>1&&null!=i[1]?i[1]:void 0,a=null!=s?s.getScope():void 0,o.deferred.promise.then(function(o){return function(s){var l,u;return l=(null!=a&&null!=(u=a.deferred)?u.promise:void 0)||r.resolve(),l.then(function(){var r,l;return r=null!=(l=o.parentModel)?l.existingPieces:void 0,r?r.then(function(){return o.init(t,e,n,i,s,a)}):o.init(t,e,n,i,s,a)})}}(this))},a.prototype.init=function(t,e,n,i,r,s){var a;return a=new o(t,e,n,i,r,s),null!=t.control?(t.control.getGWindows=function(){return function(){return a.windows.map(function(t){return t.gWin})}}(this),t.control.getChildWindows=function(){return function(){return a.windows}}(this)):void 0},a}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapGoogleMap",["uiGmapMap",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMarker",["$timeout","uiGmapMarker",function(t,e){return new e(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMarkers",["$timeout","uiGmapMarkers",function(t,e){return new e(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolygon",["uiGmapPolygon",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapCircle",["uiGmapCircle",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolyline",["uiGmapPolyline",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolylines",["uiGmapPolylines",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapRectangle",["uiGmapLogger","uiGmapRectangle",function(t,e){return e}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapWindow",["$timeout","$compile","$http","$templateCache","uiGmapWindow",function(t,e,n,i,o){return new o(t,e,n,i)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapWindows",["$timeout","$compile","$http","$templateCache","$interpolate","uiGmapWindows",function(t,e,n,i,o,r){return new r(t,e,n,i,o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapLayer",["$timeout","uiGmapLogger","uiGmapLayerParentModel",function(e,n,i){var o;return new(o=function(){function e(){this.link=t(this.link,this),this.$log=n,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-layer' ng-transclude></span>",this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return e.prototype.link=function(t,e,n,o){return o.getScope().deferred.promise.then(function(){return function(o){return null!=t.onCreated?new i(t,e,n,o,t.onCreated):new i(t,e,n,o)}}(this))},e}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMapControl",["uiGmapControl",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapDragZoom",["uiGmapDragZoom",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapDrawingManager",["uiGmapDrawingManager",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapFreeDrawPolygons",["uiGmapApiFreeDrawPolygons",function(t){return new t}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapMapType",["$timeout","uiGmapLogger","uiGmapMapTypeParentModel",function(e,n,i){var o;return new(o=function(){function e(){this.link=t(this.link,this),this.$log=n,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",options:"=options",refresh:"=refresh",id:"@"}}return e.prototype.link=function(t,e,n,o){return o.getScope().deferred.promise.then(function(){return function(o){return new i(t,e,n,o)
}}(this))},e}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolygons",["uiGmapPolygons",function(t){return new t}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps").directive("uiGmapSearchBox",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapSearchBoxParentModel","$http","$templateCache","$compile",function(n,i,o,r,s,a){var l;return new(l=function(){function l(){this.link=t(this.link,this),this.$log=i,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-search' ng-transclude></span>",this.replace=!0,this.scope={template:"=template",events:"=events",position:"=?position",options:"=?options",parentdiv:"=?parentdiv"}}return l.prototype.link=function(t,i,l,u){return n.then(function(n){return function(p){return r.get(t.template,{cache:s}).success(function(r){return e.isUndefined(t.events)?void n.$log.error("searchBox: the events property is required"):u.getScope().deferred.promise.then(function(s){var u;return u=e.isDefined(t.position)?t.position.toUpperCase().replace(/-/g,"_"):"TOP_LEFT",p.ControlPosition[u]?new o(t,i,l,s,u,a(r)(t)):void n.$log.error("searchBox: invalid position property")})})}}(this))},l}())}])}.call(this),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapuuid",function(){function t(){}return t.generate=function(){var e=t._gri,n=t._ha;return n(e(32),8)+"-"+n(e(16),4)+"-"+n(16384|e(12),4)+"-"+n(32768|e(14),4)+"-"+n(e(48),12)},t._gri=function(t){return 0>t?0/0:30>=t?0|Math.random()*(1<<t):53>=t?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<t-30)):0/0},t._ha=function(t,e){for(var n=t.toString(16),i=e-n.length,o="0";i>0;i>>>=1,o+=o)1&i&&(n=o+n);return n},t}),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapGoogleMapsUtilV3",function(){return{init:_.once(function(){function e(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"==typeof t.visible&&(t.visible="undefined"==typeof t.isHidden?!0:!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function i(t,e){t.getMarkerClusterer().extend(i,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=e,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function o(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new i(this,t.getStyles())}function r(t,e,i){this.extend(r,google.maps.OverlayView),e=e||[],i=i||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.title_=i.title||"",this.zoomOnClick_=!0,i.zoomOnClick!==n&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,i.averageCenter!==n&&(this.averageCenter_=i.averageCenter),this.ignoreHidden_=!1,i.ignoreHidden!==n&&(this.ignoreHidden_=i.ignoreHidden),this.enableRetinaIcons_=!1,i.enableRetinaIcons!==n&&(this.enableRetinaIcons_=i.enableRetinaIcons),this.imagePath_=i.imagePath||r.IMAGE_PATH,this.imageExtension_=i.imageExtension||r.IMAGE_EXTENSION,this.imageSizes_=i.imageSizes||r.IMAGE_SIZES,this.calculator_=i.calculator||r.CALCULATOR,this.batchSize_=i.batchSize||r.BATCH_SIZE,this.batchSizeIE_=i.batchSizeIE||r.BATCH_SIZE_IE,this.clusterClass_=i.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}function s(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t,e){this.marker_=t,this.handCursorURL_=t.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=a.getSharedCross(e)}function l(t){t=t||{},t.labelContent=t.labelContent||"",t.labelAnchor=t.labelAnchor||new google.maps.Point(0,0),t.labelClass=t.labelClass||"markerLabels",t.labelStyle=t.labelStyle||{},t.labelInBackground=t.labelInBackground||!1,"undefined"==typeof t.labelVisible&&(t.labelVisible=!0),"undefined"==typeof t.raiseOnDrag&&(t.raiseOnDrag=!0),"undefined"==typeof t.clickable&&(t.clickable=!0),"undefined"==typeof t.draggable&&(t.draggable=!1),"undefined"==typeof t.optimized&&(t.optimized=!1),t.crossImage=t.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",t.handCursor=t.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",t.optimized=!1,this.label=new a(this,t.crossImage,t.handCursor),google.maps.Marker.apply(this,arguments)}e.prototype=new google.maps.OverlayView,e.prototype.createInfoBoxDiv_=function(){var t,e,n,i=this,o=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},r=function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),i.enableEventPropagation_||o(t)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(n=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-n.left-n.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,e[t],o));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",r),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},e.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},e.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},e.prototype.panBox_=function(t){var e,n,i=0,o=0;if(!t&&(e=this.getMap(),e instanceof google.maps.Map)){e.getBounds().contains(this.position_)||e.setCenter(this.position_),n=e.getBounds();var r=e.getDiv(),s=r.offsetWidth,a=r.offsetHeight,l=this.pixelOffset_.width,u=this.pixelOffset_.height,p=this.div_.offsetWidth,c=this.div_.offsetHeight,h=this.infoBoxClearance_.width,d=this.infoBoxClearance_.height,f=this.getProjection().fromLatLngToContainerPixel(this.position_);if(f.x<-l+h?i=f.x+l-h:f.x+p+l+h>s&&(i=f.x+p+l+h-s),this.alignBottom_?f.y<-u+d+c?o=f.y+u-d-c:f.y+u+d>a&&(o=f.y+u+d-a):f.y<-u+d?o=f.y+u-d:f.y+c+u+d>a&&(o=f.y+c+u+d-a),0!==i||0!==o){{e.getCenter()}e.panBy(i,o)}}},e.prototype.setBoxStyle_=function(){var t,e;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",e=this.boxStyle_;for(t in e)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);"undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},e.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},n=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=n.ownerDocument.defaultView.getComputedStyle(n,""),t&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0)):document.documentElement.currentStyle&&n.currentStyle&&(e.top=parseInt(n.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(n.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(n.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(n.currentStyle.borderRightWidth,10)||0),e},e.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},e.prototype.draw=function(){this.createInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.div_.style.visibility=this.isHidden_?"hidden":"visible"},e.prototype.setOptions=function(t){"undefined"!=typeof t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),"undefined"!=typeof t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),"undefined"!=typeof t.content&&this.setContent(t.content),"undefined"!=typeof t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),"undefined"!=typeof t.maxWidth&&(this.maxWidth_=t.maxWidth),"undefined"!=typeof t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),"undefined"!=typeof t.alignBottom&&(this.alignBottom_=t.alignBottom),"undefined"!=typeof t.position&&this.setPosition(t.position),"undefined"!=typeof t.zIndex&&this.setZIndex(t.zIndex),"undefined"!=typeof t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),"undefined"!=typeof t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),"undefined"!=typeof t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),"undefined"!=typeof t.isHidden&&(this.isHidden_=t.isHidden),"undefined"!=typeof t.visible&&(this.isHidden_=!t.visible),"undefined"!=typeof t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},e.prototype.setContent=function(t){this.content_=t,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},e.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},e.prototype.getContent=function(){return this.content_},e.prototype.getPosition=function(){return this.position_},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.getVisible=function(){var t;return t="undefined"==typeof this.getMap()||null===this.getMap()?!1:!this.isHidden_},e.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},e.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},e.prototype.open=function(t,e){var n=this;e&&(this.position_=e.getPosition(),this.moveListener_=google.maps.event.addListener(e,"position_changed",function(){n.setPosition(this.getPosition())})),this.setMap(t),this.div_&&this.panBox_()},e.prototype.close=function(){var t;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(t=0;t<this.eventListeners_.length;t++)google.maps.event.removeListener(this.eventListeners_[t]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},function(){function e(t,e){var n=this,i=new google.maps.OverlayView;i.onAdd=function(){n.init_(t,e)},i.draw=function(){},i.onRemove=function(){},i.setMap(t),this.prjov_=i}var n=function(t){var e;switch(t){case"thin":e="2px";break;case"medium":e="4px";break;case"thick":e="6px";break;default:e=t}return e},i=function(t){var e,i={};if(document.defaultView&&document.defaultView.getComputedStyle){if(e=t.ownerDocument.defaultView.getComputedStyle(t,""))return i.top=parseInt(e.borderTopWidth,10)||0,i.bottom=parseInt(e.borderBottomWidth,10)||0,i.left=parseInt(e.borderLeftWidth,10)||0,i.right=parseInt(e.borderRightWidth,10)||0,i}else if(document.documentElement.currentStyle&&t.currentStyle)return i.top=parseInt(n(t.currentStyle.borderTopWidth),10)||0,i.bottom=parseInt(n(t.currentStyle.borderBottomWidth),10)||0,i.left=parseInt(n(t.currentStyle.borderLeftWidth),10)||0,i.right=parseInt(n(t.currentStyle.borderRightWidth),10)||0,i;return i.top=parseInt(t.style["border-top-width"],10)||0,i.bottom=parseInt(t.style["border-bottom-width"],10)||0,i.left=parseInt(t.style["border-left-width"],10)||0,i.right=parseInt(t.style["border-right-width"],10)||0,i},o={x:0,y:0},r=function(){o.x="undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,o.y="undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop};r();var s=function(e){var n=0,i=0;return e=e||t.event,"undefined"!=typeof e.pageX?(n=e.pageX,i=e.pageY):"undefined"!=typeof e.clientX&&(n=e.clientX+o.x,i=e.clientY+o.y),{left:n,top:i}},a=function(e){for(var n=e.offsetLeft,i=e.offsetTop,o=e.offsetParent;null!==o;){o!==document.body&&o!==document.documentElement&&(n-=o.scrollLeft,i-=o.scrollTop);var r=o,s=r.offsetLeft,a=r.offsetTop;if(!s&&!a&&t.getComputedStyle){var l=document.defaultView.getComputedStyle(r,null).MozTransform||document.defaultView.getComputedStyle(r,null).WebkitTransform;if(l&&"string"==typeof l){var u=l.split(",");s+=parseInt(u[4],10)||0,a+=parseInt(u[5],10)||0}}n+=s,i+=a,o=o.offsetParent}return{left:n,top:i}},l=function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},u=function(t,e){"undefined"!=typeof e&&(t.style.opacity=e),"undefined"!=typeof t.style.opacity&&""!==t.style.opacity&&(t.style.filter="alpha(opacity="+100*t.style.opacity+")")};e.prototype.init_=function(e,n){var o,s=this;for(this.map_=e,n=n||{},this.key_=n.key||"shift",this.key_=this.key_.toLowerCase(),this.borderWidths_=i(this.map_.getDiv()),this.veilDiv_=[],o=0;4>o;o++)this.veilDiv_[o]=document.createElement("div"),this.veilDiv_[o].onselectstart=function(){return!1},l(this.veilDiv_[o].style,{backgroundColor:"gray",opacity:.25,cursor:"crosshair"}),l(this.veilDiv_[o].style,n.paneStyle),l(this.veilDiv_[o].style,n.veilStyle),l(this.veilDiv_[o].style,{position:"absolute",overflow:"hidden",display:"none"}),"shift"===this.key_&&(this.veilDiv_[o].style.MozUserSelect="none"),u(this.veilDiv_[o]),"transparent"===this.veilDiv_[o].style.backgroundColor&&(this.veilDiv_[o].style.backgroundColor="white",u(this.veilDiv_[o],0)),this.map_.getDiv().appendChild(this.veilDiv_[o]);this.noZoom_=n.noZoom||!1,this.visualEnabled_=n.visualEnabled||!1,this.visualClass_=n.visualClass||"",this.visualPosition_=n.visualPosition||google.maps.ControlPosition.LEFT_TOP,this.visualPositionOffset_=n.visualPositionOffset||new google.maps.Size(35,0),this.visualPositionIndex_=n.visualPositionIndex||null,this.visualSprite_=n.visualSprite||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/mapfiles/ftr/controls/dragzoom_btn.png",this.visualSize_=n.visualSize||new google.maps.Size(20,20),this.visualTips_=n.visualTips||{},this.visualTips_.off=this.visualTips_.off||"Turn on drag zoom mode",this.visualTips_.on=this.visualTips_.on||"Turn off drag zoom mode",this.boxDiv_=document.createElement("div"),l(this.boxDiv_.style,{border:"4px solid #736AFF"}),l(this.boxDiv_.style,n.boxStyle),l(this.boxDiv_.style,{position:"absolute",display:"none"}),u(this.boxDiv_),this.map_.getDiv().appendChild(this.boxDiv_),this.boxBorderWidths_=i(this.boxDiv_),this.listeners_=[google.maps.event.addDomListener(document,"keydown",function(t){s.onKeyDown_(t)}),google.maps.event.addDomListener(document,"keyup",function(t){s.onKeyUp_(t)}),google.maps.event.addDomListener(this.veilDiv_[0],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(this.veilDiv_[1],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(this.veilDiv_[2],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(this.veilDiv_[3],"mousedown",function(t){s.onMouseDown_(t)}),google.maps.event.addDomListener(document,"mousedown",function(t){s.onMouseDownDocument_(t)}),google.maps.event.addDomListener(document,"mousemove",function(t){s.onMouseMove_(t)}),google.maps.event.addDomListener(document,"mouseup",function(t){s.onMouseUp_(t)}),google.maps.event.addDomListener(t,"scroll",r)],this.hotKeyDown_=!1,this.mouseDown_=!1,this.dragging_=!1,this.startPt_=null,this.endPt_=null,this.mapWidth_=null,this.mapHeight_=null,this.mousePosn_=null,this.mapPosn_=null,this.visualEnabled_&&(this.buttonDiv_=this.initControl_(this.visualPositionOffset_),null!==this.visualPositionIndex_&&(this.buttonDiv_.index=this.visualPositionIndex_),this.map_.controls[this.visualPosition_].push(this.buttonDiv_),this.controlIndex_=this.map_.controls[this.visualPosition_].length-1)},e.prototype.initControl_=function(t){var e,n,i=this;return e=document.createElement("div"),e.className=this.visualClass_,e.style.position="relative",e.style.overflow="hidden",e.style.height=this.visualSize_.height+"px",e.style.width=this.visualSize_.width+"px",e.title=this.visualTips_.off,n=document.createElement("img"),n.src=this.visualSprite_,n.style.position="absolute",n.style.left=-(2*this.visualSize_.width)+"px",n.style.top="0px",e.appendChild(n),e.onclick=function(t){i.hotKeyDown_=!i.hotKeyDown_,i.hotKeyDown_?(i.buttonDiv_.firstChild.style.left=-(0*i.visualSize_.width)+"px",i.buttonDiv_.title=i.visualTips_.on,i.activatedByControl_=!0,google.maps.event.trigger(i,"activate")):(i.buttonDiv_.firstChild.style.left=-(2*i.visualSize_.width)+"px",i.buttonDiv_.title=i.visualTips_.off,google.maps.event.trigger(i,"deactivate")),i.onMouseMove_(t)},e.onmouseover=function(){i.buttonDiv_.firstChild.style.left=-(1*i.visualSize_.width)+"px"},e.onmouseout=function(){i.hotKeyDown_?(i.buttonDiv_.firstChild.style.left=-(0*i.visualSize_.width)+"px",i.buttonDiv_.title=i.visualTips_.on):(i.buttonDiv_.firstChild.style.left=-(2*i.visualSize_.width)+"px",i.buttonDiv_.title=i.visualTips_.off)},e.ondragstart=function(){return!1},l(e.style,{cursor:"pointer",marginTop:t.height+"px",marginLeft:t.width+"px"}),e},e.prototype.isHotKeyDown_=function(e){var n;if(e=e||t.event,n=e.shiftKey&&"shift"===this.key_||e.altKey&&"alt"===this.key_||e.ctrlKey&&"ctrl"===this.key_,!n)switch(e.keyCode){case 16:"shift"===this.key_&&(n=!0);break;case 17:"ctrl"===this.key_&&(n=!0);break;case 18:"alt"===this.key_&&(n=!0)}return n},e.prototype.isMouseOnMap_=function(){var t=this.mousePosn_;if(t){var e=this.mapPosn_,n=this.map_.getDiv();return t.left>e.left&&t.left<e.left+n.offsetWidth&&t.top>e.top&&t.top<e.top+n.offsetHeight}return!1},e.prototype.setVeilVisibility_=function(){var t;if(this.map_&&this.hotKeyDown_&&this.isMouseOnMap_()){var e=this.map_.getDiv();if(this.mapWidth_=e.offsetWidth-(this.borderWidths_.left+this.borderWidths_.right),this.mapHeight_=e.offsetHeight-(this.borderWidths_.top+this.borderWidths_.bottom),this.activatedByControl_){var n=parseInt(this.buttonDiv_.style.left,10)+this.visualPositionOffset_.width,i=parseInt(this.buttonDiv_.style.top,10)+this.visualPositionOffset_.height,o=this.visualSize_.width,r=this.visualSize_.height;for(this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=n+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=n+o+"px",this.veilDiv_[1].style.width=this.mapWidth_-(n+o)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=n+"px",this.veilDiv_[2].style.width=o+"px",this.veilDiv_[2].style.height=i+"px",this.veilDiv_[3].style.top=i+r+"px",this.veilDiv_[3].style.left=n+"px",this.veilDiv_[3].style.width=o+"px",this.veilDiv_[3].style.height=this.mapHeight_-(i+r)+"px",t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="block"}else{for(this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.width=this.mapWidth_+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",t=1;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.width="0px",this.veilDiv_[t].style.height="0px";for(t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="block"}}else for(t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="none"},e.prototype.onKeyDown_=function(t){this.map_&&!this.hotKeyDown_&&this.isHotKeyDown_(t)&&(this.mapPosn_=a(this.map_.getDiv()),this.hotKeyDown_=!0,this.activatedByControl_=!1,this.setVeilVisibility_(),google.maps.event.trigger(this,"activate"))},e.prototype.getMousePoint_=function(t){var e=s(t),n=new google.maps.Point;return n.x=e.left-this.mapPosn_.left-this.borderWidths_.left,n.y=e.top-this.mapPosn_.top-this.borderWidths_.top,n.x=Math.min(n.x,this.mapWidth_),n.y=Math.min(n.y,this.mapHeight_),n.x=Math.max(n.x,0),n.y=Math.max(n.y,0),n},e.prototype.onMouseDown_=function(t){if(this.map_&&this.hotKeyDown_){this.mapPosn_=a(this.map_.getDiv()),this.dragging_=!0,this.startPt_=this.endPt_=this.getMousePoint_(t),this.boxDiv_.style.width=this.boxDiv_.style.height="0px";var e=this.prjov_.getProjection(),n=e.fromContainerPixelToLatLng(this.startPt_);google.maps.event.trigger(this,"dragstart",n)}},e.prototype.onMouseDownDocument_=function(){this.mouseDown_=!0},e.prototype.onMouseMove_=function(t){if(this.mousePosn_=s(t),this.dragging_){this.endPt_=this.getMousePoint_(t);var e=Math.min(this.startPt_.x,this.endPt_.x),n=Math.min(this.startPt_.y,this.endPt_.y),i=Math.abs(this.startPt_.x-this.endPt_.x),o=Math.abs(this.startPt_.y-this.endPt_.y),r=Math.max(0,i-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)),l=Math.max(0,o-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom));this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=e+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=e+i+"px",this.veilDiv_[1].style.width=this.mapWidth_-(e+i)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=e+"px",this.veilDiv_[2].style.width=i+"px",this.veilDiv_[2].style.height=n+"px",this.veilDiv_[3].style.top=n+o+"px",this.veilDiv_[3].style.left=e+"px",this.veilDiv_[3].style.width=i+"px",this.veilDiv_[3].style.height=this.mapHeight_-(n+o)+"px",this.boxDiv_.style.top=n+"px",this.boxDiv_.style.left=e+"px",this.boxDiv_.style.width=r+"px",this.boxDiv_.style.height=l+"px",this.boxDiv_.style.display="block",google.maps.event.trigger(this,"drag",new google.maps.Point(e,n+o),new google.maps.Point(e+i,n),this.prjov_.getProjection())}else this.mouseDown_||(this.mapPosn_=a(this.map_.getDiv()),this.setVeilVisibility_())},e.prototype.onMouseUp_=function(t){var e,n=this;if(this.mouseDown_=!1,this.dragging_){if(this.getMousePoint_(t).x===this.startPt_.x&&this.getMousePoint_(t).y===this.startPt_.y)return void this.onKeyUp_(t);var i=Math.min(this.startPt_.x,this.endPt_.x),o=Math.min(this.startPt_.y,this.endPt_.y),r=Math.abs(this.startPt_.x-this.endPt_.x),s=Math.abs(this.startPt_.y-this.endPt_.y),a=!0;a&&(i+=this.borderWidths_.left,o+=this.borderWidths_.top);var l=this.prjov_.getProjection(),u=l.fromContainerPixelToLatLng(new google.maps.Point(i,o+s)),p=l.fromContainerPixelToLatLng(new google.maps.Point(i+r,o)),c=new google.maps.LatLngBounds(u,p);if(this.noZoom_)this.boxDiv_.style.display="none";else{e=this.map_.getZoom(),this.map_.fitBounds(c),this.map_.getZoom()<e&&this.map_.setZoom(e);var h=l.fromLatLngToContainerPixel(u),d=l.fromLatLngToContainerPixel(p);a&&(h.x-=this.borderWidths_.left,h.y-=this.borderWidths_.top,d.x-=this.borderWidths_.left,d.y-=this.borderWidths_.top),this.boxDiv_.style.left=h.x+"px",this.boxDiv_.style.top=d.y+"px",this.boxDiv_.style.width=Math.abs(d.x-h.x)-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)+"px",this.boxDiv_.style.height=Math.abs(d.y-h.y)-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom)+"px",setTimeout(function(){n.boxDiv_.style.display="none"},1e3)}this.dragging_=!1,this.onMouseMove_(t),google.maps.event.trigger(this,"dragend",c),this.isHotKeyDown_(t)||this.onKeyUp_(t)}},e.prototype.onKeyUp_=function(){var t,e,n,i,o,r,s,a,l=null;if(this.map_&&this.hotKeyDown_){for(this.hotKeyDown_=!1,this.dragging_&&(this.boxDiv_.style.display="none",this.dragging_=!1,e=Math.min(this.startPt_.x,this.endPt_.x),n=Math.min(this.startPt_.y,this.endPt_.y),i=Math.abs(this.startPt_.x-this.endPt_.x),o=Math.abs(this.startPt_.y-this.endPt_.y),r=this.prjov_.getProjection(),s=r.fromContainerPixelToLatLng(new google.maps.Point(e,n+o)),a=r.fromContainerPixelToLatLng(new google.maps.Point(e+i,n)),l=new google.maps.LatLngBounds(s,a)),t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="none";this.visualEnabled_&&(this.buttonDiv_.firstChild.style.left=-(2*this.visualSize_.width)+"px",this.buttonDiv_.title=this.visualTips_.off,this.buttonDiv_.style.display=""),google.maps.event.trigger(this,"deactivate",l)}},google.maps.Map.prototype.enableKeyDragZoom=function(t){this.dragZoom_=new e(this,t)},google.maps.Map.prototype.disableKeyDragZoom=function(){var t,e=this.dragZoom_;if(e){for(t=0;t<e.listeners_.length;++t)google.maps.event.removeListener(e.listeners_[t]);for(this.getDiv().removeChild(e.boxDiv_),t=0;t<e.veilDiv_.length;t++)this.getDiv().removeChild(e.veilDiv_[t]);e.visualEnabled_&&this.controls[e.visualPosition_].removeAt(e.controlIndex_),e.prjov_.setMap(null),this.dragZoom_=null}},google.maps.Map.prototype.keyDragZoomEnabled=function(){return null!==this.dragZoom_},google.maps.Map.prototype.getDragZoomObject=function(){return this.dragZoom_}}(),i.prototype.onAdd=function(){var t,e,n=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){e=t}),google.maps.event.addDomListener(this.div_,"mousedown",function(){t=!0,e=!1}),google.maps.event.addDomListener(this.div_,"click",function(i){if(t=!1,!e){var o,r,s=n.cluster_.getMarkerClusterer();google.maps.event.trigger(s,"click",n.cluster_),google.maps.event.trigger(s,"clusterclick",n.cluster_),s.getZoomOnClick()&&(r=s.getMaxZoom(),o=n.cluster_.getBounds(),s.getMap().fitBounds(o),setTimeout(function(){s.getMap().fitBounds(o),null!==r&&s.getMap().getZoom()>r&&s.getMap().setZoom(r+1)},100)),i.cancelBubble=!0,i.stopPropagation&&i.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",n.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",n.cluster_)})},i.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},i.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},i.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},i.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),n=parseInt(e[0].trim(),10),i=parseInt(e[1].trim(),10),o=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(o),t="<img src='"+this.url_+"' style='position: absolute; top: "+i+"px; left: "+n+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(t+="clip: rect("+-1*i+"px, "+(-1*n+this.width_)+"px, "+(-1*i+this.height_)+"px, "+-1*n+"px);"),t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",this.div_.title="undefined"==typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title,this.div_.style.display=""}this.visible_=!0},i.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var n=this.styles_[e];this.url_=n.url,this.height_=n.height,this.width_=n.width,this.anchorText_=n.anchorText||[0,0],this.anchorIcon_=n.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=n.textColor||"black",this.textSize_=n.textSize||11,this.textDecoration_=n.textDecoration||"none",this.fontWeight_=n.fontWeight||"bold",this.fontStyle_=n.fontStyle||"normal",this.fontFamily_=n.fontFamily||"Arial,sans-serif",this.backgroundPosition_=n.backgroundPosition||"0 0"},i.prototype.setCenter=function(t){this.center_=t},i.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},i.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},o.prototype.getSize=function(){return this.markers_.length},o.prototype.getMarkers=function(){return this.markers_},o.prototype.getCenter=function(){return this.center_
},o.prototype.getMap=function(){return this.map_},o.prototype.getMarkerClusterer=function(){return this.markerClusterer_},o.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers();for(t=0;t<n.length;t++)e.extend(n[t].getPosition());return e},o.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},o.prototype.addMarker=function(t){var e,n,i;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var o=this.markers_.length+1,r=(this.center_.lat()*(o-1)+t.getPosition().lat())/o,s=(this.center_.lng()*(o-1)+t.getPosition().lng())/o;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),n=this.markers_.length,i=this.markerClusterer_.getMaxZoom(),null!==i&&this.map_.getZoom()>i)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n===this.minClusterSize_)for(e=0;n>e;e++)this.markers_[e].setMap(null);else t.setMap(null);return this.updateIcon_(),!0},o.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},o.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},o.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)return void this.clusterIcon_.hide();if(t<this.minClusterSize_)return void this.clusterIcon_.hide();var n=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(i),this.clusterIcon_.show()},o.prototype.isMarkerAlreadyAdded_=function(t){var e;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(t);for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1},r.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){t.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw_()})]},r.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},r.prototype.draw=function(){},r.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},r.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),n=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)n.extend(e[t].getPosition());this.getMap().fitBounds(n)},r.prototype.getGridSize=function(){return this.gridSize_},r.prototype.setGridSize=function(t){this.gridSize_=t},r.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},r.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},r.prototype.getMaxZoom=function(){return this.maxZoom_},r.prototype.setMaxZoom=function(t){this.maxZoom_=t},r.prototype.getStyles=function(){return this.styles_},r.prototype.setStyles=function(t){this.styles_=t},r.prototype.getTitle=function(){return this.title_},r.prototype.setTitle=function(t){this.title_=t},r.prototype.getZoomOnClick=function(){return this.zoomOnClick_},r.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},r.prototype.getAverageCenter=function(){return this.averageCenter_},r.prototype.setAverageCenter=function(t){this.averageCenter_=t},r.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},r.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},r.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},r.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},r.prototype.getImageExtension=function(){return this.imageExtension_},r.prototype.setImageExtension=function(t){this.imageExtension_=t},r.prototype.getImagePath=function(){return this.imagePath_},r.prototype.setImagePath=function(t){this.imagePath_=t},r.prototype.getImageSizes=function(){return this.imageSizes_},r.prototype.setImageSizes=function(t){this.imageSizes_=t},r.prototype.getCalculator=function(){return this.calculator_},r.prototype.setCalculator=function(t){this.calculator_=t},r.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},r.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},r.prototype.getClusterClass=function(){return this.clusterClass_},r.prototype.setClusterClass=function(t){this.clusterClass_=t},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getTotalMarkers=function(){return this.markers_.length},r.prototype.getClusters=function(){return this.clusters_},r.prototype.getTotalClusters=function(){return this.clusters_.length},r.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},r.prototype.addMarkers=function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&this.pushMarkerTo_(t[n]);e||this.redraw_()},r.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",function(){e.ready_&&(this.isAdded=!1,e.repaint())})}t.isAdded=!1,this.markers_.push(t)},r.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!e&&n&&this.repaint(),n},r.prototype.removeMarkers=function(t,e){var n,i,o=!1;for(n=0;n<t.length;n++)i=this.removeMarker_(t[n]),o=o||i;return!e&&o&&this.repaint(),o},r.prototype.removeMarker_=function(t){var e,n=-1;if(this.markers_.indexOf)n=this.markers_.indexOf(t);else for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e]){n=e;break}return-1===n?!1:(t.setMap(null),this.markers_.splice(n,1),!0)},r.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},r.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].remove()},0)},r.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),i=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(n);o.x+=this.gridSize_,o.y-=this.gridSize_;var r=e.fromLatLngToDivPixel(i);r.x-=this.gridSize_,r.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(o),a=e.fromDivPixelToLatLng(r);return t.extend(s),t.extend(a),t},r.prototype.redraw_=function(){this.createClusters_(0)},r.prototype.resetViewport_=function(t){var e,n;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)n=this.markers_[e],n.isAdded=!1,t&&n.setMap(null)},r.prototype.distanceBetweenPoints_=function(t,e){var n=6371,i=(e.lat()-t.lat())*Math.PI/180,o=(e.lng()-t.lng())*Math.PI/180,r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2),s=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),a=n*s;return a},r.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},r.prototype.addToClosestCluster_=function(t){var e,n,i,r,s=4e4,a=null;for(e=0;e<this.clusters_.length;e++)i=this.clusters_[e],r=i.getCenter(),r&&(n=this.distanceBetweenPoints_(r,t.getPosition()),s>n&&(s=n,a=i));a&&a.isMarkerInClusterBounds(t)?a.addMarker(t):(i=new o(this),i.addMarker(t),this.clusters_.push(i))},r.prototype.createClusters_=function(t){var e,n,i,o=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),i=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var r=this.getExtendedBounds(i),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;s>e;e++)n=this.markers_[e],!n.isAdded&&this.isMarkerInBounds_(n,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);s<this.markers_.length?this.timerRefStatic=setTimeout(function(){o.createClusters_(s)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},r.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},r.CALCULATOR=function(t,e){for(var n=0,i="",o=t.length.toString(),r=o;0!==r;)r=parseInt(r/10,10),n++;return n=Math.min(n,e),{text:o,index:n,title:i}},r.BATCH_SIZE=2e3,r.BATCH_SIZE_IE=500,r.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",r.IMAGE_EXTENSION="png",r.IMAGE_SIZES=[53,56,66,78,90],s(a,google.maps.OverlayView),a.getSharedCross=function(t){var e;return"undefined"==typeof a.getSharedCross.crossDiv&&(e=document.createElement("img"),e.style.cssText="position: absolute; z-index: 1000002; display: none;",e.style.marginLeft="-8px",e.style.marginTop="-9px",e.src=t,a.getSharedCross.crossDiv=e),a.getSharedCross.crossDiv},a.prototype.onAdd=function(){var t,e,n,i,o,r,s,l=this,u=!1,p=!1,c=20,h="url("+this.handCursorURL_+")",d=function(t){t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},f=function(){l.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof a.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),a.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){(l.marker_.getDraggable()||l.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(l.marker_,"mouseover",t))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(t){!l.marker_.getDraggable()&&!l.marker_.getClickable()||p||(this.style.cursor=l.marker_.getCursor(),google.maps.event.trigger(l.marker_,"mouseout",t))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(t){p=!1,l.marker_.getDraggable()&&(u=!0,this.style.cursor=h),(l.marker_.getDraggable()||l.marker_.getClickable())&&(google.maps.event.trigger(l.marker_,"mousedown",t),d(t))}),google.maps.event.addDomListener(document,"mouseup",function(e){var n;if(u&&(u=!1,l.eventDiv_.style.cursor="pointer",google.maps.event.trigger(l.marker_,"mouseup",e)),p){if(o){n=l.getProjection().fromLatLngToDivPixel(l.marker_.getPosition()),n.y+=c,l.marker_.setPosition(l.getProjection().fromDivPixelToLatLng(n));try{l.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(f,1406)}catch(r){}}l.crossDiv_.style.display="none",l.marker_.setZIndex(t),i=!0,p=!1,e.latLng=l.marker_.getPosition(),google.maps.event.trigger(l.marker_,"dragend",e)}}),google.maps.event.addListener(l.marker_.getMap(),"mousemove",function(i){var a;u&&(p?(i.latLng=new google.maps.LatLng(i.latLng.lat()-e,i.latLng.lng()-n),a=l.getProjection().fromLatLngToDivPixel(i.latLng),o&&(l.crossDiv_.style.left=a.x+"px",l.crossDiv_.style.top=a.y+"px",l.crossDiv_.style.display="",a.y-=c),l.marker_.setPosition(l.getProjection().fromDivPixelToLatLng(a)),o&&(l.eventDiv_.style.top=a.y+c+"px"),google.maps.event.trigger(l.marker_,"drag",i)):(e=i.latLng.lat()-l.marker_.getPosition().lat(),n=i.latLng.lng()-l.marker_.getPosition().lng(),t=l.marker_.getZIndex(),r=l.marker_.getPosition(),s=l.marker_.getMap().getCenter(),o=l.marker_.get("raiseOnDrag"),p=!0,l.marker_.setZIndex(1e6),i.latLng=l.marker_.getPosition(),google.maps.event.trigger(l.marker_,"dragstart",i)))}),google.maps.event.addDomListener(document,"keydown",function(t){p&&27===t.keyCode&&(o=!1,l.marker_.setPosition(r),l.marker_.getMap().setCenter(s),google.maps.event.trigger(document,"mouseup",t))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){(l.marker_.getDraggable()||l.marker_.getClickable())&&(i?i=!1:(google.maps.event.trigger(l.marker_,"click",t),d(t)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){(l.marker_.getDraggable()||l.marker_.getClickable())&&(google.maps.event.trigger(l.marker_,"dblclick",t),d(t))}),google.maps.event.addListener(this.marker_,"dragstart",function(){p||(o=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(){p||o&&(l.setPosition(c),l.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(){p||o&&l.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){l.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){l.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){l.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){l.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){l.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){l.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){l.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){l.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){l.setStyles()})]},a.prototype.onRemove=function(){var t;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t])},a.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},a.prototype.setContent=function(){var t=this.marker_.get("labelContent");"undefined"==typeof t.nodeType?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.appendChild(t))},a.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},a.prototype.setStyles=function(){var t,e;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",e=this.marker_.get("labelStyle");for(t in e)e.hasOwnProperty(t)&&(this.labelDiv_.style[t]=e[t],this.eventDiv_.style[t]=e[t]);this.setMandatoryStyles()},a.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},a.prototype.setAnchor=function(){var t=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-t.x+"px",this.labelDiv_.style.marginTop=-t.y+"px",this.eventDiv_.style.marginLeft=-t.x+"px",this.eventDiv_.style.marginTop=-t.y+"px"},a.prototype.setPosition=function(t){var e=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof t&&(t=0),this.labelDiv_.style.left=Math.round(e.x)+"px",this.labelDiv_.style.top=Math.round(e.y-t)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},a.prototype.setZIndex=function(){var t=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},a.prototype.setVisible=function(){this.labelDiv_.style.display=this.marker_.get("labelVisible")&&this.marker_.getVisible()?"block":"none",this.eventDiv_.style.display=this.labelDiv_.style.display},s(l,google.maps.Marker),l.prototype.setMap=function(t){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)},t.InfoBox=e,t.Cluster=o,t.ClusterIcon=i,t.MarkerClusterer=r,t.MarkerLabel_=a,t.MarkerWithLabel=l})}}),function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,n,i){e.module("uiGmapgoogle-maps.wrapped").service("uiGmapDataStructures",function(){return{Graph:i(1).Graph,Queue:i(1).Queue}})},function(t,e,n){(function(){t.exports={Graph:n(2),Heap:n(3),LinkedList:n(4),Map:n(5),Queue:n(6),RedBlackTree:n(7),Trie:n(8)}}).call(this)},function(t){(function(){var e,n={}.hasOwnProperty;e=function(){function t(){this._nodes={},this.nodeSize=0,this.edgeSize=0}return t.prototype.addNode=function(t){return this._nodes[t]?void 0:(this.nodeSize++,this._nodes[t]={_outEdges:{},_inEdges:{}})},t.prototype.getNode=function(t){return this._nodes[t]},t.prototype.removeNode=function(t){var e,i,o,r,s;if(i=this._nodes[t]){r=i._outEdges;for(o in r)n.call(r,o)&&this.removeEdge(t,o);s=i._inEdges;for(e in s)n.call(s,e)&&this.removeEdge(e,t);return this.nodeSize--,delete this._nodes[t],i}},t.prototype.addEdge=function(t,e,n){var i,o,r;return null==n&&(n=1),!this.getEdge(t,e)&&(o=this._nodes[t],r=this._nodes[e],o&&r)?(i={weight:n},o._outEdges[e]=i,r._inEdges[t]=i,this.edgeSize++,i):void 0},t.prototype.getEdge=function(t,e){var n,i;return n=this._nodes[t],i=this._nodes[e],n&&i?n._outEdges[e]:void 0},t.prototype.removeEdge=function(t,e){var n,i,o;return i=this._nodes[t],o=this._nodes[e],(n=this.getEdge(t,e))?(delete i._outEdges[e],delete o._inEdges[t],this.edgeSize--,n):void 0},t.prototype.getInEdgesOf=function(t){var e,i,o,r;o=this._nodes[t],i=[],r=null!=o?o._inEdges:void 0;for(e in r)n.call(r,e)&&i.push(this.getEdge(e,t));return i},t.prototype.getOutEdgesOf=function(t){var e,i,o,r;e=this._nodes[t],i=[],r=null!=e?e._outEdges:void 0;for(o in r)n.call(r,o)&&i.push(this.getEdge(t,o));return i},t.prototype.getAllEdgesOf=function(t){var e,n,i,o,r,s,a;if(n=this.getInEdgesOf(t),i=this.getOutEdgesOf(t),0===n.length)return i;for(o=this.getEdge(t,t),e=r=0,s=n.length;s>=0?s>r:r>s;e=s>=0?++r:--r)if(n[e]===o){a=[n[n.length-1],n[e]],n[e]=a[0],n[n.length-1]=a[1],n.pop();break}return n.concat(i)},t.prototype.forEachNode=function(t){var e,i,o;o=this._nodes;for(e in o)n.call(o,e)&&(i=o[e],t(i,e))},t.prototype.forEachEdge=function(t){var e,i,o,r,s,a;s=this._nodes;for(i in s)if(n.call(s,i)){o=s[i],a=o._outEdges;for(r in a)n.call(a,r)&&(e=a[r],t(e))}},t}(),t.exports=e}).call(this)},function(t){(function(){var e,n,i,o;e=function(){function t(t){var e,n,i,o,r,s;for(null==t&&(t=[]),this._data=[void 0],i=0,r=t.length;r>i;i++)n=t[i],null!=n&&this._data.push(n);if(this._data.length>1)for(e=o=2,s=this._data.length;s>=2?s>o:o>s;e=s>=2?++o:--o)this._upHeap(e);this.size=this._data.length-1}return t.prototype.add=function(t){return null!=t?(this._data.push(t),this._upHeap(this._data.length-1),this.size++,t):void 0},t.prototype.removeMin=function(){var t;if(1!==this._data.length)return this.size--,2===this._data.length?this._data.pop():(t=this._data[1],this._data[1]=this._data.pop(),this._downHeap(),t)},t.prototype.peekMin=function(){return this._data[1]},t.prototype._upHeap=function(t){var e,n;for(e=this._data[t];this._data[t]<this._data[i(t)]&&t>1;)n=[this._data[i(t)],this._data[t]],this._data[t]=n[0],this._data[i(t)]=n[1],t=i(t)},t.prototype._downHeap=function(){var t,e,i;for(t=1;n(t<this._data.length)&&(e=n(t),e<this._data.length-1&&this._data[o(t)]<this._data[e]&&(e=o(t)),this._data[e]<this._data[t]);)i=[this._data[t],this._data[e]],this._data[e]=i[0],this._data[t]=i[1],t=e},t}(),i=function(t){return t>>1},n=function(t){return t<<1},o=function(t){return(t<<1)+1},t.exports=e}).call(this)},function(t){(function(){var e;e=function(){function t(t){var e,n,i;for(null==t&&(t=[]),this.head={prev:void 0,value:void 0,next:void 0},this.tail={prev:void 0,value:void 0,next:void 0},this.size=0,n=0,i=t.length;i>n;n++)e=t[n],this.add(e)}return t.prototype.at=function(t){var e,n,i,o,r;if(-this.size<=t&&t<this.size){if(t=this._adjust(t),2*t<this.size)for(e=this.head,n=i=1;t>=i;n=i+=1)e=e.next;else for(e=this.tail,n=o=1,r=this.size-t-1;r>=o;n=o+=1)e=e.prev;return e}},t.prototype.add=function(t,e){var n,i,o,r,s;return null==e&&(e=this.size),-this.size<=e&&e<=this.size?(i={value:t},e=this._adjust(e),0===this.size?this.head=i:0===e?(o=[i,this.head,i],this.head.prev=o[0],i.next=o[1],this.head=o[2]):(n=this.at(e-1),r=[n.next,i,i,n],i.next=r[0],null!=(s=n.next)?s.prev=r[1]:void 0,n.next=r[2],i.prev=r[3]),e===this.size&&(this.tail=i),this.size++,t):void 0},t.prototype.removeAt=function(t){var e,n,i;return null==t&&(t=this.size-1),-this.size<=t&&t<this.size&&0!==this.size?(t=this._adjust(t),1===this.size?(n=this.head.value,this.head.value=this.tail.value=void 0):0===t?(n=this.head.value,this.head=this.head.next,this.head.prev=void 0):(e=this.at(t),n=e.value,e.prev.next=e.next,null!=(i=e.next)&&(i.prev=e.prev),t===this.size-1&&(this.tail=e.prev)),this.size--,n):void 0},t.prototype.remove=function(t){var e;if(null!=t){for(e=this.head;e&&e.value!==t;)e=e.next;if(e)return 1===this.size?this.head.value=this.tail.value=void 0:e===this.head?(this.head=this.head.next,this.head.prev=void 0):e===this.tail?(this.tail=this.tail.prev,this.tail.next=void 0):(e.prev.next=e.next,e.next.prev=e.prev),this.size--,t}},t.prototype.indexOf=function(t,e){var n,i;if(null==e&&(e=0),null==this.head.value&&!this.head.next||e>=this.size)return-1;for(e=Math.max(0,this._adjust(e)),n=this.at(e),i=e;n&&n.value!==t;)n=n.next,i++;return i===this.size?-1:i},t.prototype._adjust=function(t){return 0>t?this.size+t:t},t}(),t.exports=e}).call(this)},function(t){(function(){var e,n,i,o,r={}.hasOwnProperty;n="_mapId_",e=function(){function t(e){var n,i;this._content={},this._itemId=0,this._id=t._newMapId(),this.size=0;for(n in e)r.call(e,n)&&(i=e[n],this.set(n,i))}return t._mapIdTracker=0,t._newMapId=function(){return this._mapIdTracker++},t.prototype.hash=function(t,e){var r,s;return null==e&&(e=!1),s=i(t),o(t)?(r=n+this._id,e&&!t[r]&&(t[r]=this._itemId++),r+"_"+t[r]):s+"_"+t},t.prototype.set=function(t,e){return this.has(t)||this.size++,this._content[this.hash(t,!0)]=[e,t],e},t.prototype.get=function(t){var e;return null!=(e=this._content[this.hash(t)])?e[0]:void 0},t.prototype.has=function(t){return this.hash(t)in this._content},t.prototype["delete"]=function(t){var e;return e=this.hash(t),e in this._content?(delete this._content[e],o(t)&&delete t[n+this._id],this.size--,!0):!1},t.prototype.forEach=function(t){var e,n,i;i=this._content;for(e in i)r.call(i,e)&&(n=i[e],t(n[1],n[0]))},t}(),o=function(t){var e,n,o,r,s;for(e=["Boolean","Number","String","Undefined","Null","RegExp","Function"],o=i(t),r=0,s=e.length;s>r;r++)if(n=e[r],o===n)return!1;return!0},i=function(t){return Object.prototype.toString.apply(t).match(/\[object (.+)\]/)[1]},t.exports=e}).call(this)},function(t){(function(){var e;e=function(){function t(t){null==t&&(t=[]),this._content=t,this._dequeueIndex=0,this.size=this._content.length}return t.prototype.enqueue=function(t){return this.size++,this._content.push(t),t},t.prototype.dequeue=function(){var t;if(0!==this.size)return this.size--,t=this._content[this._dequeueIndex],this._dequeueIndex++,2*this._dequeueIndex>this._content.length&&(this._content=this._content.slice(this._dequeueIndex),this._dequeueIndex=0),t},t.prototype.peek=function(){return this._content[this._dequeueIndex]},t}(),t.exports=e}).call(this)},function(t){(function(){var e,n,i,o,r,s,a,l,u,p,c,h,d,f,g;n=0,i=1,o=2,a=3,r=1,e=2,s=function(){function t(t){var e,n,i;for(null==t&&(t=[]),this._root,this.size=0,n=0,i=t.length;i>n;n++)e=t[n],null!=e&&this.add(e)}return t.prototype.add=function(t){var s,c,h,d;if(null!=t){if(this.size++,h={value:t,_color:r},this._root){if(c=l(this._root,function(e){return t===e.value?n:t<e.value?e._left?i:(h._parent=e,e._left=h,a):e._right?o:(h._parent=e,e._right=h,a)}),null!=c)return}else this._root=h;for(s=h;;){if(s===this._root){s._color=e;break}if(s._parent._color===e)break;{if((null!=(d=g(s))?d._color:void 0)!==r){!p(s)&&p(s._parent)?(this._rotateLeft(s._parent),s=s._left):p(s)&&!p(s._parent)&&(this._rotateRight(s._parent),s=s._right),s._parent._color=e,u(s)._color=r,p(s)?this._rotateRight(u(s)):this._rotateLeft(u(s));break}s._parent._color=e,g(s)._color=e,u(s)._color=r,s=u(s)}}return t}},t.prototype.has=function(t){var e;return e=l(this._root,function(e){return t===e.value?n:t<e.value?i:o}),e?!0:!1},t.prototype.peekMin=function(){var t;return null!=(t=d(this._root))?t.value:void 0},t.prototype.peekMax=function(){var t;return null!=(t=h(this._root))?t.value:void 0},t.prototype.remove=function(t){var e;return(e=l(this._root,function(e){return t===e.value?n:t<e.value?i:o}))?(this._removeNode(this._root,e),this.size--,t):void 0},t.prototype.removeMin=function(){var t,e;return(t=d(this._root))?(e=t.value,this._removeNode(this._root,t),e):void 0},t.prototype.removeMax=function(){var t,e;return(t=h(this._root))?(e=t.value,this._removeNode(this._root,t),e):void 0},t.prototype._removeNode=function(t,n){var i,o,s,a,l,u,h,g,m,v;if(n._left&&n._right&&(o=d(n._right),n.value=o.value,n=o),o=n._left||n._right,o||(o={color:e,_right:void 0,_left:void 0,isLeaf:!0}),o._parent=n._parent,null!=(s=n._parent)&&(s[c(n)]=o),n._color===e)if(o._color===r)o._color=e,o._parent||(this._root=o);else for(;;){if(!o._parent){this._root=o.isLeaf?void 0:o;break}if(i=f(o),(null!=i?i._color:void 0)===r&&(o._parent._color=r,i._color=e,p(o)?this._rotateLeft(o._parent):this._rotateRight(o._parent)),i=f(o),o._parent._color!==e||i&&(i._color!==e||i._left&&i._left._color!==e||i._right&&i._right._color!==e)){if(!(o._parent._color!==r||i&&(i._color!==e||i._left&&(null!=(a=i._left)?a._color:void 0)!==e||i._right&&(null!=(l=i._right)?l._color:void 0)!==e))){null!=i&&(i._color=r),o._parent._color=e;break}if((null!=i?i._color:void 0)===e){!p(o)||i._right&&i._right._color!==e||(null!=(u=i._left)?u._color:void 0)!==r?p(o)||i._left&&i._left._color!==e||(null!=(g=i._right)?g._color:void 0)!==r||(i._color=r,null!=(m=i._right)&&(m._color=e),this._rotateLeft(i)):(i._color=r,null!=(h=i._left)&&(h._color=e),this._rotateRight(i));break}i=f(o),i._color=o._parent._color,p(o)?(i._right._color=e,this._rotateRight(o._parent)):(i._left._color=e,this._rotateLeft(o._parent))}else null!=i&&(i._color=r),o.isLeaf&&(o._parent[c(o)]=void 0),o=o._parent}return o.isLeaf&&null!=(v=o._parent)?v[c(o)]=void 0:void 0},t.prototype._rotateLeft=function(t){var e,n;return null!=(e=t._parent)&&(e[c(t)]=t._right),t._right._parent=t._parent,t._parent=t._right,t._right=t._right._left,t._parent._left=t,null!=(n=t._right)&&(n._parent=t),null==t._parent._parent?this._root=t._parent:void 0},t.prototype._rotateRight=function(t){var e,n;return null!=(e=t._parent)&&(e[c(t)]=t._left),t._left._parent=t._parent,t._parent=t._left,t._left=t._left._right,t._parent._right=t,null!=(n=t._left)&&(n._parent=t),null==t._parent._parent?this._root=t._parent:void 0},t}(),p=function(t){return t===t._parent._left},c=function(t){return p(t)?"_left":"_right"},l=function(t,e){var r,s,l;for(s=t,l=void 0;s;){if(r=e(s),r===n){l=s;break}if(r===i)s=s._left;else if(r===o)s=s._right;else if(r===a)break}return l},d=function(t){return l(t,function(t){return t._left?i:n})},h=function(t){return l(t,function(t){return t._right?o:n})},u=function(t){var e;return null!=(e=t._parent)?e._parent:void 0},g=function(t){return u(t)?p(t._parent)?u(t)._right:u(t)._left:void 0},f=function(t){return p(t)?t._parent._right:t._parent._left},t.exports=s}).call(this)},function(t,e,n){(function(){var e,i,o,r,s={}.hasOwnProperty;e=n(6),o="end",i=function(){function t(t){var e,n,i;for(null==t&&(t=[]),this._root={},this.size=0,n=0,i=t.length;i>n;n++)e=t[n],this.add(e)}return t.prototype.add=function(t){var e,n,i,r;if(null!=t){for(this.size++,e=this._root,i=0,r=t.length;r>i;i++)n=t[i],null==e[n]&&(e[n]={}),e=e[n];return e[o]=!0,t}},t.prototype.has=function(t){var e,n,i,r;if(null==t)return!1;for(e=this._root,i=0,r=t.length;r>i;i++){if(n=t[i],null==e[n])return!1;e=e[n]}return e[o]?!0:!1},t.prototype.longestPrefixOf=function(t){var e,n,i,o,r;if(null==t)return"";for(e=this._root,i="",o=0,r=t.length;r>o&&(n=t[o],null!=e[n]);o++)i+=n,e=e[n];return i},t.prototype.wordsWithPrefix=function(t){var n,i,r,a,l,u,p,c,h,d;if(null==t)return[];for(null!=t||(t=""),p=[],i=this._root,c=0,h=t.length;h>c;c++)if(r=t[c],i=i[r],null==i)return[];for(l=new e,l.enqueue([i,""]);0!==l.size;){d=l.dequeue(),a=d[0],n=d[1],a[o]&&p.push(t+n);for(r in a)s.call(a,r)&&(u=a[r],l.enqueue([u,n+r]))}return p},t.prototype.remove=function(t){var e,n,i,s,a,l,u,p;if(null!=t){for(e=this._root,s=[],a=0,u=t.length;u>a;a++){if(i=t[a],null==e[i])return;e=e[i],s.push([i,e])}if(e[o]){if(this.size--,delete e[o],r(e,1))return t;for(n=l=p=s.length-1;(1>=p?1>=l:l>=1)&&!r(s[n][1],1);n=1>=p?++l:--l)delete s[n-1][1][s[n][0]];return r(this._root[s[0][0]],1)||delete this._root[s[0][0]],t}}},t}(),r=function(t,e){var n,i;if(0===e)return!0;i=0;for(n in t)if(s.call(t,n)&&(i++,i>=e))return!0;return!1},t.exports=i}).call(this)}]),e.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendMarkerClusterer",["uiGmapLodash",function(e){return{init:_.once(function(){(function(){var n={}.hasOwnProperty,i=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t.NgMapCluster=function(n){function o(e){o.__super__.constructor.call(this,e),this.markers_=new t.PropMap}return i(o,n),o.prototype.addMarker=function(t){var e,n;if(this.isMarkerAlreadyAdded_(t)){var i=this.markers_.get(t.key);if(i.getPosition().lat()==t.getPosition().lat()&&i.getPosition().lon()==t.getPosition().lon())return!1}if(this.center_){if(this.averageCenter_){var o=this.markers_.length+1,r=(this.center_.lat()*(o-1)+t.getPosition().lat())/o,s=(this.center_.lng()*(o-1)+t.getPosition().lng())/o;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();return t.isAdded=!0,this.markers_.push(t),e=this.markers_.length,n=this.markerClusterer_.getMaxZoom(),null!==n&&this.map_.getZoom()>n?t.getMap()!==this.map_&&t.setMap(this.map_):e<this.minClusterSize_?t.getMap()!==this.map_&&t.setMap(this.map_):e===this.minClusterSize_?this.markers_.each(function(t){t.setMap(null)}):t.setMap(null),!0},o.prototype.isMarkerAlreadyAdded_=function(t){return e.isNullOrUndefined(this.markers_.get(t.key))},o.prototype.getBounds=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);return this.getMarkers().each(function(e){t.extend(e.getPosition())}),t},o.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=new PropMap,delete this.markers_},o}(Cluster),t.NgMapMarkerClusterer=function(e){function n(e,i,o){n.__super__.constructor.call(this,e,i,o),this.markers_=new t.PropMap}return i(n,e),n.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=new PropMap
},n.prototype.removeMarker_=function(t){return this.markers_.get(t.key)?(t.setMap(null),this.markers_.remove(t.key),!0):!1},n.prototype.createClusters_=function(t){var e,n,i,o=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),i=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var r=this.getExtendedBounds(i),s=Math.min(t+this.batchSize_,this.markers_.length),a=this.markers_.values();for(e=t;s>e;e++)n=a[e],!n.isAdded&&this.isMarkerInBounds_(n,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);if(s<this.markers_.length)this.timerRefStatic=setTimeout(function(){o.createClusters_(s)},0);else{for(e=0;e<this.clusters_.length;e++)this.clusters_[e].updateIcon_();delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this)}}},n.prototype.addToClosestCluster_=function(t){var e,n,i,o,r=4e4,s=null;for(e=0;e<this.clusters_.length;e++)i=this.clusters_[e],o=i.getCenter(),o&&(n=this.distanceBetweenPoints_(o,t.getPosition()),r>n&&(r=n,s=i));s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):(i=new NgMapCluster(this),i.addMarker(t),this.clusters_.push(i))},n.prototype.redraw_=function(){this.createClusters_(0)},n.prototype.resetViewport_=function(t){var e;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();this.clusters_=[],this.markers_.each(function(e){e.isAdded=!1,t&&e.setMap(null)})},n.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)"constructor"!==e&&(this.prototype[e]=t.prototype[e]);return this}.apply(t,[e])},n.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){t.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")})]},n}(MarkerClusterer)}).call(this)})}}])}(window,angular),function(t,e,n){"use strict";n.module("googlechart",[]).value("googleChartApiConfig",{version:"1",optionalSettings:{packages:["corechart"]}}).provider("googleJsapiUrl",function(){var t="https:",e="//www.google.com/jsapi";this.setProtocol=function(e){t=e},this.setUrl=function(t){e=t},this.$get=function(){return(t?t:"")+e}}).factory("googleChartApiPromise",["$rootScope","$q","googleChartApiConfig","googleJsapiUrl",function(i,o,r,s){var a=o.defer(),l=function(){var t={callback:function(){var t=r.optionalSettings.callback;i.$apply(function(){a.resolve()}),n.isFunction(t)&&t.call(this)}};t=n.extend({},r.optionalSettings,t),e.google.load("visualization",r.version,t)},u=t.getElementsByTagName("head")[0],p=t.createElement("script");return p.setAttribute("type","text/javascript"),p.src=s,p.addEventListener?p.addEventListener("load",l,!1):p.onreadystatechange=function(){("loaded"===p.readyState||"complete"===p.readyState)&&(p.onreadystatechange=null,l())},u.appendChild(p),a.promise}]).directive("googleChart",["$timeout","$window","$rootScope","googleChartApiPromise",function(t,e,i,o){return{restrict:"A",scope:{beforeDraw:"&",chart:"=chart",onReady:"&",onSelect:"&",select:"&"},link:function(e,r,s){function a(t,i,o){if("undefined"!=typeof e.chart.formatters[t]){if(!n.equals(e.chart.formatters[t],e.oldChartFormatters[t]))if(e.oldChartFormatters[t]=e.chart.formatters[t],e.formatters[t]=[],"color"===t)for(var r=0;r<e.chart.formatters[t].length;r++){var s=new i;for(l=0;l<e.chart.formatters[t][r].formats.length;l++){var a=e.chart.formatters[t][r].formats[l];"undefined"!=typeof a.fromBgColor&&"undefined"!=typeof a.toBgColor?s.addGradientRange(a.from,a.to,a.color,a.fromBgColor,a.toBgColor):s.addRange(a.from,a.to,a.color,a.bgcolor)}e.formatters[t].push(s)}else for(var l=0;l<e.chart.formatters[t].length;l++)e.formatters[t].push(new i(e.chart.formatters[t][l]));for(l=0;l<e.formatters[t].length;l++)e.chart.formatters[t][l].columnNum<o.getNumberOfColumns()&&e.formatters[t][l].format(o,e.chart.formatters[t][l].columnNum);("arrow"===t||"bar"===t||"color"===t)&&(e.chart.options.allowHtml=!0)}}function l(){l.triggered||void 0==e.chart||(l.triggered=!0,t(function(){if("undefined"==typeof e.chartWrapper){var n={chartType:e.chart.type,dataTable:e.chart.data,view:e.chart.view,options:e.chart.options,containerId:r[0]};e.chartWrapper=new google.visualization.ChartWrapper(n),google.visualization.events.addListener(e.chartWrapper,"ready",function(){e.chart.displayed=!0,e.$apply(function(t){t.onReady({chartWrapper:t.chartWrapper})})}),google.visualization.events.addListener(e.chartWrapper,"error",function(t){console.log("Chart not displayed due to error: "+t.message+". Full error object follows."),console.log(t)}),google.visualization.events.addListener(e.chartWrapper,"select",function(){var t=e.chartWrapper.getChart().getSelection()[0];e.$apply(function(){s.select?(console.log("Angular-Google-Chart: The 'select' attribute is deprecated and will be removed in a future release.  Please use 'onSelect'."),e.select({selectedItem:t})):e.onSelect({selectedItem:t})})})}else e.chartWrapper.setChartType(e.chart.type),e.chartWrapper.setDataTable(e.chart.data),e.chartWrapper.setView(e.chart.view),e.chartWrapper.setOptions(e.chart.options);"undefined"==typeof e.formatters&&(e.formatters={}),"undefined"!=typeof e.chart.formatters&&(a("number",google.visualization.NumberFormat,e.chartWrapper.getDataTable()),a("arrow",google.visualization.ArrowFormat,e.chartWrapper.getDataTable()),a("date",google.visualization.DateFormat,e.chartWrapper.getDataTable()),a("bar",google.visualization.BarFormat,e.chartWrapper.getDataTable()),a("color",google.visualization.ColorFormat,e.chartWrapper.getDataTable()));var i=e.chart.customFormatters;if("undefined"!=typeof i)for(var o in i)a(o,i[o],e.chartWrapper.getDataTable());t(function(){e.beforeDraw({chartWrapper:e.chartWrapper}),e.chartWrapper.draw(),l.triggered=!1})},0,!0))}function u(){o.then(function(){l()})}e.$watch(function(){return e.chart?{customFormatters:e.chart.customFormatters,data:e.chart.data,formatters:e.chart.formatters,options:e.chart.options,type:e.chart.type,view:e.chart.view}:e.chart},function(){u()},!0);var p=i.$on("resizeMsg",function(){t(function(){e.chartWrapper&&u()})});e.$on("$destroy",function(){p()}),e.oldChartFormatters={}}}}]).run(["$rootScope","$window",function(t,e){n.element(e).bind("resize",function(){t.$emit("resizeMsg")})}])}(document,window,window.angular);